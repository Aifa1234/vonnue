
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="1951e92b-97a7-5bc9-b970-429926a7d192")}catch(e){}}();
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="9eb94d04-f185-4480-b128-2c27c6d61fd6",e._sentryDebugIdIdentifier="sentry-dbid-9eb94d04-f185-4480-b128-2c27c6d61fd6")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[59500],{941528:function(e,t,n){n.d(t,{A:function(){return o}});var d=n(385796),r=n(729724),s=n(823302);let i=[r.G.ConvenienceMerchantFirstProduct,r.G.ConvenienceItemFirstProduct,r.G.BrowseListLink,r.G.SeoItemFirstProduct],l=e=>{let{crawlerInfo:t}=(0,s.qr)(e=>({crawlerInfo:e.crawlerInfo})),n=(0,s.qr)(e=>e.pageType);return t.isCrawler?"no_prompt":!e&&n&&i.includes(n)?"geolocation_prompt_multi_confirm":"default"},a={showGetLocationButton:!1,onClickGetLocation:()=>{},autocompleteInitialValue:"",autocompleteFetchOnFocus:!1,isGetLocationButtonDisabled:!1,isLoading:!1,firstAddressAutocompleteLocation:null,showAddressBarSubmitButton:!1,shouldFetchGeoLocationOnLoad:!1,shouldAddAddressAfterPermissionsGrant:!1,fetchGeoLocationAddresses:()=>{},showAddressInputModalOnLoad:!0,isAddressBarGeoSuggestionDropdownEnabled:!1,isAddressBarAutofocusEnabled:!1,showAddressTopPromptBanner:!0,addressCollectionVariant:"default"},o=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{fetchGeoLocationAddresses:n,addressSuggestions:r,isLoading:s}=(0,d.f)(),i=l(t),o=null==r?void 0:null===(e=r[0])||void 0===e?void 0:e.street,u={...a,onClickGetLocation:()=>{r.length||n()},autocompleteInitialValue:t?"":o,autocompleteFetchOnFocus:!t,isLoading:s,firstAddressAutocompleteLocation:(null==r?void 0:r[0])||null,showAddressBarSubmitButton:!0,shouldFetchGeoLocationOnLoad:!0,fetchGeoLocationAddresses:n,addressCollectionVariant:i};if("default"===i);else if("no_prompt"===i)return{...a,showAddressInputModalOnLoad:!1,isGetLocationButtonDisabled:!0,showAddressTopPromptBanner:!1};else if("geolocation_prompt_confirm"===i)return u;else if("geolocation_prompt_deferred"===i)return{...u,showAddressInputModalOnLoad:!1,shouldFetchGeoLocationOnLoad:!1,showAddressTopPromptBanner:!1};else if("geolocation_prompt_no_confirm"===i)return{...u,showAddressInputModalOnLoad:!1,shouldAddAddressAfterPermissionsGrant:!0,showAddressTopPromptBanner:!1};else if("geolocation_prompt_multi_confirm"===i)return{...u,autocompleteInitialValue:"",isAddressBarGeoSuggestionDropdownEnabled:!0};return a}},555912:function(e,t,n){var d=n(361967),r=n(190510),s=n(549736),i=n(232755),l=n(37174),a=n(996870),o=n(428596),u=n(902093),c=n(313773),f=n(222679),g=n(152724),m=n(516202),p=n(116692),v=n(278884),h=n(970501),b=n(818617),A=n(455639),y=n(360968),_=n(480704),S=n(99060),x=n(195650),C=n(283416),P=n(895973),I=n(148632),j=n(871387),E=n(717182),k=n(861264),L=n(731690),Z=n(994084),w=n(712504);t.Z=e=>{var t;let{dropoffOptions:n=[],dropoffPreferences:D=[],onCancel:T,driverInstructions:O,address:N,handleSubmitNewAddress:F,handleSubmitEditAddress:M,customizations:$,onShowPinCodeEducationModal:B,doNotShowPinCodeWarningBanner:z}=e,{consumer:U}=(0,v.R)(),R=(0,f.jb)(e=>e.state),q=(0,g.p)(),G=(0,_._h)(),V=(0,p.Z)(N.countryCode),{localEditForm:W,updateLocalEditForm:Q}=(0,E.R)({selectedAdddressData:N,isBuzzerInputEncouraged:V,consumerLastName:U.lastName,dropoffOptions:n,dropoffPreferences:D,driverInstructions:O}),{subpremise:K,entryCode:H,selectedDropoffOptionId:Y,dropoffOptionWithInstructions:J,draftCoordinates:X,formError:ee}=W,et=(0,k.V0)(ee),[en,ed]=c.useState(k.Gt.Edit),er=()=>Q("draftCoordinates",null),[es,ei]=c.useState(null),el=()=>ei(null),{isAdjustPinReadjustmentEnabled:ea}=(0,w.Z)(),{hideAdjustPin:eo=!1,hideDropOffOptions:eu=!1}=$||{};return(c.useEffect(()=>{(0,A.j)(y.wd.EditAddressPageView)},[]),en===k.Gt.ChangePin)?(0,d.jsx)(S.Z,{address:N,onSubmit:e=>{if(Q("formError",""),el(),ea){Q("draftCoordinates",e),ed(k.Gt.Edit);return}(0,_.ng)(e,N)?(Q("draftCoordinates",e),ed(k.Gt.Edit)):(er(),ei(L.ZP.t("addressPickerStrings_addressEditPinLocationError")))},onCancel:e=>{e.nativeEvent.stopImmediatePropagation(),er(),el(),ed(k.Gt.Edit)},draftCoordinates:X||(0,_.ey)(N),handleChangePinLocation:e=>{Q("draftCoordinates",e)},errorMessage:es,hideTitle:!1,shouldStackActionButtons:!1,hideActionButtons:!1}):(0,d.jsxs)(i.Z,{"data-anchor-id":b.ep.AddressEditForm,"data-testid":b.ep.AddressEditForm,children:[(0,d.jsx)(P.Z,{separatorType:l.C.separator,children:(0,d.jsx)(C.Z,{hideAdjustPin:eo,isAddressLabelEnabled:!1,shortname:null!==(t=N.shortname)&&void 0!==t?t:"",printableAddress:N.printableAddress,address:N,locationOverride:X||(0,_.ey)(N),onClickAdjustPin:e=>{e.nativeEvent.stopImmediatePropagation(),ed(k.Gt.ChangePin),(0,I.mo)()},subpremise:K})}),(0,d.jsx)(m.Z,{onClick:()=>{},orderCartId:null==q?void 0:q.id}),(0,d.jsx)(a.Z,{value:K,size:o.J9.small,onChange:e=>Q("subpremise",e),placeholder:V?L.ZP.t("addressPickerStrings_apartmentInputWithBuzzer_placeholder"):L.ZP.t("addressPickerStrings_apartmentInput_placeholder"),label:V?L.ZP.t("addressPickerStrings_apartmentInputWithBuzzer_label"):L.ZP.t("addressPickerStrings_apartmentInput_label")}),G&&"ready"===R&&(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(a.Z,{value:H,size:o.J9.small,onChange:e=>{Q("entryCode",e)},placeholder:L.ZP.t("addressPickerStrings_entryCode_placeholder"),label:L.ZP.t("addressPickerStrings_entryCode_label"),description:L.ZP.t("addressPickerStrings_OptionalLabel")})}),!eu&&(0,d.jsx)(j.Z,{dropoffOptions:n,selectedDropoffOptionId:Y,onDropoffOptionChange:e=>Q("selectedDropoffOptionId",e),instructions:(0,_.I0)(J,Y),onInstructionsChange:e=>{Y&&Q("dropoffOptionWithInstructions",J.slice().map(t=>t.optionId===Y?{optionId:Y,instructions:e}:t))},useNewDesign:!1,onCloseOfAddressEdit:T,onShowPinCodeEducationModal:B,doNotShowPinCodeWarningBanner:z}),!!et&&(0,d.jsx)(x.Z,{children:null!=et?et:""}),(0,d.jsxs)(u.Z,{children:[(0,d.jsx)(r.Z,{onClick:T,type:s.L$.tertiary,children:L.ZP.t("addressPickerStrings_addressEditCancel")}),(0,d.jsx)(r.Z,{"data-anchor-id":b.ep.AddressEditSave,onClick:function(e){e.nativeEvent.stopImmediatePropagation();let t=Y||void 0,n=K||"",d=H||"",r=(0,_.I0)(J,Y),{manualLat:s,manualLng:i}=(0,_.Yt)(X),l={subpremise:n,driverInstructions:r,dropoffOptionId:t,manualLat:s,manualLng:i,addressLinkType:h.z5q.ADDRESS_LINK_TYPE_UNSPECIFIED,entryCode:d,buildingName:void 0,personalAddressLabel:void 0,addressId:N.addressId},{lat:a,lng:o}=N;Q("formError",null);let u=(0,_.Uq)(N)?N.id:"";if(H&&(0,I.eK)(u,H.length),(0,_.Uq)(N)){var c;null===(c=M({...l,addressId:N.id}))||void 0===c||c.then(()=>{s&&i&&(0,Z.$g)({original_lat:a,original_lng:o,pin_lat:s,pin_lng:i})}).catch(e=>{Q("formError",(0,k.Au)(e)),s&&i&&(0,k.NC)(e)&&(0,Z.ij)({original_lat:a,original_lng:o,pin_lat:s,pin_lng:i})})}else{let e=F(l);void 0!==e&&e.then(()=>{(0,I.KS)({manualLat:s,manualLng:i,lat:a,lng:o,dropoffOptionId:t}),s&&i&&(0,Z.$g)({original_lat:a,original_lng:o,pin_lat:s,pin_lng:i})}).catch(e=>{Q("formError",(0,k.Au)(e)),(0,I.hJ)({manualLat:s,manualLng:i,lat:a,lng:o,dropoffOptionId:t}),s&&i&&(0,k.NC)(e)&&(0,Z.ij)({original_lat:a,original_lng:o,pin_lat:s,pin_lng:i})})}},children:L.ZP.t("addressPickerStrings_addressEditSave")})]})]})}},283416:function(e,t,n){var d=n(361967),r=n(232755),s=n(509300),i=n(560930),l=n(655914),a=n(902093),o=n(22649),u=n(190510),c=n(549736),f=n(117874);n(313773);var g=n(469894),m=n(805990),p=n(731690),v=n(374856),h=n(650646),b=n(861264),A=n(653394);let y=(0,g.default)(()=>Promise.all([n.e(1042),n.e(8334),n.e(60638)]).then(n.bind(n,332350)),{loadableGenerated:{webpack:()=>[332350]},ssr:!1}),_={styles:b.r};t.Z=e=>{let{hideAdjustPin:t,isAddressLabelEnabled:n,shortname:g,subpremise:b,printableAddress:S,address:x,locationOverride:C,onClickAdjustPin:P}=e,I=(0,A.cv)(),j=I&&void 0!==x.formattedAddressSegmentedList&&x.formattedAddressSegmentedNonUserEditableFieldsList[0]?x.formattedAddressSegmentedNonUserEditableFieldsList[0]:b?"".concat(g," ").concat((0,m.Ay)(b)).trim():g,E=I&&void 0!==x.formattedAddressSegmentedList&&x.formattedAddressSegmentedNonUserEditableFieldsList[0]?x.formattedAddressSegmentedNonUserEditableFieldsList[0]:g,k=I&&void 0!==x.formattedAddressSegmentedList&&x.formattedAddressSegmentedNonUserEditableFieldsList[1]?x.formattedAddressSegmentedNonUserEditableFieldsList[1]:(0,m.gj)(g||"",S||"");return(0,d.jsxs)(r.Z,{size:n?s.Uo.small:s.Uo.none,children:[!n&&(0,d.jsx)(i.x,{textStyle:l.TextStyle.display.medium,"data-testid":"AddressEditHeaderTitle",children:E}),(0,d.jsx)(y,{defaultAddress:x,locationOverride:C,mapOptions:n?_:void 0,allowDifferentMapProvider:!0}),(0,d.jsxs)(a.Z,{alignItems:o.v2.center,justifyContent:o.dy.spaceBetween,children:[(0,d.jsxs)(r.Z,{size:n?s.Uo.none:s.Uo.xxSmall,children:[(0,d.jsx)(i.x,{textStyle:n?l.TextStyle.label.medium.default:l.TextStyle.label.large.strong,color:l.d9.text.default,children:I?E:n?j:g}),(0,d.jsx)(i.x,{textStyle:l.TextStyle.label.small.default,color:l.d9.text.subdued.default,children:k})]}),!t&&(0,d.jsx)(h.iP,{children:(0,d.jsx)(u.Z,{onClick:P,type:c.L$.tertiary,size:n?f.qE.small:void 0,"data-testid":v.D.AddressEditAdjustPinButton,children:p.ZP.t("addressPickerStrings_addressEditAdjustPin")})})]})]})}},895973:function(e,t,n){var d=n(361967),r=n(37174),s=n(204425);n(313773);var i=n(374856);t.Z=e=>{let{separatorType:t=r.C.fullBorder,hideSeparator:n=!1,children:l}=e;return(0,d.jsxs)(d.Fragment,{children:[l,!n&&(0,d.jsx)(s.Z,{"data-testid":i.D.AddressEditSectionSeparator,type:t})]})}},650646:function(e,t,n){n.d(t,{Bv:function(){return u},Ko:function(){return o},RY:function(){return f},Si:function(){return c},iP:function(){return a},pW:function(){return g}});var d=n(159967),r=n(645827),s=n(484497),i=n(431325),l=n(918564);let a=l.default.div.withConfig({componentId:"sc-48f6a83f-0"})(["flex:0;"]),o=l.default.div.withConfig({componentId:"sc-48f6a83f-1"})(["width:calc("," * 2);top:80%;left:50%;transform:translate(-50%,-50%);position:absolute;"],d.Q2.usage.space.legacyXxxLarge),u=l.default.div.withConfig({componentId:"sc-48f6a83f-2"})(["width:auto;button{div{padding:",";}}"],d.Q2.usage.space.none);l.default.div.withConfig({componentId:"sc-48f6a83f-3"})(["padding-top:",";margin-left:calc(-1 * ",");margin-right:calc(-1 * ",");"],d.Q2.usage.space.xxxLarge,d.Q2.usage.space.medium,d.Q2.usage.space.medium);let c=l.default.button.withConfig({componentId:"sc-48f6a83f-4"})(["display:flex;justify-content:center;align-items:center;cursor:pointer;border:none;background-color:inherit;padding:0;"]),f=(0,l.default)(r.Z).attrs(()=>({type:s.IconType.CloseCircleFill,size:i.J.medium})).withConfig({componentId:"sc-48f6a83f-5"})([""]),g=l.default.div.withConfig({componentId:"sc-48f6a83f-6"})(["padding-top:",";"],d.Q2.usage.space.xSmall)},148632:function(e,t,n){n.d(t,{KS:function(){return l},UR:function(){return c},ZU:function(){return u},eK:function(){return g},hJ:function(){return a},mo:function(){return f}});var d=n(650118),r=n(455639),s=n(360968);let i=e=>t=>{let n,{manualLat:s,manualLng:i,lat:l,lng:a,dropoffOptionId:o}=t,u=!!(s&&i);n=s&&i?(0,d.Z)({latitude:s,longitude:i},{latitude:l,longitude:a}):0,(0,r.j)(e,{withCustomCoordinates:u,dropoff_option_id:o,pin_lat:s,pin_lng:i,original_addr_lat:l,original_addr_lng:a,distance:n})},l=i(s.wd.SubmittedNewAddress),a=i(s.wd.SubmittedNewAddressError),o=e=>t=>{let{addressId:n,manualLat:d,manualLng:s}=t;(0,r.j)(e,{address_id:n,pin_lat:d,pin_lng:s})},u=o(s.wd.SubmittedPinAdjustment),c=o(s.wd.SubmittedPinAdjustmentError),f=()=>{(0,r.j)(s.wd.ClickedAdjustPin)},g=(e,t)=>{(0,r.j)(s.wd.ChangedEntryCode,{address_id:e,entryCodeLength:t})}},504253:function(e,t,n){n.d(t,{Z:function(){return K}});var d=n(361967),r=n(232755),s=n(509300),i=n(902093),l=n(996870),a=n(428596),o=n(190510),u=n(549736),c=n(117874),f=n(484497),g=n(613531),m=n(313773),p=n(152724),v=n(516202),h=n(116692),b=n(278884),A=n(249478),y=n(818617),_=n(731690),S=n(455639),x=n(360968),C=n(480704),P=n(99060),I=n(498777),j=n(374856),E=n(85890),k=n(283416),L=n(895973),Z=n(650646),w=n(148632),D=n(195482),T=n(892976),O=n(560930),N=n(655914),F=n(366755),M=n(350497),$=n.n(M),B=n(885174),z=n(6383),U=n(861264);let R=$()(e=>e(),200);var q=e=>{let{labelName:t,onChange:n,error:i}=e,[o,u]=m.useState(),[c,f]=m.useState(t),g=m.useRef(null),p=(0,U.Rc)(i);return m.useEffect(()=>{(0,U.Yg)(i)&&g.current&&(0,B.Wk)(g.current,80)},[i]),(0,d.jsxs)(r.Z,{size:s.Uo.small,children:[(0,d.jsx)("div",{ref:g,children:(0,d.jsx)(l.Z,{value:c,size:a.J9.large,label:_.ZP.t("addressPickerStrings_addressLabel_label"),onChange:e=>{f(e),R(()=>{let t=e.trim();n(t),u((0,U.Kf)(t))})},onClick:()=>(0,z.Jn)(c),placeholder:_.ZP.t("addressPickerStrings_addressLabel_placeholder"),renderAfterContent:c?()=>(0,d.jsx)(Z.Si,{type:"button","aria-label":_.ZP.t("addressPickerStrings_addressLabel_clearButtonText"),onClick:()=>{n(""),f(""),u(void 0)},children:(0,d.jsx)(Z.RY,{})}):void 0,error:p&&i?i:o})}),(0,d.jsx)(D.Z,{"data-testid":j.D.AddressLabelBanner,bannerType:T.$.highlight,body:(0,d.jsx)(O.x,{textStyle:N.TextStyle.body.small.default,children:_.ZP.t("addressPickerStrings_addressLabel_bannerText")}),iconType:F.W.None})]})},G=n(871387),V=n(717182),W=n(166120),Q=n(970501),K=e=>{var t,n;let{dropoffOptions:D=[],dropoffPreferences:T=[],driverInstructions:O,address:N,preSelectedAddressLabelName:F,handleRemoveAddress:M,defaultAddressId:$,hideAdjustPin:B=!1,hideDropOffOptions:z=!1,onShowPinCodeEducationModal:U,onCloseOfAddressEdit:R,doNotShowPinCodeWarningBanner:K}=e,{consumer:H}=(0,b.R)(),Y=(0,p.p)(),{isMobile:J}=(0,A.ac)(),X=(0,h.Z)(N.countryCode),{mode:ee,setMode:et,useDraftAddressFromModal:en,draftAddress:ed,setDraftAddress:er,editFormError:es,setEditFormError:ei}=null!==(t=(0,I.R)())&&void 0!==t?t:{},{localEditForm:el,updateLocalEditForm:ea}=(0,V.R)({selectedAdddressData:N,isBuzzerInputEncouraged:X,consumerLastName:H.lastName,dropoffOptions:D,dropoffPreferences:T,driverInstructions:O,preSelectedAddressLabelName:F}),{subpremise:eo,buildingName:eu,entryCode:ec,personalAddressLabelName:ef,selectedDropoffOptionId:eg,dropoffOptionWithInstructions:em,draftCoordinates:ep}=el,ev=!!(0,C.Uq)(N)&&$===N.id;!function(e){let{skip:t,localEditForm:n,setDraftAddress:d,address:r,isGiftingAddressToggled:s}=e,{isAddressLabelEnabled:i}=(0,W.Z)();(0,m.useEffect)(()=>{t||null==d||d(e=>{let t=i?{labelName:n.personalAddressLabelName,labelIcon:null}:null,d={subpremise:n.subpremise,buildingName:n.buildingName,entryCode:n.entryCode,dropoffOptionId:n.selectedDropoffOptionId||void 0,driverInstructions:(0,C.I0)(n.dropoffOptionWithInstructions,n.selectedDropoffOptionId),addressLinkType:s?Q.z5q.ADDRESS_LINK_TYPE_GIFT:Q.z5q.ADDRESS_LINK_TYPE_UNSPECIFIED,personalAddressLabel:t,isGiftingAddressToggled:s,draftCoordinates:n.draftCoordinates,googlePlaceId:(0,C.aN)(r)?r.googlePlaceId:"",id:(0,C.aN)(r)?"":r.id,addressId:""};if(!e){var l,a,o,u,c,f;return{...r,...d,city:null!==(l=r.city)&&void 0!==l?l:"",state:null!==(a=r.state)&&void 0!==a?a:"",lat:r.lat,lng:r.lng,street:null!==(o=r.street)&&void 0!==o?o:"",shortname:null!==(u=r.shortname)&&void 0!==u?u:"",printableAddress:null!==(c=r.printableAddress)&&void 0!==c?c:"",zipCode:null!==(f=r.zipCode)&&void 0!==f?f:""}}return{...r,...e,...d}})},[n,t,s,d,i,r])}({skip:!en,localEditForm:el,setDraftAddress:er,address:N,isGiftingAddressToggled:!1});let eh=m.useCallback(e=>ea("personalAddressLabelName",e),[ea]);return(m.useEffect(()=>{(0,S.j)(x.wd.EditAddressPageView)},[]),ee===E.A.Default)?null:ee===E.A.ChangePin?(0,d.jsx)(P.Z,{address:N,draftCoordinates:ep||(0,C.ey)(N),handleChangePinLocation:e=>ea("draftCoordinates",e),errorMessage:null,hideTitle:!0,shouldStackActionButtons:J,hideActionButtons:!0}):(0,d.jsxs)(r.Z,{"data-anchor-id":y.ep.AddressEditForm,"data-testid":j.D.AddressEditForm,children:[(0,d.jsx)(r.Z,{size:s.Uo.small,children:(0,d.jsx)(L.Z,{children:(0,d.jsx)(k.Z,{hideAdjustPin:B,isAddressLabelEnabled:!0,shortname:null!==(n=N.shortname)&&void 0!==n?n:"",printableAddress:N.printableAddress,address:N,locationOverride:(null==ed?void 0:ed.draftCoordinates)||(0,C.ey)(N),onClickAdjustPin:e=>{e.nativeEvent.stopImmediatePropagation(),null==ei||ei(null),null==et||et(E.A.ChangePin),(0,w.mo)()},subpremise:eo})})}),(0,d.jsxs)(L.Z,{children:[(0,d.jsx)(v.Z,{onClick:()=>{},orderCartId:null==Y?void 0:Y.id}),(0,d.jsxs)(i.Z,{children:[(0,d.jsx)(l.Z,{value:eo,size:a.J9.small,onChange:e=>ea("subpremise",e),label:X?_.ZP.t("addressPickerStrings_apartmentInputWithBuzzer_label"):_.ZP.t("addressPickerStrings_apartmentInput_labelV2")}),(0,d.jsx)(l.Z,{value:ec,size:a.J9.small,onChange:e=>{ea("entryCode",e)},label:_.ZP.t("addressPickerStrings_entryCode_label")})]}),(0,d.jsx)(l.Z,{value:eu,size:a.J9.small,onChange:e=>{ea("buildingName",e)},label:_.ZP.t("addressPickerStrings_buildingName_label")}),!z&&(0,d.jsx)(G.Z,{dropoffOptions:D,selectedDropoffOptionId:eg,onDropoffOptionChange:e=>ea("selectedDropoffOptionId",e),instructions:(0,C.I0)(em,eg),onInstructionsChange:e=>{eg&&ea("dropoffOptionWithInstructions",em.slice().map(t=>t.optionId===eg?{optionId:eg,instructions:e}:t))},useNewDesign:!0,onCloseOfAddressEdit:R,onShowPinCodeEducationModal:U,doNotShowPinCodeWarningBanner:K})]}),!H.isGuest&&(0,d.jsx)(L.Z,{hideSeparator:ev,children:(0,d.jsx)(q,{labelName:ef,onChange:eh,error:null!=es?es:null})}),!ev&&(0,C.Uq)(N)&&(0,d.jsx)(L.Z,{hideSeparator:!0,children:(0,d.jsx)(Z.pW,{"data-testid":j.D.AddressEditRemoveButton,children:(0,d.jsx)(o.Z,{type:u.L$.destructive,size:c.qE.small,isInline:!0,leadingIcon:f.IconType.TrashLine,onClick:()=>M((0,C.Uq)(N)?N.id:""),children:_.ZP.t("address_remove_address")})})}),(0,d.jsx)(g.Z,{size:J?s.$f.legacyXxxLarge:s.$f.xxxLarge})]})}},994084:function(e,t,n){n.d(t,{$g:function(){return i},ij:function(){return l},oT:function(){return s}});var d=n(360968),r=n(455639);let s=()=>{(0,r.j)(d.wd.AdjustPinPageView)},i=e=>{(0,r.j)(d.wd.AdjustPinSaveSuccess,e)},l=e=>{(0,r.j)(d.wd.AdjustPinSaveDistanceTooFarError,e)}},871387:function(e,t,n){n.d(t,{Z:function(){return C}});var d=n(361967),r=n(996870),s=n(428596),i=n(232755),l=n(509300),a=n(560930),o=n(655914),u=n(902093),c=n(190510),f=n(549736),g=n(117874),m=n(269103),p=n(983362),v=n(313773),h=n(818617),b=n(544904),A=n(731690),y=n(970501),_=n(195482),S=n(892976),x=e=>{let{bannerLabel:t="",bannerBody:n,onCloseOfAddressEdit:r,onShowPinCodeEducationModal:s}=e;return(0,d.jsx)(_.Z,{label:t,body:n,bannerStyle:S.v4.default,bannerType:S.$.warning,actionPosition:S.b2.bottom,primaryAction:{onClick:()=>{null==r||r(),null==s||s()},content:A.ZP.t("manageSubscription_learnMore")}})},C=e=>{let{dropoffOptions:t,selectedDropoffOptionId:n,onDropoffOptionChange:_,instructions:S,onInstructionsChange:C,useNewDesign:P,onCloseOfAddressEdit:I,onShowPinCodeEducationModal:j,doNotShowPinCodeWarningBanner:E}=e,k=t.find(e=>(null==e?void 0:e.id)==="2"),L=t.find(e=>(null==e?void 0:e.id)==="1"),Z=(null==L?void 0:L.proofOfDeliveryType)===y.VCv.PIN_CODE,[w,D]=v.useState(""),T=A.ZP.t("addressPickerStrings_dropOffOptions_pinCode_disabled_message");v.useEffect(()=>{(null==k?void 0:k.disabledMessage)&&D(null==k?void 0:k.disabledMessage)},[t,null==k?void 0:k.disabledMessage]);let O=e=>null!==n?(0,d.jsx)(r.Z,{value:S,size:s.J9.medium,onChange:C,isMultiline:e,isResizeable:!0,placeholder:(0,b.sQ)(t,n||""),label:(0,b.sQ)(t,n||""),isLabelHidden:!0,"data-testid":h.ep.AddressEditDropoffInstructions}):null;return P?(0,d.jsxs)(i.Z,{size:l.Uo.small,children:[(0,d.jsx)(a.x,{textStyle:o.TextStyle.label.small.strong,children:A.ZP.t("addressPickerStrings_dropOffOptionsSentenceCase")}),(0,d.jsx)(u.Z,{size:l.O8.xSmall,children:t.map(e=>(0,d.jsx)(c.Z,{type:f.L$.tertiary,size:g.qE.small,isDisabled:!e.isEnabled,isToggled:e.id===n,isToggleable:!0,isInline:!0,onClick:()=>_(e.id),"data-testid":h.ep.AddressEditDropoffOption,children:e.displayString},e.id))}),O(3),Z&&!E&&(0,d.jsx)(x,{bannerBody:w||T,onCloseOfAddressEdit:I,onShowPinCodeEducationModal:j})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(i.Z,{"data-testid":h.ep.AddressEditDropoffSelection,children:[(0,d.jsx)(a.x,{textStyle:o.TextStyle.label.small.strong,children:A.ZP.t("addressPickerStrings_dropOffOptions")}),t.map(e=>(0,d.jsxs)(i.Z,{size:l.$f.small,children:[(0,d.jsx)(m.Z,{label:e.displayString,name:"dropoff-type",isDisabled:!e.isEnabled,isSelected:e.id===n,type:p._S.radio,onChange:()=>{_(e.id)},"data-testid":h.ep.AddressEditDropoffOption}),!e.isEnabled&&!Z&&e.disabledMessage&&(0,d.jsx)(a.x,{textStyle:o.TextStyle.label.small.default,color:o.d9.text.default,children:e.disabledMessage})]},e.id))]}),O(2),Z&&!E&&(0,d.jsx)(x,{bannerBody:w||T,onCloseOfAddressEdit:I,onShowPinCodeEducationModal:j})]})}},717182:function(e,t,n){n.d(t,{R:function(){return s}});var d=n(313773),r=n(544904);function s(e){let{selectedAdddressData:t,isBuzzerInputEncouraged:n,consumerLastName:s,dropoffOptions:i,dropoffPreferences:l,driverInstructions:a,preSelectedAddressLabelName:o}=e,[u,c]=(0,d.useState)(function(e){var t,n;let{selectedAdddressData:d,isBuzzerInputEncouraged:s,consumerLastName:i,dropoffOptions:l,dropoffPreferences:a,driverInstructions:o,preSelectedAddressLabelName:u}=e;return{subpremise:(s?i:null==d?void 0:d.subpremise)||"",buildingName:(null==d?void 0:d.buildingName)||"",entryCode:(null==d?void 0:d.entryCode)||"",personalAddressLabelName:null!==(n=null!=u?u:null==d?void 0:null===(t=d.personalAddressLabel)||void 0===t?void 0:t.labelName)&&void 0!==n?n:"",selectedDropoffOptionId:(0,r.xy)(a,l),dropoffOptionWithInstructions:(0,r.MG)(a,l,o),draftCoordinates:(null==d?void 0:d.manualLat)&&(null==d?void 0:d.manualLng)?{lat:null==d?void 0:d.manualLat,lng:null==d?void 0:d.manualLng}:null,formError:null}}({selectedAdddressData:t,isBuzzerInputEncouraged:n,consumerLastName:s,dropoffOptions:i,dropoffPreferences:l,driverInstructions:a,preSelectedAddressLabelName:o})),f=(0,d.useCallback)((e,t)=>{c(n=>({...n,[e]:t}))},[]);return(0,d.useMemo)(()=>({localEditForm:u,updateLocalEditForm:f}),[u,f])}},861264:function(e,t,n){n.d(t,{Au:function(){return f},Gt:function(){return r},Kf:function(){return m},NC:function(){return g},Rc:function(){return o},V0:function(){return c},Yg:function(){return u},r:function(){return l}});var d,r,s=n(55648),i=n(731690);(d=r||(r={})).ChangePin="ChangePin",d.Edit="Edit";let l=[{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]}],a=["This label is already in use"],o=e=>!!(e&&a.includes(e)),u=e=>null==e?void 0:e.includes("value too long for type character varying(28)"),c=e=>o(e)?null:e,f=e=>{let t=(0,s.ie)(e);return(null==t?void 0:t.message)||i.ZP.t("addressPickerStrings_addressEditSaveNewError")},g=e=>{let t=(0,s.ie)(e);return((null==t?void 0:t.message)||"").includes("Pin location is too far from the address")},m=e=>0===e.length?i.ZP.t("addressPickerStrings_addressLabel_minCharacterError"):e.length>28?i.ZP.t("addressPickerStrings_addressLabel_maxCharacterError"):void 0},659500:function(e,t,n){n.d(t,{Z:function(){return nr}});var d,r,s,i,l=n(361967),a=n(299891),o=n(313773),u=n(321569),c=n(164671),f=n(918821),g=n(74152),m=n(428596),p=n(190510),v=n(549736),h=n(117874),b=n(613531),A=n(509300),y=n(232755),_=n(204425),S=n(159967),x=n(262679),C=n(446169),P=n.n(C),I=n(918564),j=n(972173),E=n(554859),k=n(811094),L=n(166120),Z=n(649454),w=n(702210),D=n(731690),T=n(455639),O=n(544694),N=n(555912),F=n(504253),M=n(484497),$=n(560930),B=n(655914),z=n(818617),U=n(805990),R=n(360968),q=n(480704),G=n(374856),V=n(177560),W=n(424),Q=n(498367);let K=I.default.div.withConfig({componentId:"sc-d61ef26b-0"})(["> div{background-color:transparent;:hover{background-color:",";}}"],e=>{let{isSelected:t}=e;return t?W.i2.SystemRed20:S.Q2.usage.color.background.strong.default});var H=e=>{let{addressId:t,addressShortName:n,centered:d,size:r,useCustomTheme:s,isSelected:i,handleClick:a}=e,o=()=>(0,l.jsx)(V.Z,{type:v.L$.plain,"data-anchor-id":z.ep.AddressEditIcon,"data-testid":z.ep.AddressEditIcon,accessibilityLabel:D.ZP.t("addressPickerStrings_editAddressAriaLabel",{streetAddress:n}),onClick:e=>{e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),a(t)},iconType:h.L.EditLine,tag:"div",size:null!=r?r:void 0}),u=()=>s?(0,l.jsx)(K,{isSelected:i,children:o()}):o();return d?(0,l.jsx)(Q.A7,{children:u()}):u()},Y=e=>{let{addressId:t,addressShortName:n,handleClick:d}=e;return(0,l.jsx)(V.Z,{type:v.L$.plain,"data-anchor-id":z.ep.AddressDeleteIcon,"data-testid":z.ep.AddressDeleteIcon,accessibilityLabel:D.ZP.t("addressPickerStrings_removeAddressAriaLabel",{streetAddress:n}),onClick:e=>{e.stopPropagation(),d(t)},iconType:h.L.Close,tag:"div"})},J=n(694933),X=n(864809),ee=n(618539),et=n(379186),en=e=>{let{isSelected:t,title:n,subtext:d,iconStart:r,isSeparatorVisible:s=!0,renderAfterContent:i,onClick:a,dataAttributes:o}=e,{isAddressLabelEnabled:u}=(0,L.Z)(),c=o?{"data-anchor-id":o.dataAnchorId,"data-testid":o.dataTestId}:{},f=()=>(0,l.jsx)(J.Z,{...c,size:X.LK.small,insetVerticalSize:u?A.wM.small:A.wM.medium,accessibilityRole:"radio",leadingIcon:r,isToggleable:!0,isToggled:t,onClick:a,label:n,description:d,renderAfterContent:i,isSeparatorVisible:s,iconVerticalAlignment:u?ee.Ao.center:void 0});return t&&u?(0,l.jsx)(et.iS,{overrides:{usage:{color:{transparent:{default:W.i2.SystemRed0,hovered:W.i2.SystemRed5,pressed:W.i2.SystemRed20}}}},children:f()}):(0,l.jsx)(l.Fragment,{children:f()})},ed=n(653394),er=n(445116);let es=e=>{let{isSelected:t,isAddressLabelEnabled:n,personalAddressLabel:d}=e;return n?(0,q.at)(null==d?void 0:d.labelIcon,t):t?M.IconType.RadioOnCircleFill:M.IconType.RadioOffCircleLine};var ei=e=>{var t;let{availableAddresses:n,defaultAddressId:d,onEdit:r,onSelect:s,onRemove:i,source:a,isLiteGuest:u,isAddressLabelEnabled:c,getIsRecentAddressSelected:f}=e,g=null!==(t=null==n?void 0:n.filter(j.K))&&void 0!==t?t:[],m=g.length;o.useEffect(()=>{(0,T.j)(R.wd.EnterAddressPageView,{num_saved_addresses:m,source:a})},[m,a]);let p=(0,ed.cv)(),v=(0,er.M)();return(0,l.jsx)("div",{role:"radiogroup","data-anchor-id":z.ep.AddressList,children:g.map((e,t)=>{var n;let a=e.shortname||"",o=p&&e.formattedAddressSegmentedList[0]?e.formattedAddressSegmentedList[0]:"".concat(e.shortname," ").concat((0,U.Ay)(e.subpremise)).trim(),m=(null==f?void 0:f(e.id))||!1,b=null!==(n=e.personalAddressLabel)&&void 0!==n?n:null,A=c&&(null==b?void 0:b.labelName);return(0,l.jsx)(en,{isSelected:m,title:A?b.labelName:o,subtext:(()=>{let t=p&&e.formattedAddressSegmentedList[1]?e.formattedAddressSegmentedList[1]:A?e.printableAddress:(0,U.gj)(a,e.printableAddress||"");return c?(0,l.jsx)($.x,{textStyle:B.TextStyle.label.small.strong,color:m?B.d9.currentColor:B.d9.text.subdued.default,children:t}):t})(),iconStart:{isInteractive:!1,type:es({isSelected:m,isAddressLabelEnabled:c,personalAddressLabel:b})},isSeparatorVisible:!c||t!==g.length-1,renderAfterContent:()=>{if(u||v)return null;let t=c?h.rm.small:null;return(0,l.jsxs)(l.Fragment,{children:[r&&(0,l.jsx)(H,{addressId:e.id,addressShortName:a,handleClick:r,centered:c,size:t,useCustomTheme:c,isSelected:m}),!c&&!m&&i&&(0,l.jsx)(Y,{addressId:e.id,addressShortName:a,handleClick:i})]})},onClick:()=>{s(e.id),w.AR(d),(0,T.j)("m_update_user_default_address_job_success",{address_id:e.id})},dataAttributes:{dataAnchorId:z.ep.AddressListItem,dataTestId:G.D.AddressListItem}},e.id)})})},el=n(249478),ea=e=>{let{availableAddressesWithoutLabel:t,onClick:n}=e,[d,r]=o.useState(-1),{isMobile:s}=(0,el.ac)();return(0,l.jsx)(l.Fragment,{children:t.map((e,i)=>{var a;let o="".concat(e.shortname," ").concat((0,U.Ay)(e.subpremise)).trim(),u=d===i||s;return(0,l.jsx)("div",{onMouseEnter:()=>r(i),onMouseLeave:()=>r(-1),children:(0,l.jsx)(J.Z,{"data-anchor-id":z.ep.AddressListSetLabelItem,"data-testid":z.ep.AddressListSetLabelItem,size:X.LK.small,insetVerticalSize:A.wM.small,accessibilityRole:"radio",leadingIcon:{isInteractive:!1,type:M.IconType.LocationPinEnabledLine},isToggleable:!0,onClick:()=>{null==n||n(e.id)},label:o,description:(0,U.gj)(e.shortname||"",e.printableAddress||""),trailingIcon:u?{isInteractive:!1,type:M.IconType.ChevronRight,size:18}:void 0,isSeparatorVisible:i!==t.length-1})},null!==(a=e.id)&&void 0!==a?a:e.shortname)})})},eo=e=>{let{isSelected:t,onClick:n,isAddressLabelEnabled:d}=e,r=(0,l.jsx)(J.Z,{size:X.LK.small,accessibilityRole:"radio",leadingIcon:{isInteractive:!1,type:d?t?M.IconType.LocationPointerFill:M.IconType.LocationPointerLine:t?M.IconType.RadioOnCircleFill:M.IconType.RadioOffCircleLine},isToggleable:!0,isToggled:t,onClick:n,label:D.ZP.t("layoutStrings_header_currentLocation"),"data-testid":"CurrentLocationListCell"});return d&&t?(0,l.jsx)(et.iS,{overrides:{usage:{color:{transparent:{default:W.i2.SystemBlue5,hovered:W.i2.SystemBlue10,pressed:W.i2.SystemBlue30},brand:{primary:W.i2.SystemBlue70},text:{selected:S.Q2.usage.color.text.default}}}},children:r}):r},eu=n(222679),ec=n(305017),ef=n(970501),eg=n(6383);let em=(0,I.default)($.x).attrs(()=>({textStyle:B.TextStyle.title.medium})).withConfig({componentId:"sc-2bdec999-0"})(["padding-left:",";margin-bottom:",";margin-top:",";"],S.Q2.usage.space.medium,S.Q2.usage.space.xxSmall,S.Q2.usage.space.small);var ep=e=>{let{trackingContext:t,labeledAddresses:n,getIsLabeledAddressSelected:d,onClickUnsetAddress:r,onSelectLabelWithAddress:s,onEditLabelWithAddress:i}=e,a=(0,eu.y)(ec.pc.addressLabelsWebFollowUp,!1),o=n.filter(e=>e.type!==ef.jEO.PLUS&&null==e.address),u=n.filter(e=>e.type!==ef.jEO.PLUS),c=a?u:o,f=e=>{var n,d,i,l;let{addressEntryPoint:o,defaultAddressId:u}=t;(0,eg.Ur)({addressEntryPoint:o.toLowerCase().includes("checkout")?R.kS.Checkout:R.kS.AddressPicker,labelName:e.labelName,labelIcon:e.labelIcon,settingNew:!a||!e.address,addressId:a?null===(n=e.address)||void 0===n?void 0:n.id:null,previousAddressId:a?u:null}),a&&e.address?s(e.address.id):r({addressId:"",shortname:null!==(i=null===(d=e.address)||void 0===d?void 0:d.shortname)&&void 0!==i?i:void 0,labelName:null!==(l=e.labelName)&&void 0!==l?l:void 0})};return 0===c.length?null:(0,l.jsxs)(l.Fragment,{children:[a&&(0,l.jsx)(em,{children:D.ZP.t("addressPickerString_labeled")}),(0,l.jsx)(Q.Kk,{children:c.map((e,t)=>{var n;let r=null!=e.address,s=d(e);return(0,l.jsx)(en,{isSelected:s,title:e.labelName,subtext:(0,l.jsx)($.x,{textStyle:B.TextStyle.label.small.strong,color:s?B.d9.currentColor:B.d9.text.subdued.default,children:a&&r?null===(n=e.address)||void 0===n?void 0:n.printableAddress:D.ZP.t("addressPickerStrings_setAddress")}),iconStart:{isInteractive:!1,type:(0,q.at)(e.labelIcon,s)},renderAfterContent:()=>a&&r&&e.address?(0,l.jsx)(H,{addressId:e.address.id,addressShortName:e.address.shortname||"",handleClick:()=>{var t;return(null===(t=e.address)||void 0===t?void 0:t.id)&&i(e)},centered:!0,size:h.rm.small,useCustomTheme:!0,isSelected:s}):(0,l.jsx)(Q.Wk,{children:(0,l.jsx)(V.Z,{iconType:h.L.Add,type:v.xZ.tertiary,accessibilityLabel:D.ZP.t("addressPickerStrings_addresses"),size:h.rm.small})}),onClick:()=>f(e)},"".concat(e.labelName,"-").concat(t))})})]})},ev=(e,t,n)=>{let{isAddressLabelEnabled:d}=(0,L.Z)(),r=(0,eu.y)(ec.pc.addressLabelsWebFollowUp,!1)&&d,s=(0,o.useCallback)(d=>{let s=d===n,i=r&&!!e.find(e=>{var t;return(null===(t=e.address)||void 0===t?void 0:t.id)===d});return!t&&s&&!i},[r,t,n,e]),i=(0,o.useCallback)(e=>{var d;return r&&null!=e.address&&!t&&n===(null===(d=e.address)||void 0===d?void 0:d.id)},[r,t,n]);return(0,o.useMemo)(()=>({getIsRecentAddressSelected:s,getIsLabeledAddressSelected:i}),[s,i])},eh=n(997341),eb=n(498777),eA=n(488954),ey=n(85890);let e_=e=>{let{onClick:t,isDarkBackground:n,isDisabled:d=!1}=e;return(0,l.jsx)(p.Z,{isInline:!0,size:h.qE.small,leadingIcon:M.IconType.LocationPointerLine,type:n?v.L$.plain:v.L$.tertiary,onClick:t,accessibilityLabel:D.ZP.t("address_suggestion_get_location"),isDisabled:d,children:D.ZP.t("address_suggestion_get_location")})};var eS=n(941528),ex=n(837475),eC=n(222047),eP=n(858995),eI=n(730342),ej=n(584148);let eE=["Catex/AddressInput/PromptBanner/AddressPickerConnected","Common/Layout/LayoutAddressPicker/AddressPickerConnected"],ek=[eC.O6.none,eC.O6.xxxSmall],eL=e=>{let{initialInputValue:t="",addressEntryPoint:n="",hideGetLocationButton:d=!0,enableGeoLocationRedesign:r=!1,onGeoSuggestionDropdownSelect:s,isOpen:i,...a}=e,[u,c]=(0,o.useState)(t),[f,g]=(0,o.useState)(!u),m=(0,o.useCallback)(()=>{g(!1)},[]);(0,ej.O)("scroll",m),(0,ej.O)("keypress",m);let p=(0,o.useCallback)(e=>{c(e.street),s(e),(0,eh.Bi)(n||"")},[n,s]);return(0,l.jsx)(eP.E,{anchorContainerDisplayMode:"block",isOpen:i,position:eC.eW.bottomCenter,shouldAutomaticallyFlip:!1,setContentWidthAsAnchorWidth:!0,offset:ek,content:f&&(0,l.jsx)(eZ,{children:(0,l.jsx)(eI.Z.List,{onAddressSelect:p,isStaticPosition:!0,isAddressPickerInputEmpty:!u,enableHoverOnItemAfterContent:!1,hideGetLocationButton:d,enableLoggedOutHomePageStyle:r})}),children:(0,l.jsx)(O.Z,{...a,initialInputValue:u})})},eZ=I.default.div.withConfig({componentId:"sc-aec236dd-0"})(["max-height:20vh;overflow-y:scroll;scroll-behavior:smooth;overscroll-behavior:auto;"]);var ew=n(994084),eD=n(861264),eT=n(483377),eO=n(948807),eN=n(885200),eF=n(789147),eM=n(242630),e$=n(975484),eB=n(278728),ez=n(807515);let eU=I.default.div.withConfig({componentId:"sc-ee921dd3-0"})(["display:",";flex-wrap:wrap;gap:",";"],e=>e.isVisible?"flex":"none",S.Q2.usage.space.medium);var eR=(0,ez.zH)(e=>{var t,n;let{addressEntryPoint:d,onAddAddress:r,availableAddresses:s,labeledAddresses:i,onUpdateAddress:a,onSelectAddress:S,dropoffOptions:C,loading:I,addressAutocompleteLabel:M,isStaticPositionSuggestions:$,hideAddressList:B,defaultAddressId:z,onRemoveAddress:U,isLiteGuest:G,isGuest:V,renderBeforeAddressList:W,customizations:K,renderFooterActions:H=()=>null,defaultAddress:Y,handleIdentityLinkClick:J,placeholder:X,showIdentityLink:ee=!0,setIsEditTitle:et,setSelectedAddress:en,selectedAddressLabelName:er,isCurrentLocationEnabled:es,isCurrentLocationSelected:el,onClickCurrentLocation:eu,refetchQueries:ec,onSetLabelForAddressComplete:ef,onCloseAddressEdit:eg,onShowPinCodeEducationModal:em,doNotShowPinCodeWarningBanner:eC}=e,{isAddressLabelEnabled:eP}=(0,L.Z)(),eI=(0,ed.Wk)(),{getAddressDetails:ej}=(0,eT.l)(),{getAddressCandidate:ek,saveAddressCandidate:eZ}=(0,eM.y)(),ez="".concat(d,"/AddressPicker"),[eR,eq]=o.useState(),[eG,eV]=o.useState(ey.A.Default),[eW,eQ]=o.useState(!1),eK=(0,eF.t)(),{mode:eH,setMode:eY}=null!==(t=(0,eb.R)())&&void 0!==t?t:{},{getIsRecentAddressSelected:eJ,getIsLabeledAddressSelected:eX}=ev(i,el,z),e0=eH||eG,e1=eY||eV,{renderAddressEditFormInModal:e9=!1,editFormModalTitle:e3=D.ZP.t("addressPickerStrings_changeAddress"),renderAutocompleteSuggestionsInAnchoredLayer:e6=!1,hideAutoCompleteLabel:e2,renderOnDarkBackground:e7=!1,disableAddressValidation:e4=!1,isSearchField:e5=!1,disableBlur:e8=!1,hideGetLocationButton:te=!0,enableGeoLocationRedesign:tt=!1}=K||{},tn=((null==s?void 0:s.length)||0)>0,td=(null!=s?s:[]).filter(j.K).filter(e=>{var t;return!(null===(t=e.personalAddressLabel)||void 0===t?void 0:t.labelName)}),tr=(e,t)=>{eq(e),e1(t),null==et||et(t===ey.A.Edit),(0,eh.zj)(),w.Qh(ez)},ts=e=>(tr(e,ey.A.Default),r({...e}).then(()=>{(0,T.j)(R.wd.AddressSelectionWithoutValidation,{...e})}).catch(()=>{(0,T.j)(R.wd.SubmittedNewAddressError,{...e})})),ti=e=>{null==e||e.nativeEvent.stopImmediatePropagation(),eq(void 0),e1(ey.A.Default),null==et||et(!1),eQ(!1)},{showGetLocationButton:tl,onClickGetLocation:ta,autocompleteInitialValue:to,autocompleteFetchOnFocus:tu,isLoading:tc,firstAddressAutocompleteLocation:tf,showAddressBarSubmitButton:tg,isAddressBarGeoSuggestionDropdownEnabled:tm,isAddressBarAutofocusEnabled:tp}=(0,eS.A)(null!==Y),tv=(0,ed.M5)(V,tn),th=(0,ed.cv)(),[tb,tA]=o.useState(tf);o.useEffect(()=>{tA(tf)},[tf]);let ty=(e,t)=>{var n,d,r;let s=null==e?void 0:e.id;s&&(eq(e),e1(ey.A.Edit),(0,eh.gC)(),null==et||et(!0),null==en||en({addressId:s,shortname:null!==(d=null==e?void 0:e.shortname)&&void 0!==d?d:void 0,labelName:null!==(r=null!=t?t:null==e?void 0:null===(n=e.personalAddressLabel)||void 0===n?void 0:n.labelName)&&void 0!==r?r:void 0}))},t_=e=>{let{subpremise:t,driverInstructions:n,dropoffOptionId:d,addressId:r,manualLat:s,manualLng:i,addressLinkType:l,buildingName:o,entryCode:u,personalAddressLabel:c}=e;return a({subpremise:t,driverInstructions:n,dropoffOptionId:d,addressId:r,manualLat:s,manualLng:i,addressLinkType:l,buildingName:o,entryCode:u,personalAddressLabel:c}).then(e=>{var t;e1(ey.A.Default),null==et||et(!1),(0,eh.Hz)({addressId:r,dropoffOptionId:d,manualLat:s,manualLng:i,addressEntryPoint:ez,addressToUpdate:Y,editResponse:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.editConsumerAddressV2}),s&&i&&(0,ew.$g)({original_lat:null==Y?void 0:Y.lat,original_lng:null==Y?void 0:Y.lng,pin_lat:s,pin_lng:i})}).catch(e=>{throw(0,eh.a5)({addressId:r,dropoffOptionId:d,manualLat:s,manualLng:i,addressEntryPoint:ez,addressToUpdate:Y,editResponse:null}),s&&i&&(0,eD.NC)(e)&&(0,ew.ij)({original_lat:null==Y?void 0:Y.lat,original_lng:null==Y?void 0:Y.lng,pin_lat:s,pin_lng:i}),e})},tS=e=>e4?ts(e):tr(e,ey.A.Edit),tx=e=>{e4?ts(e):(eq(e),e1(ey.A.Edit),null==et||et(e0===ey.A.Edit))},tC=e=>{tx((0,e$.r)(e)),eQ(!0)},tP=()=>{e1(ey.A.ManualAddress)},tI=new eO.l$(ek,eZ),tj=(0,q.KE)();if(e0===ey.A.ManualAddress)return e9?(0,l.jsx)(eO.ZP,{addressEntryPoint:d,initialCountryCode:eK,loading:!1,addressExperienceServiceProvider:tI,labelConfigs:tj,trackingEvents:eN.EK,onConfirmDropoffLocation:tC,onBack:ti,renderedInModal:!0}):(0,l.jsx)(eO.ZP,{addressEntryPoint:d,initialCountryCode:eK,loading:!1,addressExperienceServiceProvider:tI,labelConfigs:tj,trackingEvents:eN.EK,onConfirmDropoffLocation:tC,onBack:ti});if((e0===ey.A.Edit||e0===ey.A.ChangePin)&&eR){if(eP&&eR){let e=(0,q.Uq)(eR)?eR.dropoffPreferences.allPreferences:[];return e9?(0,l.jsx)(eA.Z,{addressEntryPoint:ez,title:e3,address:eR,defaultAddressId:(0,q.aN)(eR)?"":eR.id,dropoffOptions:C,driverInstructions:null!==(n=eR.driverInstructions)&&void 0!==n?n:void 0,dropoffPreferences:e,onClose:ti,customizations:K,refetchQueries:ec,onCloseAddressEdit:eg,onShowPinCodeEducationModal:em,doNotShowPinCodeWarningBanner:eC,shouldSkipValidateAddress:eW}):(0,l.jsx)(u.Z,{isVisible:I,type:c.j.loading,children:(0,l.jsx)(f.Z,{children:(0,l.jsx)(Z.n,{skip:eW,address:(0,q.Uq)(eR)?eR:void 0,googlePlaceId:(0,q.Uq)(eR)?void 0:eR.googlePlaceId,addressId:(0,q.Uq)(eR)?void 0:eR.addressId,children:(0,l.jsx)(F.Z,{dropoffOptions:C,handleRemoveAddress:e=>{e?U(e):(0,x.eN)({level:"warning",message:"Trying to remove an address without id"})},preSelectedAddressLabelName:null!=er?er:void 0,dropoffPreferences:e,address:eR,defaultAddressId:z,hideAdjustPin:null==K?void 0:K.hideAdjustPin,hideDropOffOptions:null==K?void 0:K.hideDropOffOptions,onCloseOfAddressEdit:eg,onShowPinCodeEducationModal:em,doNotShowPinCodeWarningBanner:eC})})})})}let e=(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(u.Z,{isVisible:I,type:c.j.loading,children:(0,l.jsx)(f.Z,{children:(0,l.jsx)(Z.n,{skip:eW,address:(0,q.Uq)(eR)?eR:void 0,googlePlaceId:(0,q.Uq)(eR)?void 0:eR.googlePlaceId,addressId:(0,q.Uq)(eR)?void 0:eR.addressId,children:(0,l.jsx)(N.Z,{onCancel:ti,dropoffOptions:C,handleSubmitNewAddress:e=>{let{subpremise:t,driverInstructions:n,dropoffOptionId:d,manualLat:s,manualLng:i,addressLinkType:l,buildingName:a,entryCode:o,personalAddressLabel:u,addressId:c}=e;if(eR&&!(0,q.Uq)(eR))return r({...eR,subpremise:t,driverInstructions:n,dropoffOptionId:d,manualLat:s,manualLng:i,addressLinkType:l,buildingName:a,entryCode:o,personalAddressLabel:u,addressId:c})},handleSubmitEditAddress:t_,dropoffPreferences:(0,q.Uq)(eR)?eR.dropoffPreferences.allPreferences:[],address:eR,customizations:K,doNotShowPinCodeWarningBanner:eC})})})})});return e9?(0,l.jsx)(g.Z,{isOpen:!0,onClose:ti,title:e3,children:(0,l.jsx)(Q.oh,{children:e})}):e}let tE={label:null!=M?M:eP?"":D.ZP.t("addressPickerStrings_defaultAutocompleteLabel"),isLabelHidden:e2,initialInputValue:to||"",isStaticPositionSuggestions:$,onSelect:tS,renderSuggestionsInAnchoredLayer:e6,placeholder:X,isRounded:eP,addressEntryPoint:ez,shouldFetchSuggestionsOnFocus:tu,isLoading:tc,textFieldSize:tg?m.J9.large:void 0,updateSavedSuggestion:e=>{if(e){if(tk&&(null==e?void 0:e.placeId)&&(null==e?void 0:e.description)){if(e.placeId===(null==tb?void 0:tb.googlePlaceId))return;eI?(0,ex.PK)(e.placeId,ej).then(e=>{e.googlePlaceId!=(null==tb?void 0:tb.googlePlaceId)&&tA(e)}).catch(()=>{(0,x.eN)({level:"error",message:"Error on getAddressDetails"})}):(0,ex.N2)(e.placeId,e.description).then(e=>{e.googlePlaceId!=(null==tb?void 0:tb.googlePlaceId)&&tA(e)})}}else tA(null)},isAddressInputAutoFocused:tp||tv,isSearchField:e5,disableBlur:e8,renderConnectedAfter:tg&&null==Y?()=>(0,l.jsx)(p.Z,{onClick:()=>{tb&&((0,eh.pW)(d),tS(tb))},type:v.L$.full,size:h.qE.large,children:D.ZP.t("address_suggestion_submit_location")}):void 0,onEditAddress:e=>{ty(P()(s).find(t=>e===t.addressId))},onSelectAddress:e=>{let t=P()(s).find(t=>e===t.addressId);t&&t.id&&S(t.id)},isManualAddressEntryEnabled:th,onManualAddressEntry:tP,manualEntryCTAComp:e=>(0,l.jsx)(eB.Z,{active:e}),manualEntryCTAOnClick:tP},tk=tm&&!eE.includes(d);return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(u.Z,{isVisible:I,type:c.j.loading,children:[eP&&(0,l.jsx)(b.Z,{size:A.$f.xSmall}),(0,l.jsx)(f.Z,{isSquished:eP,children:(0,l.jsxs)(y.Z,{children:[tk?(0,l.jsx)(eL,{...tE,isOpen:!!tk,onGeoSuggestionDropdownSelect:e=>{tA(e)},hideGetLocationButton:te,enableGeoLocationRedesign:tt}):(0,l.jsx)(O.Z,{...tE}),(0,l.jsxs)(eU,{isVisible:tl||ee,"data-testid":"ButtonContainer",children:[tl&&(0,l.jsx)(e_,{onClick:()=>{(0,eh.iZ)(d),ta()},isDarkBackground:e7}),ee&&(0,l.jsx)(k.Jk,{isGuest:V,handleIdentityLinkClick:J,entry:E.KP.APP,isDarkBackground:e7,isAddressLabelEnabled:eP})]})]})}),eP&&!V&&e0===ey.A.Default&&(0,l.jsx)(ep,{labeledAddresses:i,getIsLabeledAddressSelected:eX,onSelectLabelWithAddress:S,onEditLabelWithAddress:e=>{if(!e.address)return;let{address:t,labelName:n}=e;ty(t,null!=n?n:void 0)},trackingContext:{addressEntryPoint:d,defaultAddressId:z},onClickUnsetAddress:e=>{let{addressId:t,labelName:n,shortname:d}=e;e1(ey.A.SetLabel),null==en||en({addressId:t,labelName:n,shortname:d,isFromLabeledAddress:!0})}}),!B&&(0,l.jsxs)(l.Fragment,{children:[tn&&!eP&&(0,l.jsx)(_.Z,{}),null==W?void 0:W(),(0,q.T8)({mode:e0,availableAddresses:s,isAddressLabelEnabled:eP})&&(0,l.jsx)(Q.UI,{hasMarginTop:ee,children:D.ZP.t("addressPickerStrings_recent")}),es&&e0===ey.A.Default&&(0,l.jsx)(eo,{isAddressLabelEnabled:eP,isSelected:el,onClick:eu}),e0===ey.A.SetLabel&&eP?(0,l.jsx)(ea,{availableAddressesWithoutLabel:td,onClick:e=>{var t,n;let d=null==s?void 0:s.find(t=>(null==t?void 0:t.id)===e);if(!d)return;let{subpremise:r,dropoffPreferences:i,id:l,manualLat:a,manualLng:o,addressLinkType:u,buildingName:c,entryCode:f}=d,g=i.allPreferences.find(e=>e.isDefault);null===(t=t_({addressId:l,subpremise:r,driverInstructions:null!==(n=null==g?void 0:g.instructions)&&void 0!==n?n:null,dropoffOptionId:null==g?void 0:g.optionId,manualLat:null!=a?a:void 0,manualLng:null!=o?o:void 0,addressLinkType:u,entryCode:null!=f?f:void 0,buildingName:null!=c?c:void 0,personalAddressLabel:{labelName:er}}))||void 0===t||t.then(()=>{null==ef||ef()})}}):(0,l.jsx)(ei,{availableAddresses:s,defaultAddressId:z,onEdit:(e,t)=>{ty(P()(s).find(t=>e===t.id),t)},onSelect:S,onRemove:U,isLiteGuest:G,isAddressLabelEnabled:eP,getIsRecentAddressSelected:eJ})]}),!H()&&(0,l.jsx)(b.Z,{size:eP?A.$f.medium:A.$f.none}),H()]})})},{name:"AddressPicker"}),eq=n(996870),eG=n(37174);let eV=()=>{let{isStorefront:e}=(0,a.Z)(),t=(0,eu.AY)(ec.pc.sfHoneybeeAutocompleteMigrationxx,"fallback");if(!e)return!1;let n=t.includes("HB");return(0,T.j)("sf_cx_hb_migration_autocomplete_dv",{value:t,hbEnabled:n}),n},eW=()=>"HB-MAE"===(0,eu.AY)(ec.pc.sfHoneybeeAutocompleteMigrationxx,"fallback");var eQ=n(822489),eK=n(463204),eH=e=>{let t={hideModal:!0,delivery:!0,tm:eK.dF.AddressChanged},n=eQ.stringify(t),d=e.includes("?")?"&":"?";return e+d+n},eY=n(714313),eJ=n(852670),eX=n(979994),e0=n(860413);function e1(){let e=(0,eX._)(["\n  query storefrontBestStoreForDeliveryAddress($businessId: ID!, $lat: Float!, $lng: Float!) {\n    deliverability: storefrontBestStoreForDeliveryAddress(businessId: $businessId, lat: $lat, lng: $lng) {\n      bestStoreId\n      deliverToAddress\n      redirectUrl\n    }\n  }\n"]);return e1=function(){return e},e}function e9(){let e=(0,eX._)(["\n  query storefrontBestStoreForDeliveryAddressByBusinessGroup(\n    $businessGroupId: ID!\n    $lat: Float!\n    $lng: Float!\n  ) {\n    deliverability: storefrontBestStoreForDeliveryAddressByBusinessGroup(\n      businessGroupId: $businessGroupId\n      lat: $lat\n      lng: $lng\n    ) {\n      bestStoreId\n      deliverToAddress\n      redirectUrl\n    }\n  }\n"]);return e9=function(){return e},e}let e3=(0,e0.gql)(e1()),e6=(0,e0.gql)(e9()),e2=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>null;return(0,eJ.t)(e3,{onCompleted:e})};var e7=n(496922),e4=n(260014),e5=n(665666);let e8=e=>{let{landOnPickup:t}=e,{storeInformation:n}=o.useContext(e4.ZP),d=(0,eY.tv)(),{businessId:r,storeId:s,businessGroupId:i}=n,l={};t&&(l.pickup=!0,l.delivery=!1);let a=(0,e5.mA)(l,r,i);return o.useEffect(()=>{(0,T.j)("storefront_redirect_to_landing_page",{storeId:s,businessId:r}),d.replace(a)},[a,d,r,s]),null},te=(0,I.default)(f.Z).attrs(()=>({size:A.wM.medium})).withConfig({componentId:"sc-875f5f61-0"})(["background-color:",";"],S.Q2.usage.color.negative.subdued.default),tt=(0,I.default)(f.Z).attrs(()=>({size:A.wM.medium})).withConfig({componentId:"sc-875f5f61-1"})(["background-color:",";"],S.Q2.usage.color.negative.subdued.default),tn=e=>{let t={usage:{color:{background:{subdued:{default:S.Q2.usage.color.background.subdued.default}},button:{primary:{background:{default:W.i2.SystemWhite,hovered:S.Q2.usage.color.background.subdued.default,pressed:W.i2.SystemWhite},foreground:{default:W.i2.SystemBlack}}}}}};return(0,l.jsx)(et.iS,{overrides:t,children:(0,l.jsx)(p.Z,{...e,children:e.children})})};var td=n(902093),tr=n(22649),ts=n(645827);let ti=()=>(0,T.j)("new_fulfillment_flow_existing_address_select"),tl=()=>(0,T.j)("new_fulfillment_flow_out_of_range"),ta=()=>(0,T.j)("new_fulfillment_flow_redirect_to_pickup_from_out_of_range"),to=()=>(0,T.j)("new_fulfillment_flow_switch_and_save_banner_load"),tu=e=>{let{isExistingAddress:t,isSubpremisePresent:n}=e;return(0,T.j)("new_fulfillment_flow_next_click",{is_existing_address:t,is_subpremise_present:n})},tc=()=>(0,T.j)("new_fulfillment_flow_redirecting_to_closer_store"),tf=e=>{(0,T.j)("new_fulfillment_flow_add_new_address",{is_redirecting_to_closer_store:e})},tg=()=>(0,T.j)("new_fulfillment_flow_add_address_edit_click");var tm=n(285310),tp=e=>{let{addressEntryPoint:t}=e,[,n]=(0,tm.o)();o.useEffect(()=>{tl()},[]);let[d,r]=o.useState(!1);if(d){if(ta(),!t.includes("Storefront/Home"))return(0,l.jsx)(e8,{landOnPickup:d});n(ef.LK5.Pickup)}return(0,l.jsx)(te,{children:(0,l.jsxs)(td.Z,{size:A.O8.medium,justifyContent:tr.dy.spaceBetween,children:[(0,l.jsx)(ts.Z,{type:M.IconType.ErrorFill,color:M.EY.negative.strong.default,accessibilityLabel:D.ZP.t("addressPickerStrings_accessibilityErrorIconLabel")}),(0,l.jsxs)(y.Z,{size:A.Uo.xSmall,children:[(0,l.jsx)($.x,{textStyle:B.TextStyle.label.large.default,weight:B.fs.bold,children:D.ZP.t("addressPickerStrings_addressOutOfRangeHeading")}),(0,l.jsx)($.x,{textStyle:B.TextStyle.label.small.default,children:D.ZP.t("addressPickerStrings_addressOutOfRangeBannerText")}),(0,l.jsx)(tn,{isInline:!0,isRaised:!0,onClick:()=>r(!0),children:(0,l.jsx)($.x,{textStyle:B.TextStyle.label.small.strong,color:S.Q2.usage.color.text.default,children:D.ZP.t("addressPickerStrings_addressOutOfRangeButton")})})]})]})})},tv=n(330920),th=()=>{let e=(0,eK.H3)(),{isMxWebsite:t}=(0,tv.E)(),[n,d]=o.useMemo(()=>e||t?[D.ZP.t("storefront_menu_fastStorePicker_enterDeliveryAddressModal_newAddressNewOrderTitle"),D.ZP.t("storefront_menu_fastStorePicker_enterDeliveryAddressModal_newAddressNewOrderSubTitle")]:[D.ZP.t("addressPickerStrings_addressSwitchAndSaveBannerTitle"),D.ZP.t("addressPickerStrings_addressSwitchAndSaveBannerText")],[e,t]);return o.useEffect(()=>{to()},[]),(0,l.jsx)(tt,{children:(0,l.jsxs)(td.Z,{size:A.O8.medium,justifyContent:tr.dy.spaceBetween,children:[(0,l.jsx)(ts.Z,{type:e?M.IconType.ErrorFill:M.IconType.WarningFill,color:e?M.EY.negative.default:M.EY.warning.default,accessibilityLabel:D.ZP.t("addressPickerStrings_accessibilitywarningIconLabel")}),(0,l.jsxs)(y.Z,{size:A.Uo.xSmall,children:[(0,l.jsx)($.x,{textStyle:B.TextStyle.label.large.default,children:n}),(0,l.jsx)($.x,{textStyle:B.TextStyle.label.small.default,children:d})]})]})})},tb=n(469894),tA=n(516202),ty=n(99060),t_=n(195650),tS=n(116692),tx=n(118697),tC=n(269103),tP=n(983362),tI=n(518766),tj=n(278884),tE=n(544904),tk=n(650646),tL=n(148632),tZ=n(902297);let tw=(0,tb.default)(()=>Promise.all([n.e(1042),n.e(8334),n.e(60638)]).then(n.bind(n,332350)),{loadableGenerated:{webpack:()=>[332350]},ssr:!1});(d=s||(s={})).ChangePin="ChangePin",d.Edit="Edit";var tD=e=>{let{saveButtonText:t,dropoffOptions:n,dropoffPreferences:d,onCancel:r,onAddressEdit:s,printableAddress:i,driverInstructions:a,subpremise:u,address:c,shortname:f,handleSubmitNewAddress:g,handleSubmitEditAddress:b,handleSubmitPinUpdate:S,showControlsOnlyForEditAddress:x,showEditAddressButton:C,customizations:P}=e,I=(0,tx.Z)(),{consumer:j}=(0,tj.R)(),{orderCart:E}=(0,tZ.re)(),k=(0,eu.jb)(e=>e.state),L=(0,q._h)(),Z=(0,tS.Z)(c.countryCode),[w,T]=o.useState((Z?j.lastName:u)||""),[O,N]=o.useState((null==c?void 0:c.entryCode)||""),[F,M]=o.useState((0,tE.xy)(d,n)),[R,G]=o.useState((0,tE.MG)(d,n,a)),[V,W]=o.useState("Edit"),[Q,K]=o.useState(null),H=()=>K(null),[Y,J]=o.useState(null),X=()=>J(null),[ee,et]=o.useState(null),{hideAdjustPin:en=!1,hideDropOffOptions:ed=!1}=P||{};async function er(e){e.nativeEvent.stopImmediatePropagation();let t=F||void 0,n=w||"",d=O||"",r=(0,q.I0)(R,F),{manualLat:s,manualLng:i}=(0,q.Yt)(Q),l={subpremise:n,driverInstructions:r,dropoffOptionId:t,manualLat:s,manualLng:i,entryCode:d};et(null);let a=(0,q.Uq)(c)?c.id:"";if(O&&(0,tL.eK)(a,O.length),(0,q.Uq)(c)&&(null==j?void 0:j.id))b({...l,addressId:c.id});else{let e=g(l);if(void 0!==e){let{lat:n,lng:d}=c;e.then(()=>(0,tL.KS)({manualLat:s,manualLng:i,lat:n,lng:d,dropoffOptionId:t})).catch(e=>{var r;et((null==e?void 0:null===(r=e.graphQLErrors[0])||void 0===r?void 0:r.message)||D.ZP.t("addressPickerStrings_addressEditSaveNewError")),(0,tL.hJ)({manualLat:s,manualLng:i,lat:n,lng:d,dropoffOptionId:t})})}}}let es=(0,l.jsx)(tk.iP,{children:(0,l.jsx)(p.Z,{onClick:e=>{e.nativeEvent.stopImmediatePropagation(),W("ChangePin"),(0,tL.mo)()},type:v.L$.primary,children:D.ZP.t("addressPickerStrings_addressEditAdjustPin")})});return"Edit"===V?(0,l.jsxs)(y.Z,{"data-anchor-id":z.ep.AddressEditForm,"data-testid":z.ep.AddressEditForm,children:[(0,l.jsx)(tw,{defaultAddress:c,locationOverride:Q||(0,q.ey)(c),allowDifferentMapProvider:I,overlayComponent:en?null:(0,l.jsx)(tk.Ko,{children:es})}),(0,l.jsxs)(td.Z,{alignItems:tr.v2.center,justifyContent:tr.dy.spaceBetween,children:[(0,l.jsx)(y.Z,{size:A.Uo.xxSmall,children:(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(tA.Z,{onClick:()=>{},orderCartId:null==E?void 0:E.id}),(0,l.jsx)($.x,{as:tI.$h.H3,textStyle:B.TextStyle.body.medium.default,children:"".concat(f).concat(u?" ".concat((0,U.Ay)(u)):"",", ").concat((0,U.gj)(f||"",i||""))})]})}),(x||(0,q.Uq)(c))&&!C?null:(0,l.jsx)(tk.Bv,{children:(0,l.jsx)(p.Z,{size:h.qE.small,type:v.L$.flatPrimary,onClick:s,children:D.ZP.t("addressPickerStrings_addressEdit")})})]}),(0,q.Uq)(c)&&(0,l.jsx)(o.Fragment,{children:(0,l.jsx)(eq.Z,{value:w,size:m.J9.small,onChange:e=>T(e),placeholder:Z?D.ZP.t("addressPickerStrings_apartmentInputWithBuzzer_placeholder"):D.ZP.t("addressPickerStrings_apartmentInput_placeholder"),label:Z?D.ZP.t("addressPickerStrings_apartmentInputWithBuzzer_label"):D.ZP.t("addressPickerStrings_apartmentInput_label"),isLabelHidden:!1})}),L&&"ready"===k&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(eq.Z,{value:O,size:m.J9.small,onChange:e=>{N(e)},placeholder:D.ZP.t("addressPickerStrings_entryCode_placeholder"),label:D.ZP.t("addressPickerStrings_entryCode_label"),description:D.ZP.t("addressPickerStrings_OptionalLabel")})}),!ed&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(y.Z,{"data-testid":z.ep.AddressEditDropoffSelection,children:[(0,l.jsx)(_.Z,{type:eG.C.fullBorder}),n.map(e=>(0,l.jsxs)(y.Z,{size:A.$f.small,children:[(0,l.jsx)(tC.Z,{label:e.displayString,name:"dropoff-type",isDisabled:!e.isEnabled,isSelected:e.id===F,type:tP._S.radio,onChange:()=>{M(e.id)}}),!e.isEnabled&&e.disabledMessage&&(0,l.jsx)($.x,{textStyle:B.TextStyle.label.small.default,color:B.d9.text.default,children:e.disabledMessage}),(0,l.jsx)(_.Z,{type:eG.C.fullBorder})]},e.id))]}),null!==F?(0,l.jsx)(eq.Z,{value:(0,q.I0)(R,F),size:m.J9.small,onChange:e=>{G(R.slice().map(t=>t.optionId===F?{optionId:F,instructions:e}:t))},isMultiline:2,isResizeable:!0,placeholder:(0,tE.sQ)(n,F||""),label:D.ZP.t("addressPickerStrings_addressDeliveryInstructions"),description:D.ZP.t("addressPickerStrings_OptionalLabel"),isLabelHidden:!1,"data-testid":z.ep.AddressEditDropoffInstructions}):null]}),ee&&(0,l.jsx)(t_.Z,{children:ee}),(0,l.jsxs)(td.Z,{children:[(0,l.jsx)(p.Z,{onClick:x||(0,q.Uq)(c)?r:s,type:v.L$.tertiary,children:x?D.ZP.t("addressPickerStrings_addressEditCancel"):D.ZP.t("addressPickerStrings_addressEditBackButtonText")}),(0,l.jsx)(p.Z,{"data-anchor-id":z.ep.AddressEditSave,onClick:er,children:t||D.ZP.t("addressPickerStrings_addressEditSave")})]})]}):(0,l.jsx)(ty.Z,{address:c,onSubmit:(0,q.Uq)(c)?e=>{X();let{manualLat:t,manualLng:n}=(0,q.Yt)(e);(0,q.Uq)(c)&&S(c.id,t,n).then(()=>{W("Edit"),(0,tL.ZU)({addressId:c.id,manualLat:t,manualLng:n})}).catch(()=>{J(D.ZP.t("addressPickerStrings_addressEditPinSaveError")),H(),(0,tL.UR)({addressId:c.id,manualLat:t,manualLng:n})})}:e=>{X(),(0,q.ng)(e,c)?(K(e),W("Edit")):(H(),J(D.ZP.t("addressPickerStrings_addressEditPinLocationError")))},onCancel:e=>{e.nativeEvent.stopImmediatePropagation(),H(),X(),W("Edit")},draftCoordinates:Q||(0,q.ey)(c),handleChangePinLocation:K,errorMessage:Y,shouldStackActionButtons:!1})},tT=n(453508),tO=n(820339);let tN=I.default.div.withConfig({componentId:"sc-20307b4-0"})(["display:flex;align-items:center;justify-content:space-between;color:",";background:",";padding:"," ",";border-top:1px solid ",";&:hover{cursor:pointer;background-color:",";}"],S.Q2.usage.color.text.default,e=>e.active?S.Q2.usage.color.background.subdued.default:S.Q2.usage.color.background.default,S.Q2.usage.space.small,S.Q2.usage.space.medium,S.Q2.usage.color.border.strong.hovered,S.Q2.usage.color.background.subdued.default),tF=I.default.div.withConfig({componentId:"sc-20307b4-1"})(["flex-grow:1;padding:0 ",";"],S.Q2.usage.space.medium);var tM=n(431325);let t$=e=>{let{onClick:t,active:n}=e;return eW()?(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(tN,{role:"option","aria-selected":"false","data-testid":"manual-address-entry",onClick:t,active:n,children:[(0,l.jsx)(ts.Z,{"data-testid":"after-suggestion-add-icon",size:tM.J.medium,type:M.IconType.AddCircleFill,accessibilityLabel:D.ZP.t("manualAddressEntry_cta")}),(0,l.jsxs)(tF,{children:[(0,l.jsx)($.x,{textStyle:B.TextStyle.body.medium.default,children:D.ZP.t("manualAddressEntry_cta")}),(0,l.jsx)($.x,{textStyle:B.TextStyle.body.small.default,children:D.ZP.t("manualAddressEntry_description")})]}),(0,l.jsx)(ts.Z,{"data-testid":"after-suggestion-chevron-icon",size:tM.J.medium,type:M.IconType.ChevronRight,accessibilityLabel:D.ZP.t("manualAddressEntry_cta")})]})}):null};var tB=n(374897);function tz(){let e=(0,eX._)(["\n  mutation getAddressDetails($addressIdentifier: AddressIdentifier!) {\n    getAddressDetails(addressIdentifier: $addressIdentifier) {\n      address {\n        id\n        lat\n        lng\n        formattedAddress\n        streetAddress\n        locationAddress\n        subpremise\n        streetNumber\n        streetName\n        locality\n        administrativeAreaLevel1\n        administrativeAreaLevel2\n        postalCode\n        postalCodeSuffix\n        country\n        countryShortname\n        name\n        neighborhood\n        timezone\n        languageCode\n        isGeneric\n        formattedAddressShort\n        formattedAddressSegmented\n        formattedAddressSegmentedNonUserEditableFields\n        createdAt\n        sourcePlaceId\n      }\n    }\n  }\n"]);return tz=function(){return e},e}n(794304),n(498436);let tU=(0,e0.gql)(tz());function tR(){let e=(0,eX._)(["\n  query getAutocompletePredictions(\n    $inputAddress: String!\n    $lat: Float\n    $lng: Float\n    $locale: String\n    $searchRadiusMeters: Int\n    $maxResults: Int\n    $iso3166Alpha2CountryCode: String\n  ) {\n    getAutocompletePredictions(\n      inputAddress: $inputAddress\n      lat: $lat\n      lng: $lng\n      locale: $locale\n      searchRadiusMeters: $searchRadiusMeters\n      maxResults: $maxResults\n      iso3166Alpha2CountryCode: $iso3166Alpha2CountryCode\n    ) {\n      predictionsList {\n        lat\n        lng\n        formattedAddress\n        formattedAddressShort\n        formattedAddressSegmentedList\n        formattedAddressSegmentedNonUserEditableFieldsList\n        countryShortname\n        sourcePlaceId\n      }\n    }\n  }\n"]);return tR=function(){return e},e}let tq=(0,e0.gql)(tR()),tG=()=>{let e=(0,tB.x)();return{getAutocompletePredictions:t=>{let{addressInput:n}=t;return(0,T.j)("cx_storefront_hb_autocomplete_address_search",{query:n}),e.query({query:tq,variables:{inputAddress:n}}).then(e=>{var t,n;return(null==e?void 0:null===(n=e.data)||void 0===n?void 0:null===(t=n.getAutocompletePredictions)||void 0===t?void 0:t.predictionsList)||[]}).then(e=>{let t=e.map(e=>({lat:e.lat,lng:e.lng,formatted_address:e.formattedAddress,formatted_address_short:e.formattedAddressShort,formatted_address_segmented:e.formattedAddressSegmentedList||[],formatted_address_segmented_non_user_editable_fields:e.formattedAddressSegmentedNonUserEditableFieldsList||[],country_shortname:e.countryShortname,source_place_id:e.sourcePlaceId})),d=t.map(e=>e.formatted_address||"").filter(Boolean);return(0,T.j)("cx_storefront_hb_autocomplete_address_predictions",{predictions:d,count:d.length,query:n}),t}).catch(()=>((0,x.eN)({level:"error",message:"Error on Honeybee getAutocompletePredictions",request:{data:{inputAddress:n}}}),[]))},getAddressDetails:t=>e.mutate({mutation:tU,variables:{addressIdentifier:{sourcePlaceId:{source_place_id:t,_type:ef.Lfv.source_place_id_request}}}}).then(e=>{var t,n;return(null==e?void 0:null===(n=e.data)||void 0===n?void 0:null===(t=n.getAddressDetails)||void 0===t?void 0:t.address)||{}}).then(e=>({id:null==e?void 0:e.id,lat:null==e?void 0:e.lat,lng:null==e?void 0:e.lng,formatted_address:null==e?void 0:e.formattedAddress,street_address:null==e?void 0:e.streetAddress,location_address:null==e?void 0:e.locationAddress,subpremise:null==e?void 0:e.subpremise,street_number:null==e?void 0:e.streetNumber,street_name:null==e?void 0:e.streetName,locality:null==e?void 0:e.locality,administrative_area_level1:null==e?void 0:e.administrativeAreaLevel1,administrative_area_level2:null==e?void 0:e.administrativeAreaLevel2,postal_code:null==e?void 0:e.postalCode,postal_code_suffix:null==e?void 0:e.postalCodeSuffix,country:null==e?void 0:e.country,country_shortname:null==e?void 0:e.countryShortname,name:null==e?void 0:e.name,neighborhood:null==e?void 0:e.neighborhood,timezone:null==e?void 0:e.timezone,language_code:null==e?void 0:e.languageCode,is_generic:null==e?void 0:e.isGeneric,formatted_address_short:null==e?void 0:e.formattedAddressShort,formatted_address_segmented:(null==e?void 0:e.formattedAddressSegmented)||[],formatted_address_segmented_non_user_editable_fields:(null==e?void 0:e.formattedAddressSegmentedNonUserEditableFields)||[],created_at:(null==e?void 0:e.createdAt)?new Date(e.createdAt):new Date,source_place_id:null==e?void 0:e.sourcePlaceId})).catch(()=>((0,x.eN)({level:"error",message:"Error on Honeybee getAddressDetails",request:{data:{sourcePlaceId:t}}}),{}))}},tV=(0,eK.$P)(),tW=e=>{let{onSelect:t,openManualAddressEntry:n,...d}=e,{getAddressDetails:r,getAutocompletePredictions:s}=tG(),i=o.useCallback(e=>{t((0,e$.l)(e))},[t]);return(0,l.jsx)(tO.Ye,{label:D.ZP.t("addressPickerStrings_addressStreetAddress"),placeholder:D.ZP.t("addressPickerStrings_addressEnterAddressSF"),addressService:{getAddressDetails:r,getAddressAutocompletePredictions:s},onSelect:i,onChange:tV,showStreetAddressOnly:!1,iconProps:{type:M.IconType.LocationPinEnabledFill,size:tM.J.medium},suggestionsMatchWidth:!0,manualEntryCTAComp:e=>(0,l.jsx)(t$,{onClick:n,active:e}),manualEntryCTAOnClick:n,...d})},tQ=e=>{let{formatted_address_non_editable_line_one:t,formatted_address_non_editable_line_two:n,lat:d,lng:r,geo_address_id:s,subpremise:i,manualLat:l,manualLng:a}=e;return{city:"",state:"",street:"",shortname:t,printableAddress:"".concat(t,", ").concat(n),zipCode:"",googlePlaceId:"",lat:d,lng:r,addressId:s,subpremise:i,manualLat:l,manualLng:a}},tK=e=>({candidate_token:e.candidateToken,lat:e.lat,lng:e.lng,formatted_address_non_editable_line_one:e.formattedAddressNonEditableLineOne,formatted_address_non_editable_line_two:e.formattedAddressNonEditableLineTwo,formatted_address_line_one:e.formattedAddressLineOne,formatted_address_line_two:e.formattedAddressLineTwo,map_vendor_for_address_display:e.mapVendorForAddressDisplay}),tH=e=>{var t,n,d,r,s;let i=e.dropoffPreferences.map(e=>{var t,n,d;return{instructions:null!==(t=null==e?void 0:e.instructions)&&void 0!==t?t:null,is_default:null!==(n=null==e?void 0:e.isDefault)&&void 0!==n?n:null,option_id:null!==(d=null==e?void 0:e.optionId)&&void 0!==d?d:null}}),l={name:null===(t=e.labelInfo)||void 0===t?void 0:t.name,icon:null!==(r=null===(d=e.labelInfo)||void 0===d?void 0:null===(n=d.icon)||void 0===n?void 0:n.labelIcon)&&void 0!==r?r:"LABEL_ICON_TYPE_PIN"};return{geo_address_id:e.geoAddressId,formatted_address_non_editable_line_one:e.formattedAddressNonEditableLineOne,formatted_address_non_editable_line_two:e.formattedAddressNonEditableLineTwo,country_code:e.countryCode,lat:e.lat,lng:e.lng,dropoff_preferences:i,label_info:l,is_saved:e.isSaved,overrides:null!==(s=e.overrides)&&void 0!==s?s:{}}};var tY=n(437712);let tJ=I.default.div.withConfig({componentId:"sc-f67d87d-0"})(["margin:calc(-1 * ",");"],S.Q2.usage.space.medium);function tX(){let e=(0,eX._)(["\n  query findManualAddressEntryCandidate(\n    $streetAddress: String!\n    $locality: String!\n    $adminLevel1: String!\n    $postalCode: String!\n    $countryCode: String!\n    $supportedMapVendors: [SupportedMapVendors!]!\n  ) {\n    findManualAddressEntryCandidate(\n      streetAddress: $streetAddress\n      locality: $locality\n      adminLevel1: $adminLevel1\n      postalCode: $postalCode\n      countryCode: $countryCode\n      supportedMapVendors: $supportedMapVendors\n    ) {\n      candidateToken\n      formattedAddressLineOne\n      formattedAddressLineTwo\n      formattedAddressNonEditableLineOne\n      formattedAddressNonEditableLineTwo\n      lat\n      lng\n      mapVendorForAddressDisplay\n    }\n  }\n"]);return tX=function(){return e},e}let t0=(0,e0.gql)(tX());function t1(){let e=(0,eX._)(["\n  mutation saveAddressesManualEntryCandidate(\n    $candidateToken: String!\n    $manualLat: Float\n    $manualLng: Float\n    $consumerId: String\n  ) {\n    saveManualAddressEntryCandidate(\n      candidateToken: $candidateToken\n      manualLat: $manualLat\n      manualLng: $manualLng\n      consumerId: $consumerId\n    ) {\n      buildingName\n      consumerAddressLinkId\n      countryCode\n      dropoffPreferences {\n        instructions\n        isDefault\n        optionId\n      }\n      entryCode\n      formattedAddressNonEditableLineOne\n      formattedAddressNonEditableLineTwo\n      geoAddressId\n      isSaved\n      labelInfo {\n        icon {\n          labelIcon\n          labelName\n        }\n        name\n      }\n      lat\n      lng\n      overrides {\n        dataSource\n        lat\n        lng\n        subpremise\n      }\n      subpremise\n    }\n  }\n"]);return t1=function(){return e},e}let t9=(0,e0.gql)(t1()),t3=()=>{let{consumer:e}=(0,tj.R)(),t=(0,tB.x)();return{getAddressesManualEntryCandidate:async e=>t.query({query:t0,variables:{...e,supportedMapVendors:[ef.dYw.GOOGLE]}}).then(e=>{let{data:t}=e,n=null==t?void 0:t.findManualAddressEntryCandidate;if(!n)throw Error("no data for getAddressesManualEntryCandidate");return tK(n)}).catch(e=>{var t;throw(0,x.eN)({level:"error",message:null!==(t=e.message)&&void 0!==t?t:"Error on Address Experience Service getAddressesManualEntryCandidate"}),e}),saveAddressesManualEntryCandidate:async n=>{let d={candidateToken:n.candidateToken,manualLat:n.location.latitude,manualLng:n.location.longitude,consumerId:null==e?void 0:e.id};return t.mutate({mutation:t9,variables:d}).then(e=>{let{data:t}=e,n=null==t?void 0:t.saveManualAddressEntryCandidate;if(!n)throw Error("no data for saveAddressesManualEntryCandidate");return tH(n)}).catch(e=>{var t;throw(0,x.eN)({level:"error",message:null!==(t=e.message)&&void 0!==t?t:"Error on Address Experience Service saveAddressesManualEntryCandidate"}),e})}}};var t6=n(823302);let t2=e=>{var t,n,d,r,s,i,a,u,c,f;let m,{asModal:p,entryPoint:v,onClose:h,onSelect:b}=e,A=(0,t6.qr)(e=>e.pageType),y=t3(),{businessInformation:_}=o.useContext(tY.Z),{themingOverridesParams:{customTheme:S}}=_,{storeInformation:x}=(0,e4.TX)(),C=null!==(t=null==x?void 0:x.themingOverridesV8)&&void 0!==t?t:{},P=o.useCallback(e=>{b(tQ(e)),h()},[b,h]),I=(0,q.KE)(),j=(0,eF.t)();S?m={comp:{color:{button:{primary:{background:{default:null!==(u=null==S?void 0:null===(d=S.colors)||void 0===d?void 0:null===(n=d.base)||void 0===n?void 0:n.brandSecondary)&&void 0!==u?u:void 0,hovered:null!==(c=null==S?void 0:null===(s=S.colors)||void 0===s?void 0:null===(r=s.derived)||void 0===r?void 0:r.lightBrandSecondary)&&void 0!==c?c:void 0,pressed:null!==(f=null==S?void 0:null===(a=S.colors)||void 0===a?void 0:null===(i=a.derived)||void 0===i?void 0:i.lightBrandSecondary)&&void 0!==f?f:void 0}}}}}}:C&&(m=C);let E=(0,l.jsx)(et.iS,{overrides:m,children:(0,l.jsx)(eO.ZP,{addressEntryPoint:null!=v?v:A,initialCountryCode:j,loading:!1,addressExperienceServiceProvider:y,ManualAddressFormContainer:tJ,ManualAddressConfirmationContainer:tJ,labelConfigs:I,onConfirmDropoffLocation:P,onBack:h,trackingEvents:eN.EK})});return p?(0,l.jsx)(g.Z,{"data-testid":"autocomplete-manual-address-modal",isOpen:!0,onClose:h,title:D.ZP.t("addressPickerStrings_changeAddress"),children:E}):(0,l.jsx)(l.Fragment,{children:E})};var t7=n(752664);(r=i||(i={})).Default="Default",r.Edit="Edit";var t4=(0,ez.zH)(e=>{var t,n;let{addressEntryPoint:d,onCompleted:r,onAddAddress:s,availableAddresses:i,onUpdateAddress:g,onSelectAddress:v,dropoffOptions:h,loading:b,isStaticPositionSuggestions:A,hideAddressList:y,selectedAddressId:S,onRemoveAddress:x,isLiteGuest:C,isGuest:I,renderBeforeAddressList:j,customizations:L,defaultAddress:T,handleIdentityLinkClick:N,showIdentityLink:F=!0,setIsEditTitle:M}=e,$=eV(),B="".concat(d,"/StorefrontAddressPicker"),{push:U}=(0,eY.tv)(),{isStorefront:R}=(0,a.Z)(),{storeInformation:G}=o.useContext(e4.ZP),V=(null==G?void 0:G.businessId)||"",[W,K]=o.useState(),[H,Y]=o.useState(S),[J,X]=o.useState((null==W?void 0:W.subpremise)||""),[ee,et]=o.useState(""),en=(0,eu.y)(ec.pc.sfBusinessGroupStorePickerForPickup,!1),ed=(0,eu.y)(ec.pc.businessGroupStorePicker,!1)||en,er=(0,eK.H3)(),{isMxWebsite:es}=(0,tv.E)(),[ea,eo]=e2(),[ef,eg,em]=function(e){let[t,{data:n,loading:d}]=(0,e7.t)(e6,{onCompleted:void 0});return[t,n,d]}(),ep=ed?null==eg?void 0:eg.deliverability:null==eo?void 0:null===(t=eo.data)||void 0===t?void 0:t.deliverability,ev=ed?em:null==eo?void 0:eo.loading,[eb,eA]=o.useState("Default"),{isMobileTablet:ey}=(0,el.ac)(),e_=o.useCallback(e=>{let t={lat:null==e?void 0:e.lat,lng:null==e?void 0:e.lng};ed?ef({variables:{...t,businessGroupId:(null==G?void 0:G.businessGroupId)||""}}):ea({variables:{...t,businessId:V}})},[ea,ef,V,null==G?void 0:G.businessGroupId,ed]),{renderAutocompleteSuggestionsInAnchoredLayer:eS=!1,hideAutoCompleteLabel:ex}=L||{},eC=e=>{X(e),S&&Y(""),W&&K({...W,subpremise:e})},eP=o.useCallback(e=>P()(i).find(t=>e===t.id),[i]),{orderCart:eI}=(0,tZ.re)(),ej=!eI||eI&&(0,tT.ib)(eI);o.useEffect(()=>{if(H&&R){let e=eP(H);e&&e_(e)}},[H,eP,R,null==G?void 0:G.storeId,e_]);let eE=()=>R&&!!ep&&!(null==ep?void 0:ep.deliverToAddress),ek=o.useMemo(()=>{var e;return null!==(e=null==ep?void 0:ep.deliverToAddress)&&void 0!==e&&e&&(null==ep?void 0:ep.bestStoreId)!==(null==G?void 0:G.storeId)},[ep,null==G?void 0:G.storeId]),eL=o.useMemo(()=>er||es?ek&&!ej:ek,[ek,er,ej,es]),eZ=(null==ep?void 0:ep.bestStoreId)||"",ew=es?(0,eK.Ub)(eZ):"/store/".concat(eZ,"/"),eD=e=>{et(""),K(e),(0,eh.zj)(),w.Qh(B),R&&(Y(""),e_(e))},eT=e=>{let{subpremise:t,driverInstructions:n,dropoffOptionId:d,manualLat:r,manualLng:i}=e;if(W&&!(0,q.Uq)(W)){let e=R&&ek;return tf(e),s({...W,subpremise:t,driverInstructions:n,dropoffOptionId:d,manualLat:r,manualLng:i},e).then(()=>{if(e){tc();let e=eH(ew);eA("Default"),null==M||M(!1),U(e)}})}},eO=e=>{let{subpremise:t,driverInstructions:n,dropoffOptionId:d,addressId:r,manualLat:s,manualLng:i,buildingName:l,entryCode:a}=e;return g({subpremise:t,driverInstructions:n,dropoffOptionId:d,addressId:r,manualLat:s,manualLng:i,buildingName:l,entryCode:a}).then(e=>{var t;K(void 0),eA("Default"),null==M||M(!1),(0,eh.Hz)({addressId:r,dropoffOptionId:d,manualLat:s,manualLng:i,addressEntryPoint:B,addressToUpdate:T,editResponse:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.editConsumerAddressV2})}).catch(()=>{(0,eh.a5)({addressId:r,dropoffOptionId:d,manualLat:s,manualLng:i,addressEntryPoint:B,addressToUpdate:T,editResponse:null})})},eN=o.useCallback(e=>e===H,[H]),eF=e=>{let t=eP(e);(()=>{let n=R&&t&&ek;v(e,n).then(()=>{n&&U(eH(ew))}),H===S&&!n&&r&&r({...t,submarket:null})})()},[eM,e$]=o.useState(!1),eB=o.useCallback(()=>{e$(!1)},[]),ez=o.useCallback(()=>{e$(!0)},[]);if("Edit"===eb&&W){let e;return e=(0,q.Uq)(W)?{dropoffPreferences:W.dropoffPreferences.allPreferences,address:eP(null==W?void 0:W.id)||W}:{dropoffPreferences:[],address:W},(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(u.Z,{isVisible:b,type:c.j.loading,children:(0,l.jsx)(f.Z,{children:(0,l.jsx)(Z.n,{address:(0,q.Uq)(W)?W:void 0,children:(0,l.jsx)(tD,{saveButtonText:H&&ek?D.ZP.t("addressPickerStrings_saveAndSwitchButton"):"",subpremise:(null==W?void 0:W.subpremise)||J,printableAddress:null==W?void 0:W.printableAddress,onCancel:e=>{e.nativeEvent.stopImmediatePropagation(),K(void 0),eA("Default"),null==M||M(!1)},onAddressEdit:()=>{tg(),eA("Default"),null==M||M(!1)},dropoffOptions:h,handleSubmitNewAddress:e=>{let{subpremise:t,driverInstructions:n,dropoffOptionId:d,manualLat:r,manualLng:s}=e;if(W&&!(0,q.Uq)(W))return eT({subpremise:t,driverInstructions:n,dropoffOptionId:d,manualLat:r,manualLng:s})},handleSubmitEditAddress:e=>{let{subpremise:t,driverInstructions:n,dropoffOptionId:d,addressId:r,manualLat:s,manualLng:i}=e;return eO({subpremise:t,driverInstructions:n,dropoffOptionId:d,addressId:r,manualLat:s,manualLng:i})},handleSubmitPinUpdate:(e,t,n)=>g({subpremise:null,driverInstructions:null,dropoffOptionId:void 0,addressId:e,manualLat:t,manualLng:n}),shortname:(null==W?void 0:W.shortname)||"",...e,customizations:L})})})})})}let eU=R?D.ZP.t("addressPickerStrings_apartmentInput_label"):D.ZP.t("addressPickerStrings_apartmentInputTextPlaceholder");return eM?(0,l.jsx)(t2,{asModal:!0,onClose:eB,onSelect:eD}):(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(u.Z,{"data-anchor-id":z.ep.AddressContainer,isVisible:ev||b,type:c.j.loading,children:[eE()&&(0,l.jsx)(tp,{addressEntryPoint:d}),eL&&(0,l.jsx)(th,{}),(0,l.jsxs)(Q.Zd,{children:[(0,l.jsx)(f.Z,{children:$?(0,l.jsx)(tW,{initialInputValue:(null==W?void 0:W.printableAddress)||"",onSelect:eD,openManualAddressEntry:ez,entityId:t7.Z.storefrontEntityId}):(0,l.jsx)(O.Z,{label:D.ZP.t("addressPickerStrings_addressStreetAddress"),isLabelHidden:ex,placeholder:D.ZP.t("addressPickerStrings_addressEnterAddress"),initialInputValue:(null==W?void 0:W.printableAddress)||"",isStaticPositionSuggestions:A,onSelect:eD,error:ee,renderSuggestionsInAnchoredLayer:eS})}),F&&(0,l.jsx)(k.bb,{handleIdentityLinkClick:N,isGuest:I,entry:E.KP.APP}),(0,l.jsx)(f.Z,{children:(0,l.jsx)(eq.Z,{value:null!==(n=null==W?void 0:W.subpremise)&&void 0!==n?n:J,size:m.J9.medium,onChange:e=>eC(e),placeholder:D.ZP.t("addressPickerStrings_apartmentInput_placeholder"),label:eU,description:D.ZP.t("addressPickerStrings_OptionalLabel"),isLabelHidden:!1})})]}),y?null:(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(_.Z,{type:eG.C.fullBorder}),!!(null==i?void 0:i.length)&&(null==j?void 0:j()),(0,l.jsx)(ei,{availableAddresses:i,defaultAddressId:H,onEdit:e=>{K(eP(e)),eA("Edit"),(0,eh.gC)(),null==M||M(!0)},onSelect:e=>{ti(),K(void 0),et(""),Y(e)},onRemove:x,isLiteGuest:C,isAddressLabelEnabled:!1,getIsRecentAddressSelected:eN})]}),(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(_.Z,{type:eG.C.fullBorder}),(0,l.jsx)(Q.qO,{children:(0,l.jsx)(p.Z,{"data-anchor-id":z.ep.AddressNextButton,isInline:!ey,onClick:H?()=>eF(H):()=>{if(!H&&!W){et(D.ZP.t("addressPickerStrings_addressRequiredLabel"));return}if(W&&eE()&&et(D.ZP.t("addressPickerStrings_addressOutsideDeliveryZoneLabel")),!eE()){tu({isExistingAddress:!!H,isSubpremisePresent:!!(null==W?void 0:W.subpremise)||!!J}),eA("Edit"),null==M||M(!0),et("");return}},children:H?ek?D.ZP.t("addressPickerStrings_saveAndSwitchButton"):D.ZP.t("addressPickerStrings_addressAddSaveButtonText"):D.ZP.t("addressPickerStrings_addressAddNextButtonText")})})]})]})})},{name:"StorefrontAddressPicker "}),t5=n(336279),t8=n(277616),ne=n(119245),nt=n(718394),nn=n(910049),nd=n(861332),nr=e=>{var t;let{addressEntryPoint:n,consumer:d,addressAutocompleteLabel:r,hideAddressList:s,isStaticPositionSuggestions:i,refetchQueries:u,awaitRefetchQueries:c,awaitDefaultAddressRefetchQueries:f,onChange:g,renderBeforeAddressList:m,customizations:p,renderFooterActions:v,handleIdentityLinkClick:h,placeholder:b,showIdentityLink:A=!0,setIsEditTitle:y,setSelectedAddress:_,loading:S,selectedAddressLabelName:x,isCurrentLocationEnabled:C=!1,isCurrentLocationSelected:P=!1,onClickCurrentLocation:I,onCompleteRemoveAddress:j,onSetLabelForAddressComplete:E,onCloseAddressEdit:k,onShowPinCodeEducationModal:L,doNotShowPinCodeWarningBanner:Z}=e,w="".concat(n,"/AddressPickerConnected"),{isStorefront:D}=(0,a.Z)(),{orderCart:T}=o.useContext(ne.i),{updateConsumerDefaultAddress:O,res:N}=(0,nd.Z)({refetchQueries:u,awaitRefetchQueries:f,addressEntryPoint:w,onCompleted:g}),{addConsumerAddress:F,res:M}=(0,nn.U)({addressEntryPoint:w,refetchQueries:u,awaitRefetchQueries:c,onCompleted:g}),{editAddress:$,res:{loading:B}}=(0,nt.c)(),{removeAddress:z,res:U}=(0,t5.m)(j),R=d.defaultAddress||{},q=(0,t8.l)(T.id,R),G=q.loading||q.error?[]:q.dropoffOptions,V=(null==d?void 0:d.availableAddresses)||[],W=(null==d?void 0:null===(t=d.defaultAddress)||void 0===t?void 0:t.id)||"",{isGuest:Q,isLiteGuest:K}=function(e){let t=!!e&&null===e.email;return{isGuest:!!e&&!!e.isGuest,isLiteGuest:!!e&&!!e.isGuest&&!!t}}(d),H=S||N.loading||U.loading||M.loading||B;return D?(0,l.jsx)(t4,{handleIdentityLinkClick:h,addressEntryPoint:w,onCompleted:g,availableAddresses:V,selectedAddressId:W,dropoffOptions:G,loading:H,onSelectAddress:O,onRemoveAddress:z,onAddAddress:F,onUpdateAddress:$,addressAutocompleteLabel:r,hideAddressList:s,isStaticPositionSuggestions:i,isLiteGuest:K,isGuest:Q,renderBeforeAddressList:m,customizations:p,defaultAddress:d.defaultAddress,showIdentityLink:A,setIsEditTitle:y}):(0,l.jsx)(eR,{addressEntryPoint:w,renderFooterActions:v,availableAddresses:V,labeledAddresses:[],defaultAddressId:W,dropoffOptions:G,loading:H,onSelectAddress:O,onRemoveAddress:z,onAddAddress:F,onUpdateAddress:$,addressAutocompleteLabel:r,hideAddressList:s,isStaticPositionSuggestions:i,isLiteGuest:K,isGuest:Q,renderBeforeAddressList:m,customizations:p,handleIdentityLinkClick:h,defaultAddress:d.defaultAddress,placeholder:b,showIdentityLink:A,setIsEditTitle:y,setSelectedAddress:_,selectedAddressLabelName:x,isCurrentLocationEnabled:C,isCurrentLocationSelected:P,onClickCurrentLocation:I,refetchQueries:u,onSetLabelForAddressComplete:E,onCloseAddressEdit:k,onShowPinCodeEducationModal:L,doNotShowPinCodeWarningBanner:Z})}},997341:function(e,t,n){n.d(t,{Bi:function(){return o},Hz:function(){return c},a5:function(){return f},gC:function(){return i},iZ:function(){return l},pW:function(){return a},zj:function(){return s.zj}});var d=n(455639),r=n(360968),s=n(6383);let i=()=>{(0,d.j)(r.wd.ClickedEditAddress,{entry:r.kS.AddressPicker})},l=e=>(0,d.j)(r.wd.GetLocationButtonClick,{use_case:null!=e?e:""}),a=e=>(0,d.j)(r.wd.AddressBarSubmitButtonClick,{use_case:null!=e?e:""}),o=e=>(0,d.j)(r.wd.AddressBarGeoSuggestionDropdownSelect,{use_case:null!=e?e:""}),u=e=>t=>{let{addressId:n,addressEntryPoint:s,addressToUpdate:i,editResponse:l,dropoffOptionId:a,manualLat:o,manualLng:u}=t;(0,d.j)(e,{entry:r.kS.AddressPicker,dropoff_option_id:a,address_id:n,pin_lat:o,pin_lng:u}),(0,d.j)("debug_address_modify",{address_entry_point:s,...m(i),...g(l)})},c=u(r.wd.SubmittedAddressEdits),f=u(r.wd.AddressEditSubmitError),g=e=>{var t;if(!e)return{};let{defaultAddress:n,availableAddresses:d}=e,r=null==n?void 0:n.dropoffPreferences.allPreferences.find(e=>e.isDefault);return{edited_address_id:null==n?void 0:n.id,edited_address_dropoffPreference:null==r?void 0:r.optionId,edited_address_instructions:null==n?void 0:n.driverInstructions,edited_address_latitude:null==n?void 0:n.lat,edited_address_longitude:null==n?void 0:n.lng,edited_address_manual_latitude:null==n?void 0:n.manualLat,edited_address_manual_longitude:null==n?void 0:n.manualLng,edited_address_subpremise:null==n?void 0:n.subpremise,edited_available_addresses:JSON.stringify(null==d?void 0:d.map(e=>null==e?void 0:e.id)),edited_address_label_name:null==n?void 0:null===(t=n.personalAddressLabel)||void 0===t?void 0:t.labelName}},m=e=>{if(!e)return{};let t=null==e?void 0:e.dropoffPreferences.allPreferences.find(e=>e.isDefault),{id:n,driverInstructions:d,lat:r,lng:s,manualLat:i,manualLng:l,street:a,subpremise:o,city:u,state:c,zipCode:f,country:g,personalAddressLabel:m}=e;return{previous_address_id:n,previous_address_dropoffPreference:null==t?void 0:t.optionId,previous_address_instructions:d,previous_address_latitude:r,previous_address_locality_line:"".concat(u,", ").concat(c," ").concat(f,", ").concat(g),previous_address_longitude:s,previous_address_manual_latitude:i,previous_address_manual_longitude:l,previous_address_street_line:"".concat(a,", ").concat(o),previous_address_subpremise:o,previous_address_label_name:null==m?void 0:m.labelName,previous_address_label_icon:null==m?void 0:m.labelIcon}}},99060:function(e,t,n){var d=n(361967),r=n(232755),s=n(509300),i=n(190510),l=n(549736),a=n(902093),o=n(560930),u=n(655914),c=n(132655),f=n(313773),g=n(469894),m=n(703376),p=n(195650),v=n(731690),h=n(518766),b=n(994084),A=n(712504);let y=(0,g.default)(()=>Promise.all([n.e(1042),n.e(8334),n.e(60638)]).then(n.bind(n,332350)),{loadableGenerated:{webpack:()=>[332350]},ssr:!1}),_=(e,t)=>t.lat!==e.lat||t.lng!==e.lng;t.Z=e=>{let{address:t,handleChangePinLocation:n,draftCoordinates:g,errorMessage:S,onCancel:x,onSubmit:C,hideTitle:P=!1,shouldStackActionButtons:I,hideActionButtons:j=!1}=e,{isAdjustPinReadjustmentEnabled:E}=(0,A.Z)(),[k]=f.useState({lat:g.lat,lng:g.lng}),{grantedGeolocationPermission:L,updateCurrentPosition:Z}=(0,m.Z)();f.useEffect(()=>{(0,b.oT)()},[]),f.useEffect(()=>{L&&Z()},[L,Z]);let w=e=>{e.nativeEvent.stopImmediatePropagation(),_(k,g)?null==C||C(g):null==x||x(e)};return(0,d.jsxs)(r.Z,{children:[!P&&(0,d.jsx)(o.x,{as:h.$h.H2,textStyle:u.TextStyle.display.medium,children:v.ZP.t("addressPickerStrings_addressEditAdjustPin")}),(0,d.jsx)(c.Z,{setContainerAsAnchor:!0,children:(0,d.jsx)(y,{defaultAddress:t,isEditing:!0,isCompact:!1,onChange:n,locationOverride:g,allowDifferentMapProvider:!0,isTooltipVisible:E,isMapCircleVisible:E})}),S&&(0,d.jsx)(p.Z,{children:S}),!j&&(I?(0,d.jsxs)(r.Z,{size:s.Uo.xSmall,children:[(0,d.jsx)(i.Z,{onClick:w,children:v.ZP.t("addressPickerStrings_addressEditSave")}),(0,d.jsx)(i.Z,{onClick:x,type:l.L$.tertiary,children:v.ZP.t("addressPickerStrings_addressEditCancel")})]}):(0,d.jsxs)(a.Z,{children:[(0,d.jsx)(i.Z,{onClick:x,type:l.L$.tertiary,children:v.ZP.t("addressPickerStrings_addressEditCancel")}),(0,d.jsx)(i.Z,{onClick:w,children:v.ZP.t("addressPickerStrings_addressEditSave")})]}))]})}},195650:function(e,t,n){n.d(t,{Z:function(){return v}});var d=n(361967);n(313773);var r=n(918564),s=n(159967);let i=r.default.div.withConfig({componentId:"sc-51a246f5-0"})(["background-color:",";"],s.Q2.usage.color.negative.subdued.default);var l=n(918821),a=n(902093),o=n(22649),u=n(509300),c=n(645827),f=n(484497),g=n(560930),m=n(655914),p=n(284308),v=e=>(0,d.jsx)(i,{"data-testid":"AddressPickerErrorBanner",children:(0,d.jsx)(l.Z,{children:(0,d.jsxs)(a.Z,{alignItems:o.v2.center,size:u.O8.small,children:[(0,d.jsx)(c.Z,{type:f.IconType.ErrorFill,color:f.EY.negative.strong.default,accessibilityLabel:"Error Icon"}),(0,d.jsx)(p.I,{error:e.children,children:(0,d.jsx)(g.x,{textStyle:m.TextStyle.label.small.default,children:e.children})})]})})})},278728:function(e,t,n){var d=n(361967),r=n(403721),s=n(902093),i=n(22649),l=n(509300),a=n(645827),o=n(484497),u=n(232755),c=n(560930),f=n(655914),g=n(374856),m=n(731690);n(313773),t.Z=e=>{let{active:t}=e;return(0,d.jsxs)(r.FR,{"data-testid":g.D.ManualAddressEntryButton,active:t,children:[(0,d.jsxs)(s.Z,{alignItems:i.v2.center,size:l.O8.small,children:[(0,d.jsx)(a.Z,{type:o.IconType.AddCircleFill}),(0,d.jsxs)(u.Z,{size:l.Uo.xxxSmall,children:[(0,d.jsx)(c.x,{textStyle:f.TextStyle.body.medium.default,children:m.ZP.t("manualAddressEntry_cta")}),(0,d.jsx)(c.x,{textStyle:f.TextStyle.body.small.default,weight:f.fs.light,children:m.ZP.t("manualAddressEntry_description")})]})]}),(0,d.jsx)(a.Z,{type:o.IconType.ChevronRight})]})}},498777:function(e,t,n){n.d(t,{R:function(){return l},m:function(){return i}});var d=n(361967),r=n(313773);let s=r.createContext(void 0),i=e=>{let{mode:t,setMode:n,useDraftAddressFromModal:r,draftAddress:i,editFormError:l,setDraftAddress:a,setEditFormError:o,children:u}=e;return(0,d.jsx)(s.Provider,{value:{mode:t,setMode:n,useDraftAddressFromModal:r,draftAddress:i,setDraftAddress:a,editFormError:l,setEditFormError:o},children:u})},l=()=>r.useContext(s)},488954:function(e,t,n){var d=n(361967),r=n(299891),s=n(74152),i=n(802736),l=n(262679);n(313773);var a=n(649454),o=n(504253),u=n(861264),c=n(480704),f=n(336279),g=n(85890),m=n(498777),p=n(521384),v=n(607738);let h=[g.A.Edit,g.A.ChangePin];t.Z=e=>{let{addressEntryPoint:t,title:n,address:b,dropoffOptions:A,onClose:y,dropoffPreferences:_,defaultAddressId:S,driverInstructions:x,customizations:C,refetchQueries:P,testId:I,onCloseAddressEdit:j,onShowPinCodeEducationModal:E,doNotShowPinCodeWarningBanner:k,shouldSkipValidateAddress:L=!1}=e,Z="".concat(t,"/EditAddressModal"),{isStorefront:w}=(0,r.Z)(),{mode:D,setMode:T,draftAddress:O,setDraftAddress:N,editFormError:F,setEditFormError:M,saveAddress:$,saveChangePin:B,loading:z}=(0,p.p)({defaultMode:g.A.Edit,addressEntryPoint:Z,addAddressMutationProps:{addressEntryPoint:Z,refetchQueries:P},onEditAddressCompleted:()=>{N(void 0),null==y||y()}}),{removeAddress:U}=(0,f.m)(),R=()=>{D===g.A.ChangePin&&O&&N({...O,draftCoordinates:null}),T(g.A.Edit),M(null)},q=()=>D===g.A.ChangePin?R():null==y?void 0:y(),G=!(w||!h.includes(D)||!b);return(0,d.jsx)(s.Z,{isOpen:G,"data-testid":I,title:n,hasCloseButton:!0,onClose:q,size:i.C.small,renderFooterContent:(0,v.uW)({isAddressLabelEnabled:!0,loading:z,mode:D,error:(0,u.Yg)(F)?null:F,onCancel:q,onSave:()=>{D===g.A.ChangePin?B():D===g.A.Edit&&$()}}),children:(0,d.jsx)(m.m,{mode:D,setMode:T,useDraftAddressFromModal:!0,draftAddress:O,setDraftAddress:N,editFormError:F,setEditFormError:M,children:(0,d.jsx)(a.n,{skip:L,address:(0,c.aN)(b)?void 0:b,googlePlaceId:(0,c.aN)(b)?b.googlePlaceId:void 0,addressId:(0,c.aN)(b)?b.addressId:void 0,children:(0,d.jsx)(o.Z,{dropoffPreferences:_,dropoffOptions:A,driverInstructions:x,address:b,hideAdjustPin:null==C?void 0:C.hideAdjustPin,hideDropOffOptions:null==C?void 0:C.hideDropOffOptions,handleRemoveAddress:e=>{e?U(e):(0,l.eN)({level:"warning",message:"Trying to remove an address without id"})},defaultAddressId:S,onCloseOfAddressEdit:j,onShowPinCodeEducationModal:E,doNotShowPinCodeWarningBanner:k})})})})}},521384:function(e,t,n){n.d(t,{p:function(){return m}});var d=n(313773),r=n(278884),s=n(731690),i=n(148632),l=n(861264),a=n(997341),o=n(480704),u=n(718394),c=n(85890),f=n(994084),g=n(910049);function m(e){let{defaultMode:t,addressEntryPoint:n,addAddressMutationProps:m,onEditAddressCompleted:p}=e,v=null!=t?t:c.A.Default,[h,b]=(0,d.useState)(v),[A,y]=(0,d.useState)(),[_,S]=(0,d.useState)(null),x=(0,d.useCallback)(()=>{y(void 0),S(null),b(v)},[v]),{saveAddress:C,loading:P}=function(e){let{addressEntryPoint:t,addAddressMutationProps:n,draftAddress:d,clearStates:s,setEditFormError:c,onEditAddressCompleted:m}=e,{addConsumerAddress:p,res:{loading:v}}=(0,g.U)(n),{editAddress:h,res:{loading:b}}=(0,u.c)(),{consumer:A}=(0,r.R)(),y=e=>{var t;let{manualLat:n,manualLng:d}=(0,o.Yt)(e.draftCoordinates),r={manualLat:n,manualLng:d,lat:e.lat,lng:e.lng,dropoffOptionId:e.dropoffOptionId};return p({lat:e.lat,lng:e.lng,city:e.city,state:e.state,zipCode:e.zipCode,printableAddress:e.printableAddress,shortname:e.shortname,googlePlaceId:e.googlePlaceId,subpremise:e.subpremise,driverInstructions:e.driverInstructions,dropoffOptionId:e.dropoffOptionId,addressLinkType:e.addressLinkType,buildingName:e.buildingName,entryCode:e.entryCode,manualLat:n,manualLng:d,personalAddressLabel:{labelName:null===(t=e.personalAddressLabel)||void 0===t?void 0:t.labelName}}).then(()=>{(0,i.KS)(r),n&&d&&(0,f.$g)({original_lat:r.lat,original_lng:r.lng,pin_lat:n,pin_lng:d}),c(null),s()}).catch(e=>{c((0,l.Au)(e)),(0,i.hJ)(r),n&&d&&(0,l.NC)(e)&&(0,f.ij)({original_lat:r.lat,original_lng:r.lng,pin_lat:n,pin_lng:d})})},_=e=>{var n;let{manualLat:d,manualLng:r}=(0,o.Yt)(e.draftCoordinates),i={addressId:e.id,dropoffOptionId:e.dropoffOptionId,manualLat:d,manualLng:r,addressEntryPoint:t,addressToUpdate:A.defaultAddress};return c(null),h({subpremise:e.subpremise,driverInstructions:e.driverInstructions,dropoffOptionId:e.dropoffOptionId,addressLinkType:e.addressLinkType,entryCode:e.entryCode,buildingName:e.buildingName,manualLat:d,manualLng:r,personalAddressLabel:{labelName:null===(n=e.personalAddressLabel)||void 0===n?void 0:n.labelName},addressId:e.id}).then(e=>{var t;m(),(0,a.Hz)({...i,editResponse:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.editConsumerAddressV2}),s()}).catch(t=>{(0,a.a5)({...i,editResponse:null});let n=(0,l.Au)(t);d&&r&&(0,l.NC)(t)&&(0,f.ij)({original_lat:null==e?void 0:e.lat,original_lng:null==e?void 0:e.lng,pin_lat:d,pin_lng:r}),c(n)})};return{loading:v||b,saveAddress:()=>{d&&((0,o.aN)(d)?y(d):_(d))}}}({addressEntryPoint:n,addAddressMutationProps:m,setEditFormError:S,onEditAddressCompleted:p,draftAddress:A,clearStates:x});return{mode:h,setMode:b,draftAddress:A,setDraftAddress:y,editFormError:_,setEditFormError:S,saveAddress:C,saveChangePin:()=>{let{draftCoordinates:e}=null!=A?A:{};A&&(e?(0,o.ng)(e,A)?(y(t=>t?{...t,manualLat:e.lat,manualLng:e.lng}:void 0),b(c.A.Edit),S(null)):(y(e=>e?{...e,manualLat:null,manualLng:null}:void 0),S(s.ZP.t("addressPickerStrings_addressEditPinLocationError"))):S(s.ZP.t("addressPickerStrings_addressEditPinLocationNoChange")))},loading:P}}},607738:function(e,t,n){n.d(t,{g7:function(){return O},OH:function(){return w},HA:function(){return N},uW:function(){return T}});var d=n(361967);n(313773);var r=n(731690),s=n(85890),i=n(232755),l=n(509300),a=n(190510),o=n(549736),u=n(117874),c=n(902093),f=n(22649),g=n(918564),m=n(249478),p=n(195650),v=n(374856);let h=(0,g.default)(i.Z).attrs(()=>({size:l.Uo.xSmall})).withConfig({componentId:"sc-64c1bd5-0"})(["flex:1;"]);var b=e=>{let{formError:t,loading:n,mode:g,onCancel:b,onSave:A}=e,{isMobile:y}=(0,m.ac)(),_=g===s.A.ChangePin,S=(0,d.jsx)(a.Z,{isInline:!_&&!y,type:_?o.L$.tertiary:o.L$.plain,onClick:b,isDisabled:n,"data-testid":v.D.AddressModalFooterCancelButton,size:y?u.qE.large:u.qE.medium,children:r.ZP.t("addressPickerStrings_addressEditCancel")}),x=(0,d.jsx)(a.Z,{isInline:!_&&!y,onClick:A,state:n?o.BN.loading:o.BN.default,"data-testid":v.D.AddressModalFooterSubmitButton,size:y?u.qE.large:u.qE.medium,children:_?r.ZP.t("addressPickerStrings_addressEditSave"):r.ZP.t("address_save_address")});return(0,d.jsxs)(h,{children:[t&&(0,d.jsx)(p.Z,{children:t}),y?(0,d.jsxs)(i.Z,{size:l.Uo.xSmall,children:[x,S]}):(0,d.jsxs)(c.Z,{justifyContent:f.dy.flexEnd,size:l.O8.xSmall,children:[S,x]})]})},A=n(389016),y=n(159967),_=n(560930),S=n(655914),x=n(45918);let C=(0,g.default)(i.Z).attrs(()=>({size:l.Uo.xSmall})).withConfig({componentId:"sc-85f16b5d-0"})(["margin-left:",";"],y.Q2.usage.space.small),P=(0,g.default)(_.x).attrs(()=>({as:"h1",textStyle:S.TextStyle.display.large,color:S.d9.text.default,fontWeight:S.fs.bold})).withConfig({componentId:"sc-85f16b5d-1"})(["display:inline;"]),I=(0,g.default)(_.x).attrs(()=>({textStyle:S.TextStyle.label.medium.default,color:S.d9.text.subdued.default})).withConfig({componentId:"sc-85f16b5d-2"})(["display:inline;"]),j=g.default.div.withConfig({componentId:"sc-85f16b5d-3"})(["display:flex;align-items:center;height:100%;"]),E=(0,g.default)(_.x).attrs(()=>({textStyle:S.TextStyle.label.medium.default,color:S.d9.text.subdued.default,maxLines:1,overflow:x.lG.truncate})).withConfig({componentId:"sc-85f16b5d-4"})(["flex-shrink:0;"]),k=(0,g.default)(_.x).attrs(()=>({textStyle:S.TextStyle.label.medium.default,color:S.d9.text.default,maxLines:1,overflow:x.lG.truncate,fontWeight:S.fs.bold})).withConfig({componentId:"sc-85f16b5d-5"})(["flex-shrink:0;"]),L=g.default.div.withConfig({componentId:"sc-85f16b5d-6"})(["display:flex;flex-direction:column;> *{margin-left:",";}"],y.Q2.usage.space.xxSmall);var Z=e=>{let{menuItemName:t,menuItemImageUrl:n,title:s,subtitle:i}=e;return(0,d.jsxs)(C,{children:[(0,d.jsxs)(j,{"data-testid":v.D.AddressModalMenuItem,children:[(0,d.jsx)(A.Z,{disableMarginLeft:!0,itemNameAlt:t,imageUrl:n},v.D.AddressBarCartItemImage),(0,d.jsxs)(L,{children:[(0,d.jsx)(E,{children:r.ZP.t("addressModalStrings_menuItemHeader")}),(0,d.jsx)(k,{children:t})]})]}),(0,d.jsxs)(L,{children:[(0,d.jsx)(P,{children:s}),(0,d.jsx)(I,{children:i})]})]})};let w=e=>{let{titleProp:t,isEditTitle:n,isAddressLabelEnabled:d,mode:i,isGuest:l,selectedAddressLabelName:a}=e;if(d&&i===s.A.SetLabel&&a)return r.ZP.t("addressPickerStrings_setLabelAddress",{label:null!=a?a:""});if(d&&i===s.A.ChangePin)return r.ZP.t("addressPickerStrings_addressEditAdjustPin");if(n||i===s.A.Edit)return d?r.ZP.t("address_save_address"):r.ZP.t("address_edit_title");let o=l?r.ZP.t("layoutStrings_header_addAddress"):r.ZP.t("addressPickerStrings_addresses"),u=d?o:r.ZP.t("menu_addressDetails_enterYourDeliveryAddressText_sentenceCase");return t||u},D=[s.A.Edit,s.A.ChangePin],T=e=>{let{renderFooterContentProp:t,isAddressLabelEnabled:n,loading:r,mode:s,error:i,onCancel:l,onSave:a}=e;return t||(n&&D.includes(s)?()=>(0,d.jsx)(b,{mode:s,formError:i,loading:r,onCancel:l,onSave:a}):void 0)},O=(e,t)=>(null==t?void 0:t.isFromLabeledAddress)&&e!==s.A.SetLabel?s.A.SetLabel:e===s.A.ChangePin?s.A.Edit:s.A.Default,N=e=>{let{renderContentHeaderProp:t,menuItemName:n,menuItemImageUrl:r,title:s,subtitle:i}=e;return t||((null==n?void 0:n.length)&&(null==r?void 0:r.length)&&(null==s?void 0:s.length)&&(null==i?void 0:i.length)?()=>(0,d.jsx)(Z,{menuItemName:n,menuItemImageUrl:r,title:s,subtitle:i}):void 0)}},861332:function(e,t,n){n.d(t,{Z:function(){return p}});var d=n(979994),r=n(860413),s=n(797476),i=n(782723),l=n(702210),a=n(628763),o=n(213463),u=n(575551),c=n(822250);function f(){let e=(0,d._)(["\n  mutation updateConsumerDefaultAddressV2($defaultAddressId: ID!) {\n    updateConsumerDefaultAddressV2(defaultAddressId: $defaultAddressId) {\n      defaultAddress {\n        ...DefaultAddressFragment\n        # adding submarket fields here instead of in the above fragment for now to avoid propagating this field in more places than needed\n        submarket\n        submarketId\n      }\n      availableAddresses {\n        ...DefaultAddressFragment\n      }\n      orderCart {\n        ...ConsumerOrderCartFragment\n      }\n      ...CoreConsumerFragment\n    }\n  }\n  ","\n  ","\n  ","\n"]);return f=function(){return e},e}let g=(0,r.gql)(f(),s.q,u.h6,i.X),m=e=>"".concat(e,"/DefaultAddressMutation"),p=e=>{let{refetchQueries:t,awaitRefetchQueries:n=!1,addressEntryPoint:d,onCompleted:r}=e,s=(0,c.Y)(),[i,u]=(0,a.Z)({ethosAction:{name:o.r.UpdateConsumerAddress,type:o.Yh.TypedInput},unifiedTelemetryAction:s},g,{onCompleted:e=>{var t,n,d,s,i;null==r||r(null!==(s=null===(t=e.updateConsumerDefaultAddressV2)||void 0===t?void 0:t.defaultAddress)&&void 0!==s?s:void 0,null!==(i=null===(d=e.updateConsumerDefaultAddressV2)||void 0===d?void 0:null===(n=d.orderCart)||void 0===n?void 0:n.id)&&void 0!==i?i:"")}});return{updateConsumerDefaultAddress:function(e){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i({awaitRefetchQueries:n,refetchQueries:r?[]:t,variables:{defaultAddressId:e}}).then(t=>{var n;l.hy(m(d),e,null===(n=t.data)||void 0===n?void 0:n.updateConsumerDefaultAddressV2)})},res:u}}},718394:function(e,t,n){n.d(t,{c:function(){return p}});var d=n(979994),r=n(313773),s=n(860413),i=n(628763),l=n(822250),a=n(166120),o=n(797476),u=n(782723),c=n(186927),f=n(934015);function g(){let e=(0,d._)(["\n  mutation editConsumerAddressV2(\n    $subpremise: String\n    $driverInstructions: String\n    $dropoffOptionId: String\n    $addressId: String\n    $manualLat: Float\n    $manualLng: Float\n    $addressLinkType: AddressLinkType\n    $buildingName: String\n    $entryCode: String\n    $personalAddressLabel: PersonalAddressLabelInput\n    $returnConsumerFragment: Boolean!\n  ) {\n    editConsumerAddressV2(\n      subpremise: $subpremise\n      driverInstructions: $driverInstructions\n      dropoffOptionId: $dropoffOptionId\n      addressId: $addressId\n      manualLat: $manualLat\n      manualLng: $manualLng\n      addressLinkType: $addressLinkType\n      buildingName: $buildingName\n      entryCode: $entryCode\n      personalAddressLabel: $personalAddressLabel\n    ) {\n      defaultAddress {\n        ...DefaultAddressFragment\n      }\n      availableAddresses {\n        ...DefaultAddressFragment\n      }\n      ... @include(if: $returnConsumerFragment) {\n        ...CoreConsumerFragment\n      }\n    }\n  }\n  ","\n  ","\n"]);return g=function(){return e},e}let m=(0,s.gql)(g(),o.q,u.X),p=()=>{let{getCurrentContexts:e}=r.useContext(c.V),{address:t}=e().globalContext,n=(0,l.Y)(),[d,s]=(0,i.Z)({unifiedTelemetryAction:n},m),[o,u]=(0,f.Db)(m),{isAddressLabelEnabled:g}=(0,a.Z)();return{editAddress:e=>(null==t?void 0:t.address_id)!==void 0&&(null==t?void 0:t.address_id)===e.addressId?d({variables:{...e,returnConsumerFragment:g}}):o({variables:{...e,returnConsumerFragment:g}}),res:u||s}}},336279:function(e,t,n){n.d(t,{m:function(){return f}});var d=n(979994),r=n(860413),s=n(934015),i=n(797476),l=n(782723),a=n(455639),o=n(360968);function u(){let e=(0,d._)(["\n  mutation removeConsumerAddressV2($defaultAddressId: ID!) {\n    removeConsumerAddressV2(defaultAddressId: $defaultAddressId) {\n      defaultAddress {\n        ...DefaultAddressFragment\n      }\n      availableAddresses {\n        ...DefaultAddressFragment\n      }\n      ...CoreConsumerFragment\n    }\n  }\n  ","\n  ","\n"]);return u=function(){return e},e}let c=(0,r.gql)(u(),i.q,l.X),f=e=>{let[t,n]=(0,s.Db)(c,{onCompleted:t=>{(0,a.j)(o.wd.AddressDeleteSubmit,t),null==e||e(t)}});return{removeAddress:e=>t({variables:{defaultAddressId:e}}),res:n}}},516202:function(e,t,n){var d=n(361967),r=n(892976),s=n(613531),i=n(195482),l=n(313773),a=n(315073),o=n(278884),u=n(877e3),c=n(970501),f=n(455639),g=n(731690),m=n(357166);let p=e=>{switch(e){case c.wy1.WARNING:return{bannerType:r.$.warning};case c.wy1.ERROR:return{bannerType:r.$.negative};case c.wy1.INFO:case c.wy1.UNSPECIFIED:return{bannerType:r.$.informational}}};t.Z=e=>{let{onClick:t,showPrimaryActionButton:n=!1,orderCartId:c}=e,{consumer:v}=(0,o.R)(),{result:h,recommendedActions:b}=l.useContext(u.Z),{enableCheckoutBannerAndAdressPickerTreatment:A}=(0,m.jX)(b);return((0,a.F_)(()=>{h&&(0,f.j)("checkout_address_validation_banner_shown",{validation_result_code:h.code,cart_id:c,consumer_id:v.id,banner_type:h.type})},[h,c,v.id]),h)?(0,d.jsx)(s.Z,{children:(0,d.jsx)(i.Z,{...A?{bannerType:r.$.warning,body:g.ZP.t("seo_address_validation_banner_body")}:{...p(h.type),body:h.message},primaryAction:n?{content:g.ZP.t("addressPickerStrings_validationAddressEdit"),onClick:t}:void 0})}):null}},811094:function(e,t,n){n.d(t,{Jk:function(){return x},bb:function(){return S}});var d=n(361967),r=n(313773),s=n(455639),i=n(349210),l=n(190510),a=n(117874),o=n(484497),u=n(549736),c=n(159967),f=n(918564),g=n(539599),m=n(724590),p=n(299891),v=n(166120),h=n(493260),b=n(731690),A=n(424),y=n(818617);n(554859);let _=e=>(0,s.j)("action_address_signin_signup_".concat(e)),S=e=>{let{isGuest:t,entry:n,handleIdentityLinkClick:c,isDarkBackground:f,linkText:A}=e,[S,x]=(0,r.useState)(""),{isDoorDash:C,isCaviar:P}=(0,p.Z)(),{isAddressLabelEnabled:I}=(0,v.Z)(),{showLoginInModalExpEnabled:j,showSignInSignUpModal:E,setShowSignInSignUpModal:k,onIdentityLinkClick:L}=(0,g.Z)(),{getLoginUrl:Z}=(0,h.Yq)();(0,i.L)(()=>x(Z({nextPath:window.location.pathname+window.location.search})));let w=I?b.ZP.t("addressPickerStrings_signinForSavedAddressV2"):b.ZP.t("addressPickerStrings_signinForSavedAddress");return t&&(C||P)?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(m.L,{isOpen:E,setShowSignInSignUpModal:k,onClose:()=>k(!1)}),(0,d.jsx)(l.Z,{isInline:!0,size:a.qE.small,leadingIcon:o.IconType.PersonUserLine,"data-testid":y.Am.identityButton,type:f?u.L$.plain:u.L$.tertiary,href:S,onClick:e=>{j&&((0,s.j)("signin_for_saved_address_login_modal_click"),null==c||c(),L(),e.preventDefault()),_(n)},children:null!=A?A:w})]}):null},x=(0,f.default)(S).withConfig({componentId:"sc-962bba8e-0"})(["span{margin-top:",";color:",";}"],e=>{let{isAddressLabelEnabled:t}=e;return t?c.Q2.usage.space.xSmall:c.Q2.usage.space.none},e=>e.isDarkBackground?A.i2.SystemWhite:A.i2.SystemGrey100);(0,f.default)(S).withConfig({componentId:"sc-962bba8e-1"})(["span{text-align:center;color:",";",";}"],e=>e.isDoorDash?A.i2.SystemWhite:A.i2.SystemGrey100,e=>e.textStyles&&e.textStyles)},116692:function(e,t,n){var d=n(313773);let r=["DE"];t.Z=e=>(0,d.useMemo)(()=>"string"==typeof e&&r.map(e=>"string"==typeof e?e.toLowerCase():"").includes(e.toLowerCase()),[e])},118697:function(e,t,n){var d=n(299891),r=n(222679),s=n(305017);t.Z=()=>{let{isStorefront:e}=(0,d.Z)(),t=(0,r.y)(s.pc.sfHoneybeeMapsMigration,!1);return e&&t}},277616:function(e,t,n){n.d(t,{l:function(){return u}});var d=n(979994),r=n(313773),s=n(860413),i=n(877182),l=n(731690);function a(){let e=(0,d._)(["\n  query dropoffOptions($cartId: ID, $addressId: ID) {\n    dropoffOptions(cartId: $cartId, addressId: $addressId) {\n      id\n      displayString\n      isDefault\n      isEnabled\n      placeholderText\n      disabledMessage\n      proofOfDeliveryType\n    }\n  }\n"]);return a=function(){return e},e}let o=(0,s.gql)(a()),u=function(e,t,n,d){var s,a,u,c,f,g,m;let p=arguments.length>4&&void 0!==arguments[4]&&arguments[4],v=(0,i.a)(o,{variables:{cartId:e,addressId:t.addressId||""}}),h=null!==(g=null===(s=v.data)||void 0===s?void 0:s.dropoffOptions)&&void 0!==g?g:[],b=null===(a=h.find(e=>(null==e?void 0:e.id)==="2"))||void 0===a?void 0:a.isEnabled,A=null===(u=h.find(e=>(null==e?void 0:e.id)==="2"))||void 0===u?void 0:u.isDefault;(0,r.useEffect)(()=>{v.refetch()},[t.id,t.addressId,n,d,b,A]);let y=null!==(m=null===(f=v.data)||void 0===f?void 0:null===(c=f.dropoffOptions)||void 0===c?void 0:c.filter(e=>null!=e))&&void 0!==m?m:[];return p&&(y[0]={...null==y?void 0:y[0],displayString:l.ZP.t("packageReturnsDropOffOptionsHandItToTheDasherTitle"),isDefault:!0,isEnabled:!0,placeholderText:l.ZP.t("packageReturnsDropOffOptionsHandItToTheDasherPlaceholder"),disabledMessage:null},y[1]={...null==y?void 0:y[1],displayString:l.ZP.t("packageReturnsDropOffOptionsPickupOutsideMyDoorTitle"),isDefault:!1,isEnabled:!0,placeholderText:l.ZP.t("packageReturnsDropOffOptionsPickupOutsideMyDoorPlaceholder"),disabledMessage:null}),{...v,dropoffOptions:y}}},942979:function(e,t,n){n.d(t,{e:function(){return o}});var d=n(979994),r=n(366033),s=n(860413),i=n(575551);function l(){let e=(0,d._)(["\n  mutation setCartFulfillmentType(\n    $cartId: ID!\n    $fulfillmentType: FulfillmentType\n    $cartContext: CartContextInput\n    $returnCartFromOrderService: Boolean\n  ) {\n    setCartFulfillmentTypeV2(\n      cartId: $cartId\n      fulfillmentType: $fulfillmentType\n      cartContext: $cartContext\n      returnCartFromOrderService: $returnCartFromOrderService\n    ) {\n      ...ConsumerOrderCartFragment\n    }\n  }\n  ","\n"]);return l=function(){return e},e}let a=(0,s.gql)(l(),i.h6);function o(e){return t=>e?{__typename:"Mutation",setCartFulfillmentTypeV2:{...e,isConsumerPickup:t}}:void 0}t.Z=function(){return(0,r.D)(a)}},649454:function(e,t,n){n.d(t,{n:function(){return S}});var d,r,s=n(979994),i=n(361967),l=n(852670),a=n(860413),o=n(313773),u=n(970501),c=n(278884),f=n(877e3);function g(){let e=(0,s._)(["\n  query validateConsumerAddressWithAddressLinkId($addressLinkId: ID!) {\n    validateConsumerAddress(addressLinkId: $addressLinkId) {\n      cartMessage {\n        code\n        type\n        message\n      }\n      validationResults {\n        code\n        type\n      }\n      userActions {\n        userActionType\n        isCheckoutBlocked\n      }\n    }\n  }\n"]);return g=function(){return e},e}function m(){let e=(0,s._)(["\n  query validateConsumerAddressWithGooglePlaceId($googlePlaceId: ID!) {\n    validateConsumerAddress(googlePlaceId: $googlePlaceId) {\n      cartMessage {\n        code\n        type\n        message\n      }\n      validationResults {\n        code\n        type\n      }\n      userActions {\n        userActionType\n        isCheckoutBlocked\n      }\n    }\n  }\n"]);return m=function(){return e},e}function p(){let e=(0,s._)(["\n  query validateConsumerAddressWithAddressId($addressId: ID!) {\n    validateConsumerAddress(addressId: $addressId) {\n      cartMessage {\n        code\n        type\n        message\n      }\n      validationResults {\n        code\n        type\n      }\n      userActions {\n        userActionType\n        isCheckoutBlocked\n      }\n    }\n  }\n"]);return p=function(){return e},e}(d=r||(r={})).ADDRESS="ADDRESS",d.SUBPREMISE="SUBPREMISE";let v=(0,a.gql)(g()),h=(0,a.gql)(m()),b=(0,a.gql)(p()),A=e=>{if(!e)return null;switch(e){case u.R4b.MESSAGE_ADDRESS_NOT_DELIVERABLE:case u.R4b.MESSAGE_ADDRESS_NOT_DELIVERABLE_ALL_DELIVERIES_BLOCKED:case u.R4b.MESSAGE_UNSPECIFIED:return r.ADDRESS;default:return r.SUBPREMISE}},y=e=>!!(null==e?void 0:e.some(e=>e.isCheckoutBlocked)),_=(e,t,n,d)=>{var r,s,i;let[a,{data:u,error:c}]=(0,l.t)(v,{fetchPolicy:"cache-and-network"}),[f,{data:g,error:m}]=(0,l.t)(h,{fetchPolicy:"cache-and-network"}),[p,{data:_,error:S}]=(0,l.t)(b,{fetchPolicy:"cache-and-network"});if((0,o.useEffect)(()=>{(e||n||d)&&!t&&(d?p({variables:{addressId:d}}):n?f({variables:{googlePlaceId:n}}):e&&a({variables:{addressLinkId:e.id}}))},[e,n,d,t,a,f,p]),t||c||m||S)return{messageLocation:null,result:null,recommendedActions:null,isCheckoutBlocked:!1};let x=_?_.validateConsumerAddress:u?u.validateConsumerAddress:null==g?void 0:g.validateConsumerAddress,C=null!==(i=null==x?void 0:x.cartMessage)&&void 0!==i?i:null;return{result:C,messageLocation:A(null==C?void 0:C.code),recommendedActions:(null==x?void 0:null===(s=x.userActions)||void 0===s?void 0:null===(r=s[0])||void 0===r?void 0:r.userActionType)||null,isCheckoutBlocked:y((null==x?void 0:x.userActions)||null)}},S=e=>{let{children:t,skip:n,address:d,googlePlaceId:r,addressId:s}=e,{consumer:l}=(0,c.R)(),a=_(d||l.defaultAddress,n,r,s);return(0,i.jsx)(f.Z.Provider,{value:a,children:t})}},885174:function(e,t,n){n.d(t,{Om:function(){return s},Wk:function(){return i}});var d=n(444679),r=n.n(d);let s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;r()(e,{time:500,validTarget:(e,t)=>t<2,align:{left:0,leftOffset:t},isScrollable:()=>!0},n)},i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:500,{isScrollable:i}=d;r()(e,{time:s,align:{top:0,topOffset:t},...i&&{isScrollable:i}},n)};t.ZP=s},650118:function(e,t,n){var d=n(621363),r=n.n(d);t.Z=(e,t)=>r()(e,t,{unit:"meter"})},297275:function(e,t,n){function d(e){return e.text||""}n.r(t),n.d(t,{getFullDisclaimerText:function(){return d}})},778327:function(e,t,n){var d,r;function s(e){return e||[]}function i(e){return e.id}function l(e,t){return(e.items.filter(e=>e.id===t)||[])[0]}function a(e){return e.name||""}function o(e){return e.description||""}function u(e){return e.items||[]}function c(e){return"footer"in e&&e.footer||null}function f(e){return e.id||""}function g(e){return e.storeId||""}function m(e){return e.nextCursor||""}function p(e){return e.name||""}function v(e){return e.description||""}function h(e){return e.servingSizeDisplayString}function b(e){return e.imageUrl||""}function A(e){var t,n;return{logo:(null===(t=e.secondaryCallout)||void 0===t?void 0:t.logo)||"UNKNOWN",text:(null===(n=e.secondaryCallout)||void 0===n?void 0:n.text)||""}}function y(e){return e.calloutDisplayString}function _(e){return e.dynamicLabelDisplayString}function S(e){return e.quickAddContext}function x(e){var t;let n=e.quickAddContext;return(null==n?void 0:null===(t=n.price)||void 0===t?void 0:t.unitAmount)?n.price.unitAmount:-1}function C(e){return e.ratingDisplayString}function P(e){return e.displayStrikethroughPrice}function I(e){var t;return null!==(t=e.dietaryTagsList)&&void 0!==t?t:[]}function j(e){return e.displayPrice}function E(e){var t;return null===(t=e.badges)||void 0===t?void 0:t[0]}function k(e){return e.displayStrikethroughPrice}n.r(t),n.d(t,{LOGO_TYPES:function(){return d},getDynamicLabelDisplayString:function(){return _},getItemBadge:function(){return E},getItemCalloutDisplayString:function(){return y},getItemCursor:function(){return m},getItemDescription:function(){return v},getItemDietaryTags:function(){return I},getItemDisplayPrice:function(){return j},getItemDisplayStrikethroughPrice:function(){return P},getItemFromList:function(){return l},getItemId:function(){return f},getItemImageUrl:function(){return b},getItemListDescription:function(){return o},getItemListFooter:function(){return c},getItemListId:function(){return i},getItemListItems:function(){return u},getItemListName:function(){return a},getItemLists:function(){return s},getItemName:function(){return p},getItemNestedBadges:function(){return Z},getItemSecondaryCallout:function(){return A},getItemServingSizeDisplayString:function(){return h},getItemStoreId:function(){return g},getItemStrikethroughDisplayPrice:function(){return k},getQuickAddContext:function(){return S},getRatingDisplayString:function(){return C},getUnifiedTelemetryActualPrice:function(){return x},isValidNestedBadged:function(){return L}}),(r=d||(d={})).DASHPASS="DASHPASS",r.UNKNOWN="UNKNOWN";let L=e=>!!(e&&e.text);function Z(e){var t,n;return null!==(n=null===(t=e.badges)||void 0===t?void 0:t.reduce((e,t)=>(null==t?void 0:t.badge)&&L(null==t?void 0:t.badge)?[...e,t.badge]:[...e],[]))&&void 0!==n?n:[]}},453508:function(e,t,n){n.d(t,{ib:function(){return o},g2:function(){return c}});var d=n(942979),r=n(455639);let s=e=>{let{storeId:t,menuId:n,isLoggedOutStorePage:d}=e;return(0,r.j)("store_page_action_delivery_pickup_toggle",{store_id:t,menu_id:n,use_case:d?"store_page_logged_out":null})};var i=n(61039),l=(e,t,n)=>{let d=i.t0.getIsDeliveryAvailable(e),r=!!(t.defaultAddress&&d);return!n&&r?{delivery:i.t0.getDeliveryFulfillmentLayoutSubtitle(e),pickup:i.t0.getPickupFulfillmentLayoutSubtitle(e)}:{delivery:"",pickup:""}};let a=(e,t)=>!!e&&(!o(e)&&!u(e,t)||!!e.groupCart),o=e=>0===(e.orders||[]).filter(e=>!!(e&&e.orderItems&&e.orderItems.length)).length,u=(e,t)=>{var n;return(null===(n=e.menu)||void 0===n?void 0:n.id)!==i._d.getCurrentMenuId(t)},c=(e,t,n,r,o,u,c,f,g)=>{var m,p;let v=i.t0.getStoreId(u),h=i._d.getCurrentMenuId(o),b=i.t0.getOffersDelivery(u),A=a(t,o),y=c&&(null==n?void 0:null===(m=n.defaultAddress)||void 0===m?void 0:m.printableAddress)===u.address.displayAddress,_=l(u,n,g);return{shouldRedirectOnToggleToDelivery:y,offersDelivery:b,shouldSetCartFulfillmentOnToggle:A,setIsToggledToPickup:r,isViewingPickup:e,trackFulfillmentToggle:()=>s({storeId:v,menuId:h,isLoggedOutStorePage:!!f}),getCartFulfillmentOpp:(0,d.e)(t),setFulfillmentVariables:{cartId:t?t.id:"",returnCartFromOrderService:!!(null==t?void 0:t.groupCart),cartContext:{isBundle:null!==(p=null==t?void 0:t.isBundle)&&void 0!==p&&p}},fulfillmentToggleEtaSubtext:_}}},61039:function(e,t,n){n.d(t,{f8:function(){return h},Q0:function(){return v},_d:function(){return d},t0:function(){return r}});var d={};n.r(d),n.d(d,{getCurrentMenu:function(){return p},getCurrentMenuId:function(){return i},getCurrentMenuMenuCategories:function(){return s},getCurrentMenuName:function(){return l},getMenuCategoryAnchor:function(){return f},getMenuCategoryId:function(){return o},getMenuCategoryName:function(){return u},getMenuCategoryNumItems:function(){return c},getMenuId:function(){return m},getMenuImageUrl:function(){return a},getMenuList:function(){return g}});var r=n(859587);function s(e){return(null==e?void 0:e.menuCategories)||[]}function i(e){return(null==e?void 0:e.id)||""}function l(e){return(null==e?void 0:e.name)||""}function a(e){return null==e?void 0:e.imageUrl}function o(e){return(null==e?void 0:e.id)||""}function u(e){return(null==e?void 0:e.name)||""}function c(e){return null==e?void 0:e.numItems}function f(e){var t;return(null==e?void 0:null===(t=e.next)||void 0===t?void 0:t.anchor)||""}function g(e){return(null==e?void 0:e.menuList)||[]}function m(e){return e.id||""}function p(e){let t=g(e),n=i(e);return t.find(e=>m(e)===n)}var v=n(778327),h=n(297275)},437712:function(e,t,n){let d=(0,n(313773).createContext)({businessInformation:{businessId:"",businessName:"",headerImageUrl:"",coverImageUrl:"",logoUrl:"",faviconUrl:"",theme:{backgroundDefault:"",backgroundHovered:"",backgroundActive:"",toggleBackground:"",toggleBorder:"",opacity:1,isSelected:!1},loading:!0,themingOverridesV8:{},themingOverridesParams:{},storeUrl:""},isLoading:!1,status:void 0,error:void 0,queryVariables:{businessId:null,isPreview:!1},updateBizQueryVariables:()=>null});t.Z=d},285310:function(e,t,n){n.d(t,{o:function(){return o}});var d=n(313773),r=n(822489),s=n(183418),i=n(970501);n(508525);var l=n(699251),a=n(818473);let o=()=>{let{pathname:e,query:t,push:n}=(0,s.useRouter)(),{set:o}=l.simpleStoreSession;return["true"===t.delivery?i.LK5.Delivery:i.LK5.Pickup,d.useCallback(d=>{switch(d){case i.LK5.Delivery:delete t.pickup,t.delivery="true";break;case i.LK5.Pickup:delete t.delivery,t.pickup="true",o(a.q7,"true")}delete t.slug,n("".concat(e,"?").concat(r.stringify(t)),void 0,{shallow:!0})},[e,n,t,o])]}},934015:function(e,t,n){n.d(t,{Db:function(){return a},aM:function(){return l}});var d=n(366033),r=n(877182),s=n(262679);let i=e=>{try{if(!e)return;return{...e,meta:function(e){var t,n,d,r;let s=null==e?void 0:null===(r=e.graphQLErrors)||void 0===r?void 0:null===(d=r[0])||void 0===d?void 0:null===(n=d.extensions)||void 0===n?void 0:null===(t=n.exception)||void 0===t?void 0:t.error;if(s)return{getApi:()=>s.api,getMessage:()=>s.message,getName:()=>s.name,getPath:()=>s.path,getStatusCode:()=>s.statusCode,getType:()=>s.type}}(e)}}catch(e){throw(0,s.Tb)("cx-apollo-client: Error parsing new error payload"),e}};function l(e,t){let n=(0,r.a)(e,t);return{...n,error:i(n.error)}}function a(e,t){let n=(0,d.D)(e,t),r=n[0],s=n[1];return[r,{...s,error:i(s.error)}]}}}]);
//# sourceMappingURL=59500-55ac9e7e347a7590.js.map
//# debugId=1951e92b-97a7-5bc9-b970-429926a7d192
