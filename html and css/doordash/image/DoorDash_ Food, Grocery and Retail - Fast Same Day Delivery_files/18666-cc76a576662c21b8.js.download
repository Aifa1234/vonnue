
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="9812dc3b-5dda-5cb8-b84c-acc9c28aceb4")}catch(e){}}();
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="887576d0-49a2-45a8-91ab-469a594936c5",e._sentryDebugIdIdentifier="sentry-dbid-887576d0-49a2-45a8-91ab-469a594936c5")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[18666],{632212:function(e,t,n){var r,i,o,l,a,d,u,s,c,_,m,p,E,v,C,g,T,f,I,S,y,h,O,D;n.d(t,{LK:function(){return s},Pl:function(){return c},k3:function(){return _},n5:function(){return u}}),(E=r||(r={})).ADDRESS_LINK_TYPE_GIFT="ADDRESS_LINK_TYPE_GIFT",E.ADDRESS_LINK_TYPE_UNSPECIFIED="ADDRESS_LINK_TYPE_UNSPECIFIED",(v=i||(i={})).CHECKOUT="CHECKOUT",v.REMINDER="REMINDER",v.UNSPECIFIED="UNSPECIFIED",(C=o||(o={})).BUNDLE_TYPE_ALCOHOL_MENU_BUNDLE="BUNDLE_TYPE_ALCOHOL_MENU_BUNDLE",C.BUNDLE_TYPE_NV_AGGREGATE_STORE="BUNDLE_TYPE_NV_AGGREGATE_STORE",C.BUNDLE_TYPE_POST_CHECKOUT="BUNDLE_TYPE_POST_CHECKOUT",C.BUNDLE_TYPE_PRE_CHECKOUT="BUNDLE_TYPE_PRE_CHECKOUT",C.BUNDLE_TYPE_PRE_CHECKOUT_CART="BUNDLE_TYPE_PRE_CHECKOUT_CART",C.BUNDLE_TYPE_PRE_CHECKOUT_RETAIL_SEARCH="BUNDLE_TYPE_PRE_CHECKOUT_RETAIL_SEARCH",C.BUNDLE_TYPE_PRE_CHECKOUT_S4FE="BUNDLE_TYPE_PRE_CHECKOUT_S4FE",C.BUNDLE_TYPE_PRE_CHECKOUT_V1="BUNDLE_TYPE_PRE_CHECKOUT_V1",C.BUNDLE_TYPE_UNSPECIFIED="BUNDLE_TYPE_UNSPECIFIED",(g=l||(l={})).CART_ITEM_STATUS_TYPE_PENDING_REMOVE="CART_ITEM_STATUS_TYPE_PENDING_REMOVE",g.CART_ITEM_STATUS_TYPE_PENDING_SUBMIT="CART_ITEM_STATUS_TYPE_PENDING_SUBMIT",g.CART_ITEM_STATUS_TYPE_SUBMITTED="CART_ITEM_STATUS_TYPE_SUBMITTED",g.CART_ITEM_STATUS_TYPE_SUBMITTED_AS_UPDATE="CART_ITEM_STATUS_TYPE_SUBMITTED_AS_UPDATE",g.CART_ITEM_STATUS_TYPE_UNSPECIFIED="CART_ITEM_STATUS_TYPE_UNSPECIFIED",(T=a||(a={})).CART_STATUS_TYPE_ACTIVE="CART_STATUS_TYPE_ACTIVE",T.CART_STATUS_TYPE_CLOSED="CART_STATUS_TYPE_CLOSED",T.CART_STATUS_TYPE_SUBMITTED="CART_STATUS_TYPE_SUBMITTED",T.CART_STATUS_TYPE_SUBMITTED_DELETE_ITEM_BLOCKED="CART_STATUS_TYPE_SUBMITTED_DELETE_ITEM_BLOCKED",T.CART_STATUS_TYPE_SUBMITTED_ITEM_LIMIT_MET="CART_STATUS_TYPE_SUBMITTED_ITEM_LIMIT_MET",T.CART_STATUS_TYPE_UNAVAILABLE="CART_STATUS_TYPE_UNAVAILABLE",T.CART_STATUS_TYPE_UNSPECIFIED="CART_STATUS_TYPE_UNSPECIFIED",(f=d||(d={})).CATERING_MENU_VERSION_DEPRECATED_CATERING="CATERING_MENU_VERSION_DEPRECATED_CATERING",f.CATERING_MENU_VERSION_MP_CATERING="CATERING_MENU_VERSION_MP_CATERING",f.CATERING_MENU_VERSION_UNKNOWN_UNSPECIFIED="CATERING_MENU_VERSION_UNKNOWN_UNSPECIFIED",(I=u||(u={})).DEFERRED="DEFERRED",I.FREE_SAME_DAY="FREE_SAME_DAY",I.NOT_SET="NOT_SET",I.NO_RUSH="NO_RUSH",I.PRIORITY="PRIORITY",I.SCHEDULE="SCHEDULE",I.STANDARD="STANDARD",(S=s||(s={})).Any="Any",S.Delivery="Delivery",S.DineIn="DineIn",S.Pickup="Pickup",S.Shipping="Shipping",S.Virtual="Virtual",(y=c||(c={})).DELIVERY_CHANNEL_EMAIL="DELIVERY_CHANNEL_EMAIL",y.DELIVERY_CHANNEL_SENDER="DELIVERY_CHANNEL_SENDER",y.DELIVERY_CHANNEL_SMS="DELIVERY_CHANNEL_SMS",y.DELIVERY_CHANNEL_UNSPECIFIED="DELIVERY_CHANNEL_UNSPECIFIED",(h=_||(_={})).GROUP_CART_TYPE_CREATOR_PAYS_ALL="GROUP_CART_TYPE_CREATOR_PAYS_ALL",h.GROUP_CART_TYPE_SPLIT_BILL="GROUP_CART_TYPE_SPLIT_BILL",h.GROUP_CART_TYPE_UNSPECIFIED="GROUP_CART_TYPE_UNSPECIFIED",(O=m||(m={})).LABEL_ICON_TYPE_HOME="LABEL_ICON_TYPE_HOME",O.LABEL_ICON_TYPE_PIN="LABEL_ICON_TYPE_PIN",O.LABEL_ICON_TYPE_UNSPECIFIED="LABEL_ICON_TYPE_UNSPECIFIED",O.LABEL_ICON_TYPE_WORK="LABEL_ICON_TYPE_WORK",(D=p||(p={})).PURCHASE_TYPE_DYNAMIC_PRICE="PURCHASE_TYPE_DYNAMIC_PRICE",D.PURCHASE_TYPE_MEASUREMENT="PURCHASE_TYPE_MEASUREMENT",D.PURCHASE_TYPE_UNIT="PURCHASE_TYPE_UNIT",D.PURCHASE_TYPE_UNIT_TO_MEASUREMENT="PURCHASE_TYPE_UNIT_TO_MEASUREMENT",D.PURCHASE_TYPE_UNSPECIFIED="PURCHASE_TYPE_UNSPECIFIED"},712936:function(e,t,n){var r=n(361967),i=n(204425),o=n(37174),l=n(918821),a=n(509300),d=n(902093),u=n(22649),s=n(560930),c=n(655914),_=n(190510),m=n(117874),p=n(549736),E=n(944854),v=n(791166);n(313773);var C=n(731690),g=n(608586),T=n(652146),f=n(281001);t.Z=e=>{var t;let{newGroupCartExpForAny:n}=(0,f.G)({overrideOptions:{isGroupCart:!0}}),{order:I,isOwnOrder:S,showDoneCallout:y=!1,showAddingItemCallout:h=!1,onAddItemsClick:O}=e,{consumer:D}=I,R=(null==D?void 0:null===(t=D.localizedNames)||void 0===t?void 0:t.formalNameAbbreviated)||"";return(0,r.jsx)(r.Fragment,{children:n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z,{type:o.C.separator}),(0,r.jsx)(l.Z,{size:a.wM.small,children:(0,r.jsxs)(d.Z,{size:a.O8.xxSmall,justifyContent:u.dy.spaceBetween,alignItems:u.v2.baseline,children:[(0,r.jsxs)(s.x,{textStyle:c.TextStyle.label.medium.strong,as:"h3",children:[R,S?" (".concat(C.ZP.t("layoutStrings_orderCart_groupCart_you"),")"):""]}),O&&S&&(0,r.jsx)(_.Z,{onClick:O,leadingIcon:m.c.Add,size:m.qE.small,type:p.L$.tertiary,isInline:!0,children:C.ZP.t("checkoutStrings_editOrderStrings_addItems")}),y&&(0,r.jsx)(E.Z,{"data-testid":T._.GroupCartDoneCallout,text:C.ZP.t("layoutStrings_orderCart_groupCart_done"),tagStyle:v.Yb.default,tagType:v.Qy.highlight}),h&&(0,r.jsx)(E.Z,{"data-testid":T._.GroupCartAddingItemsCallout,text:C.ZP.t("layoutStrings_orderCart_groupCart_addingItems"),tagStyle:v.Yb.default,tagType:v.Qy.informational})]})})]}):(0,r.jsx)(g.UB,{children:(0,r.jsxs)(d.Z,{size:a.O8.xxSmall,justifyContent:u.dy.spaceBetween,alignItems:u.v2.baseline,children:[(0,r.jsx)(s.x,{textStyle:c.TextStyle.label.small.default,as:"h3",children:S?C.ZP.t("layoutStrings_orderCart_groupCart_yourItems"):C.ZP.t("layoutStrings_orderCart_groupCart_itemOwner",{consumerName:R})}),y&&(0,r.jsx)(E.Z,{"data-testid":T._.GroupCartDoneCallout,text:C.ZP.t("layoutStrings_orderCart_groupCart_done"),tagStyle:v.Yb.default,tagType:v.Qy.highlight}),h&&(0,r.jsx)(E.Z,{"data-testid":T._.GroupCartAddingItemsCallout,text:C.ZP.t("layoutStrings_orderCart_groupCart_addingItems"),tagStyle:v.Yb.default,tagType:v.Qy.informational})]})})})}},608586:function(e,t,n){n.d(t,{G4:function(){return m},OO:function(){return f},Qy:function(){return E},UB:function(){return _},XO:function(){return S},bN:function(){return C},cp:function(){return y},i9:function(){return g},oO:function(){return I},vq:function(){return T},wk:function(){return p}});var r=n(424),i=n(918821),o=n(509300),l=n(159967),a=n(902093),d=n(22649),u=n(560930),s=n(655914),c=n(918564);let _=(0,c.default)(i.Z).attrs(()=>({size:o.wM.medium,isSquished:!0})).withConfig({componentId:"sc-f8a0ab80-0"})(["border-bottom:1px solid ",";background-color:",";"],l.Q2.usage.color.border.strong.default,l.Q2.usage.color.background.subdued.default);_.displayName="GroupOrderHeader";let m=(0,c.default)(i.Z).attrs(()=>({size:o.wM.medium})).withConfig({componentId:"sc-f8a0ab80-1"})(["border-bottom:",";"],e=>{let{showBorderBottom:t}=e;return t?"1px solid ".concat(l.Q2.usage.color.border.strong.default):"none"});m.displayName="GroupOrderFooterContainer";let p=c.default.div.withConfig({componentId:"sc-f8a0ab80-2"})(["display:flex;"]);p.displayName="GroupOrderFooterRow";let E=c.default.div.withConfig({componentId:"sc-f8a0ab80-3"})(["flex:1;"]);E.displayName="QuantityColumn";let v=c.default.div.withConfig({componentId:"sc-f8a0ab80-4"})(["background-color:",";border-radius:",";padding:"," ",";margin:"," 0;width:100%;"],r.i2.SystemBlue20,l.Q2.usage.borderRadius.small,l.Q2.usage.space.xSmall,l.Q2.usage.space.medium,l.Q2.usage.space.small),C=(0,c.default)(v).withConfig({componentId:"sc-f8a0ab80-5"})(["margin:0;background-color:",";color:",";padding:"," ",";"],l.Q2.usage.color.positive.subdued.default,l.Q2.usage.color.text.default,l.Q2.usage.space.medium,l.Q2.usage.space.legacyMedium),g=c.default.div.withConfig({componentId:"sc-f8a0ab80-6"})(["display:flex;justify-content:space-between;"]),T=c.default.div.withConfig({componentId:"sc-f8a0ab80-7"})(["flex:10;"]),f=(0,c.default)(a.Z).attrs(()=>({alignItems:d.v2.center,justifyContent:d.dy.spaceBetween})).withConfig({componentId:"sc-f8a0ab80-8"})([""]),I=(0,c.default)(u.x).attrs(()=>({textStyle:s.TextStyle.label.medium.default})).withConfig({componentId:"sc-f8a0ab80-9"})([""]),S=c.default.div.withConfig({componentId:"sc-f8a0ab80-10"})(["background-color:",";border-radius:",";padding:",";margin:"," 0;text-align:center;width:100%;"],r.i2.SystemBlue20,l.Q2.usage.borderRadius.small,l.Q2.usage.space.xSmall,l.Q2.usage.space.small),y=(0,c.default)(u.x).attrs(()=>({textStyle:s.TextStyle.label.small.default})).withConfig({componentId:"sc-f8a0ab80-11"})([""])},652146:function(e,t,n){var r,i;n.d(t,{_:function(){return r}}),(i=r||(r={})).GroupOrderFooterSubtotal="GroupOrderFooterSubtotal",i.GroupOrderFooterRemainder="GroupOrderFooterRemainder",i.GroupCartDoneCallout="GroupCartDoneCallout",i.GroupCartAddingItemsCallout="GroupCartAddingItemsCallout"},544543:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(361967),i=n(549736),o=n(232755),l=n(902093),a=n(509300),d=n(22649),u=n(996870),s=n(190510),c=n(560930),_=n(655914),m=n(1590),p=n(313773),E=n(159967);let v=n(918564).default.div.withConfig({componentId:"sc-8deb7ee5-0"})(["height:",";text-align:center;"],E.Q2.usage.space.large);var C=n(731690),g=e=>{let{label:t,value:n,onCopy:E,buttonType:g=i.L$.primary,...T}=e,[f,I]=p.useState(!1);return(0,r.jsxs)(o.Z,{children:[(0,r.jsxs)(l.Z,{size:a.O8.small,justifyContent:d.dy.flexStart,children:[(0,r.jsx)(u.Z,{label:t,value:n,onChange:(e,t)=>t.preventDefault(),isLabelHidden:!0,...T}),(0,r.jsx)(s.Z,{type:g,isInline:!0,onClick:()=>{(0,m.nx)(n).then(()=>{I(!0),E&&E()})},children:C.ZP.t("copyToClipboardStrings_copy")})]}),(0,r.jsx)(v,{children:f&&(0,r.jsx)(c.x,{textStyle:_.TextStyle.label.small.default,children:C.ZP.t("copyToClipboardStrings_successMessage")})})]})}},640823:function(e,t,n){n.d(t,{oC:function(){return u}});var r=n(957311),i=n.n(r),o=n(731690);let l=e=>{let t=!0;if(e.forEach((n,r)=>{0!==r&&n!==e[r-1]+1&&(t=!1)}),t){let t=e[0],n=i()(t,"E").format("ddd");if(1===e.length)return"".concat(n);let r=e[e.length-1],o=i()(r,"E").format("ddd");return"".concat(n,"–").concat(o)}return e.map(e=>{let t=i()(e,"E").format("ddd");return"".concat(t)}).join(", ")},a=(e,t,n,r)=>0==e&&0==t&&23==n&&59==r,d=(e,t,n,r)=>{let l="".concat(e,":").concat(t),d="".concat(n,":").concat(r),u=i()(l,"H:m").format("LT"),s=i()(d,"H:m").format("LT");return a(e,t,n,r)?o.ZP.t("menu_budgets_anytime"):"".concat(u,"–").concat(s)},u=e=>{try{if(0===e.length||!e.every(e=>{var t,n;return!!((null===(t=e.startTimeOfDayOfWeek)||void 0===t?void 0:t.dayOfWeek)&&e.startTimeOfDayOfWeek.timeOfDay&&(null===(n=e.endTimeOfDayOfWeek)||void 0===n?void 0:n.dayOfWeek)&&e.endTimeOfDayOfWeek.timeOfDay)}))return"N/A";let{startTimeOfDayOfWeek:{timeOfDay:{hours:t,minutes:n}},endTimeOfDayOfWeek:{timeOfDay:{hours:r,minutes:o}}}=e[0];if(e.every(e=>{let{startTimeOfDayOfWeek:{timeOfDay:{hours:i,minutes:l}},endTimeOfDayOfWeek:{timeOfDay:{hours:a,minutes:d}}}=e;return i===t&&l===n&&a===r&&d===o})){let i=l(e.map(e=>e.startTimeOfDayOfWeek.dayOfWeek)),a=d(t,n,r,o);return"".concat(i,", ").concat(a)}return e.map(e=>{let{startTimeOfDayOfWeek:{dayOfWeek:t,timeOfDay:{hours:n,minutes:r}},endTimeOfDayOfWeek:{timeOfDay:{hours:o,minutes:l}}}=e,a="".concat(n,":").concat(r),d="".concat(o,":").concat(l),u=i()(t,"E").format("ddd"),s=i()(a,"H:m").format("LT"),c=i()(d,"H:m").format("LT");return"".concat(u," ").concat(s,"–").concat(c)}).join(", ")}catch(e){return"N/A"}}},789090:function(e,t,n){var r=n(222679),i=n(305017);t.Z=()=>(0,r.y)(i.pc.sameStoreCatering,!1)},277595:function(e,t,n){n.d(t,{$5:function(){return R},Av:function(){return x},CO:function(){return g},EE:function(){return D},EV:function(){return I},HV:function(){return h},Hp:function(){return S},Mj:function(){return y},S5:function(){return O},X0:function(){return b},XA:function(){return p},Xl:function(){return f},YQ:function(){return v},_X:function(){return m},aP:function(){return N},bN:function(){return C},bq:function(){return E},ed:function(){return A},hV:function(){return T},ki:function(){return a},mT:function(){return P},wK:function(){return _}});var r,i,o,l,a,d,u=n(249243),s=n(970501),c=n(455639);(r=l||(l={})).CREATE_GROUP_ORDER="create_group_order",r.CREATE_GROUP_ORDER_CLICK="create_group_order_click",r.CREATE_GROUP_ORDER_FAILURE="create_group_order_failure",r.UPDATE_GROUP_ORDER="update_group_order",r.GROUP_CART_ERRORS="group_cart_errors",r.GROUP_ORDER_CART_BEFORE_DEADLINE_CONFIRM_CLICK="group_order_cart_before_deadline_confirm_click",r.GROUP_ORDER_CART_CHECKOUT_BEFORE_DEADLINE_CONFIRM_CLICK="group_order_cart_checkout_before_deadline_confirm_click",r.GROUP_ORDER_CART_PARTICIPANT_DONE_ADDING_ITEMS="group_order_cart_participant_done_adding_items",r.GROUP_ORDER_CART_SIDEBAR_ACTION="group_order_cart_sidebar_action",r.GROUP_ORDER_CART_SIDEBAR_ADD_ITEM="group_order_cart_sidebar_add_item",r.GROUP_ORDER_CART_SIDEBAR_ADD_ITEM_CLICK="group_order_cart_sidebar_add_item_click",r.GROUP_ORDER_CART_SIDEBAR_VIEW="group_order_cart_sidebar_view",r.GROUP_ORDER_CART_UNLOCK_CART_CONFIRM_CLICK="group_order_cart_unlock_cart_confirm_click",r.GROUP_ORDER_DETAILS_MODAL_LOAD="group_order_details_modal_load",r.GROUP_ORDER_GUEST_LOGIN_PAGE_CONTINUE="group_order_guest_login_page_continue",r.GROUP_ORDER_GUEST_LOGIN_PAGE_LOAD="group_order_guest_login_page_load",r.GROUP_ORDER_INVITE="group_order_invite",r.GROUP_ORDER_LOQ_BANNER_BUTTON_CLICK="group_order_loq_banner_button_click",r.GROUP_ORDER_SHARE_CART_LOAD="group_order_share_cart_load",r.GROUP_ORDER_SHARE_SEND_INVITE_CLICK="group_order_share_send_invite_click",r.GROUP_ORDERS_INVITE_GROUPS_VIEW="group_orders_invite_groups_view",r.GROUP_PARTICIPANT_CONTINUE_TO_PAYMENT="group_participant_continue_to_payment",r.GROUP_PARTICIPANT_PROCEED_TO_PAYMENT="group_participant_proceed_to_payment",r.ORDER_CART_PARTICIPANT_DONE_ADDING_ITEMS="order_cart_participant_done_adding_items",r.VIEW_CREATE_GROUP_ORDER_MODAL="view_create_group_order_modal",r.GROUP_ORDER_CANCEL_MODAL_LOAD="group_order_cancel_modal_load",r.GROUP_ORDER_CANCEL="group_order_cancel",r.GROUP_ORDER_RECOMMENDED_DEADLINE_TOOLTIP_VIEW="group_order_recommended_deadline_tooltip_view";let _=e=>{let{storeId:t,location:n,version:r,preCheckoutDetails:i}=e;(0,c.j)("create_group_order_click",{version:r,location:n,store_id:t,form_values:JSON.stringify(e),scheduled_time:null==i?void 0:i.scheduledWindowStart,scheduled_time_end:null==i?void 0:i.scheduledWindowEnd})},m=e=>{let{orderCartUuid:t,storeId:n,maxIndividualCost:r,storeName:i,selectedGroupCartType:o,idealGroupSize:l,loqThreshold:a,isLoqBannerShow:d,location:u,version:_}=e,m={multi_payer_group:o===s.k3x.GROUP_CART_TYPE_SPLIT_BILL,is_spending_limit:!!r&&o!==s.k3x.GROUP_CART_TYPE_SPLIT_BILL};(0,c.j)("create_group_order",{version:_,location:u,order_cart_uuid:t,store_id:n,per_person_limit:r,store_name:i,group_cart_type:o.toString(),ideal_group_size:l,loq_threshold:a,is_loq_banner_show:d,...m,form_values:JSON.stringify(e)})},p=e=>{let{cartId:t,location:n,version:r}=e;(0,c.j)("update_group_order",{version:r,location:n,order_cart_uuid:t,form_values:JSON.stringify(e)})},E=(e,t,n,r,i,o,l,a)=>(0,c.j)("view_create_group_order_modal",{version:o,store_id:e,store_name:t,ideal_group_size:n,loq_threshold:r,is_loq_banner_show:i,fulfillment_type:l,initial_scheduled_time:(null==a?void 0:a.initialScheduledTime)||null,initial_scheduled_time_end:(null==a?void 0:a.initialScheduledTimeEnd)||null,modal_scheduled_time:(null==a?void 0:a.modalScheduledTime)||null,modal_scheduled_time_end:(null==a?void 0:a.modalScheduledTimeEnd)||null}),v=(e,t,n,r)=>(0,c.j)("group_order_share_cart_load",{cart_id:e,per_person_limit:t,is_cart_creator:n,group_cart_id:e,group_order_type:r,is_creator:n}),C=e=>{(0,c.j)("group_orders_invite_groups_view",{order_cart_id:e.cartId,group_cart_type:e.groupCartType,is_creator:e.isCreator})},g=(e,t,n,r)=>{(0,c.j)("group_order_share_send_invite_click",{consumer_id:e,cart_id:t,group_ids:n,member_count:r})},T=(e,t,n,r)=>{(0,c.j)("group_order_loq_banner_button_click",{store_id:e,store_name:t,ideal_group_size:n,loq_threshold:r})};(i=a||(a={})).creator="creator",i.participant="participant",(o=d||(d={})).manual="manual",o.automatic="automatic";let f=(e,t,n)=>{(0,c.j)("group_cart_errors",{error_message:e,order_cart_id:t,audience_type:void 0===n?"":n?"creator":"participant"})},I=(e,t,n)=>{(0,c.j)("group_order_cart_sidebar_add_item_click",{order_cart_id:e,audience_type:t?"creator":"participant",is_empty_view:n})},S=(e,t,n,r)=>{(0,c.j)("group_participant_continue_to_payment",{order_cart_id:e,creator_id:t,consumer_id:n,action:r})},y=(e,t,n,r)=>{(0,c.j)("order_cart_participant_done_adding_items",{order_cart_id:e,creator_id:t,num_participants:n,order_acount:r})},h=(e,t,n,r,i)=>{(0,c.j)("group_order_cart_sidebar_view",{order_cart_id:e,audience_type:t?"creator":"participant",is_locked:n,checkout_mode:r?"automatic":"manual",order_deadline:i?new Date(i).toISOString():""})},O=(e,t)=>{(0,c.j)("group_order_cart_checkout_before_deadline_confirm_click",{order_cart_id:e,order_deadline:new Date(t).toISOString()})},D=(e,t)=>{(0,c.j)("group_order_cart_unlock_cart_confirm_click",{order_cart_id:e,order_deadline:new Date(t).toISOString()})},R=e=>(0,c.j)("group_order_details_modal_load",(0,u.snakeCaseObjectKeys)(e)),A=(e,t)=>(0,c.j)("create_group_order_failure",(0,u.snakeCaseObjectKeys)({reason:e,storeId:t})),x=e=>(0,c.j)("group_order_cart_sidebar_action",(0,u.snakeCaseObjectKeys)(e)),P=e=>(0,c.j)("group_order_cancel_modal_load",(0,u.snakeCaseObjectKeys)(e)),b=e=>(0,c.j)("group_order_cancel",(0,u.snakeCaseObjectKeys)(e)),N=e=>(0,c.j)("group_order_cancel",(0,u.snakeCaseObjectKeys)(e))},549818:function(e,t,n){n.d(t,{Z:function(){return tE}});var r,i,o,l,a,d,u=n(361967),s=n(918821),c=n(509300),_=n(232755),m=n(283580),p=n.n(m),E=n(313773),v=n(277595),C=n(753245),g=n(613531),T=n(560930),f=n(655914),I=n(45918),S=n(204425),y=n(37174),h=n(195482),O=n(892976),D=n(472475),R=n.n(D),A=n(330871),x=n(106148),P=n(538763),b=n(970501),N=n(731690),L=n(543315),M=n(918564);let{label:{small:U,xSmall:k}}=f.TextStyle,j=(0,M.default)(_.Z).withConfig({componentId:"sc-4c0b37f3-0"})(["padding:",";cursor:pointer;"],L.Spacing.medium),G=(0,M.default)(T.x).attrs({textStyle:k.strong}).withConfig({componentId:"sc-4c0b37f3-1"})([""]),w=(0,M.default)(T.x).attrs({textStyle:U.default,display:I.c.inline}).withConfig({componentId:"sc-4c0b37f3-2"})([""]),Z=M.default.span.withConfig({componentId:"sc-4c0b37f3-3"})(["display:flex;justify-content:space-between;"]);var B=n(437769),W=n(694933),F=n(864809),Y=n(484497),H=n(431325),V=n(222047),z=n(645827),K=n(630209),Q=n(997962),q=n(363329),$=n(708894);(r=l||(l={})).GROUP_CART_TYPE="groupCartType",r.DELIVERY_OPTION="deliveryOption",r.ORDER_DEADLINE="orderDeadline";let J=e=>{let{leadingIconType:t,tooltip:n,...r}=e;return(0,u.jsx)(W.Z,{size:F.LK.medium,labelMaxLines:2,insetHorizontalSize:c.wM.none,leadingIcon:{isInteractive:!1,type:t},trailingIcon:r.onClick&&!n?{isInteractive:!1,type:Y.IconType.ChevronRight,size:H.J.small}:void 0,trailingMetadata:n||void 0,separatorType:y.C.insetBorder,shouldInsetStartAtLabel:!0,...r})};var X=e=>{var t,n,r,i,o,l;let{isSchedulingViewEnabled:a,showRecommendedTooltip:s,orderCart:c,consumer:_,setNextAction:m}=e,p=(0,P.bU)(),{currencyCode:v,groupCartPreCheckoutDetails:C,groupCartType:g,isConsumerPickup:I,maxIndividualCost:S}=c,y=parseFloat(S||"0"),h=1e3*parseInt((null==C?void 0:null===(t=C.autoCheckoutConfig)||void 0===t?void 0:t.eventTime)||"0",10),O=null==C?void 0:null===(n=C.autoCheckoutConfig)||void 0===n?void 0:n.eventTask,{shouldShowOrderDeadline:D}=(0,$.Z)({scheduledWindowStart:(null==C?void 0:C.scheduledWindowStart)||"",scheduledWindowEnd:(null==C?void 0:C.scheduledWindowEnd)||"",isSchedulingEnabled:a}),[R,L]=E.useState(null),{data:M}=(0,K.w)({storeId:(null===(r=c.restaurant)||void 0===r?void 0:r.id)||"",isPickup:!!I,menuId:(null===(i=c.menu)||void 0===i?void 0:i.id)||"",skip:!!R});E.useEffect(()=>{!R&&M&&L((0,q.Z)(M))},[M,R]);let U=(0,x.nJ)({groupCartType:g||b.k3x.GROUP_CART_TYPE_UNSPECIFIED,maxIndividualCost:y,currency:v||A.E,userLocale:p}),k=(0,x.X3)({timezone:null!==(o=null==_?void 0:_.timezone)&&void 0!==o?o:"",timestampInMillis:h,userLocale:p}),j=(0,x.MZ)({isPickup:!!I,scheduledWindowStart:(null==C?void 0:C.scheduledWindowStart)||"",scheduledWindowEnd:(null==C?void 0:C.scheduledWindowEnd)||""}),G=(0,x.ft)({isPickup:!!I,timezone:null!==(l=null==_?void 0:_.timezone)&&void 0!==l?l:"",scheduledWindowStart:(null==C?void 0:C.scheduledWindowStart)||"",scheduledWindowEnd:(null==C?void 0:C.scheduledWindowEnd)||"",orderDeadline:h?new Date(h).toISOString():void 0,etaMinute:null==R?void 0:R.etaMinute,bufferMinsForLargeOrders:null==R?void 0:R.bufferMinsForLargeOrders,dollarThresholdForLargeOrders:null==R?void 0:R.dollarThresholdForLargeOrders,userLocale:p,currency:v,showNoOrderDeadlineText:!D});return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(J,{label:g===b.k3x.GROUP_CART_TYPE_CREATOR_PAYS_ALL?N.ZP.t("menu_groupOrderModal_groupCartTypeDescription_creatorPaysAll"):N.ZP.t("menu_groupOrderModal_groupCartTypeDescription_everyonePaysSeparately"),description:g===b.k3x.GROUP_CART_TYPE_CREATOR_PAYS_ALL?U:"",leadingIconType:Y.IconType.MoneyCircleLine},"groupCartType"),a&&(0,u.jsx)(J,{label:j,description:G.map(e=>(0,u.jsx)(T.x,{textStyle:f.TextStyle.body.small.default,color:f.d9.text.subdued.default,children:e})),leadingIconType:Y.IconType.TimeLine,onClick:()=>m(d.VIEW_SCHEDULING)},"deliveryOption"),D&&(0,u.jsx)(J,{label:k,description:O?O===b.Fi4.REMINDER?N.ZP.t("menu_groupOrderModal_orderDeadlineDescription_manualCheckOut"):N.ZP.t("menu_groupOrderModal_orderDeadlineDescription_autoCheckoutOut"):N.ZP.t("menu_groupOrderModal_orderDeadlineDescription_noDeadline"),tooltip:s?(0,u.jsx)(Q.Z,{tooltipPosition:V.eW.bottomLeft,isVisible:s,children:(0,u.jsx)(z.Z,{type:Y.IconType.ChevronRight,color:Y.EY.icon.default,size:H.J.medium})}):null,leadingIconType:Y.IconType.NotifyLine,onClick:()=>m(d.VIEW_ORDER_DEADLINE)},"orderDeadline")]})},ee=n(218712),et=e=>{var t,n,r,i,o,l,a;let{isGroupCartOwner:d,isSchedulingViewEnabled:s,showRecommendedTooltip:m,orderCart:p,consumer:v,setNextAction:C}=e,D=(0,P.bU)(),L=E.useMemo(()=>({i18nextInstance:N.ZP.instance}),[]),{currencyCode:M,groupCartPreCheckoutDetails:U,groupCartType:k,isConsumerPickup:j,maxIndividualCost:G,restaurant:Z}=p,W=parseFloat(G||"0"),F=1e3*parseInt((null==U?void 0:null===(t=U.autoCheckoutConfig)||void 0===t?void 0:t.eventTime)||"0",10),Y=null==U?void 0:null===(n=U.autoCheckoutConfig)||void 0===n?void 0:n.eventTask,H=(0,x.nJ)({groupCartType:k||b.k3x.GROUP_CART_TYPE_UNSPECIFIED,maxIndividualCost:W,currency:M||A.E,userLocale:D}),V=(0,x.X3)({timezone:null!==(l=null==v?void 0:v.timezone)&&void 0!==l?l:"",timestampInMillis:F,userLocale:D}),z=(0,x.um)({timezone:null!==(a=null==v?void 0:v.timezone)&&void 0!==a?a:"",isPickup:j||!1,scheduledWindowStart:(null==U?void 0:U.scheduledWindowStart)||"",scheduledWindowEnd:(null==U?void 0:U.scheduledWindowEnd)||"",orderDeadline:new Date(F).toISOString(),etaMinute:(()=>{var e,t;let n=(((null===(e=p.asapMinutesRange)||void 0===e?void 0:e[0])||0)+((null===(t=p.asapMinutesRange)||void 0===t?void 0:t[1])||0))/2;return n?(0,B.TL)(n):0})(),userLocale:D}),K=null===(r=(0,ee.vY)(v.id||"",p))||void 0===r?void 0:r[0],Q=!!(null==K?void 0:K.isSubCartFinalized),q=k===b.k3x.GROUP_CART_TYPE_SPLIT_BILL&&!d&&!!K&&!Q;return(0,u.jsxs)("div",{children:[(0,u.jsx)(g.Z,{size:c.$f.xSmall,children:Y===b.Fi4.CHECKOUT&&(0,u.jsx)(T.x,{textStyle:f.TextStyle.body.small.default,color:f.d9.text.subdued.default,display:I.c.inline,children:j?(0,u.jsx)(R(),{i18n:L,values:{address:(null==Z?void 0:null===(i=Z.address)||void 0===i?void 0:i.street)||""},i18nKey:"menu_groupCarts_pickupAtAddress",components:[(0,u.jsx)(w,{})]}):(0,u.jsx)(R(),{i18n:L,values:{address:(null==U?void 0:null===(o=U.deliveryAddress)||void 0===o?void 0:o.street)||""},i18nKey:"menu_groupCarts_deliverToAddress",components:[(0,u.jsx)(w,{})]})})}),(0,u.jsx)("div",{children:d?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(g.Z,{}),(0,u.jsx)(S.Z,{type:y.C.fullBorder}),(0,u.jsx)(X,{isSchedulingViewEnabled:s,showRecommendedTooltip:m,orderCart:p,consumer:v,setNextAction:C})]}):(0,u.jsxs)(_.Z,{size:c.Uo.xSmall,children:[(0,u.jsx)(S.Z,{type:y.C.fullBorder}),(0,u.jsxs)("div",{children:[(0,u.jsxs)(T.x,{textStyle:f.TextStyle.label.small.default,color:f.d9.text.subdued.default,children:[H,F?" \xb7 ".concat(V):""]}),z&&(0,u.jsx)(T.x,{textStyle:f.TextStyle.label.small.default,color:f.d9.text.subdued.default,children:z})]}),q&&(0,u.jsx)(h.Z,{label:N.ZP.t("menu_groupCarts_payReminderBanner_title"),body:N.ZP.t("menu_groupCarts_payReminderBanner_body"),bannerStyle:O.v4.default,bannerType:O.$.informational})]})})]})},en=n(783616),er=n(905954),ei=n(414338),eo=e=>{var t,n;let{isGroupCartOwner:r,orderCart:i}=e,o=(0,ee.Tf)(i),[l,a]=E.useState(!0);return o&&l?(0,u.jsxs)(ei.C2,{children:[(0,u.jsx)(ei.eX,{children:r?N.ZP.t("layoutStrings_orderCart_groupCart_orderIsLocked"):N.ZP.t("layoutStrings_orderCart_groupCart_orderIsLockedParticipant",{ownerName:null!==(n=null==i?void 0:null===(t=i.creator)||void 0===t?void 0:t.firstName)&&void 0!==n?n:""})}),(0,u.jsx)(ei.tW,{accessibilityLabel:"Close locked cart banner button",onClick:()=>a(!1)})]}):null},el=n(761054),ea=n(648806),ed=n(177560),eu=n(117874),es=n(549736),ec=n(902093);let{Add:e_,PeopleAddLine:em,TrashLine:ep}=Y.IconType;var eE=e=>{let{closePopover:t,isCreator:n,onAddItems:r,onViewOrderDetails:i,openAddPeopleModal:o,openDeleteCartModal:l,orderCartId:a}=e,d=new Map([[r,"popover_addItem"],[i,"popover_viewOrderDetails"],[o,"popover_addPeople"],[l,"popover_deleteGroupOrder"]].filter(e=>{let[t]=e;return void 0!==t})),s=e=>{if(t(),e){var r;e(),(0,v.Av)({orderCartId:a,action:null!==(r=d.get(e))&&void 0!==r?r:"",audienceType:n?v.ki.creator:v.ki.participant})}};return(0,u.jsxs)(j,{children:[!!r&&(0,u.jsxs)(ec.Z,{onClick:()=>s(r),children:[(0,u.jsx)(z.Z,{type:e_}),(0,u.jsx)(T.x,{children:N.ZP.t("checkoutStrings_editOrderStrings_addItems")})]}),(0,u.jsxs)(ec.Z,{onClick:()=>s(o),children:[(0,u.jsx)(z.Z,{type:em}),(0,u.jsx)(T.x,{children:N.ZP.t("menu_groupCarts_addPeople")})]}),n&&(0,u.jsxs)(u.Fragment,{children:[!!i&&(0,u.jsxs)(ec.Z,{onClick:()=>s(i),children:[(0,u.jsx)(z.Z,{type:Y.IconType.CartLine}),(0,u.jsx)(T.x,{children:N.ZP.t("menu_groupCarts_viewOrderDetails")})]}),(0,u.jsxs)(ec.Z,{onClick:()=>s(l),children:[(0,u.jsx)(z.Z,{type:ep,color:f.d9.brand.primary}),(0,u.jsx)(T.x,{color:f.d9.brand.primary,children:N.ZP.t("menu_groupCarts_deleteGroupOrder")})]})]})]})},ev=e=>{var t,n;let{isGroupCartOwner:r,isOpen:i,orderCart:o,onAddItems:l,onViewOrderDetails:a,setInviteModalOpen:d,setDeleteCartModalOpen:s}=e,[c,_]=E.useState(i||!1),m=(null==o?void 0:null===(n=o.restaurant)||void 0===n?void 0:null===(t=n.business)||void 0===t?void 0:t.name)||"";return(0,u.jsxs)(Z,{children:[(0,u.jsx)(T.x,{textStyle:f.TextStyle.display.medium,children:m}),(0,u.jsx)(el.Z,{interactionType:ea.p.controlled,isVisible:c,onVisibilityChange:e=>_(e),position:V.eW.rightTop,content:(0,u.jsx)(eE,{closePopover:()=>_(!1),isCreator:r,onAddItems:l,onViewOrderDetails:a,openAddPeopleModal:()=>d(!0),openDeleteCartModal:()=>s(!0),orderCartId:o.id}),children:()=>(0,u.jsx)(ed.Z,{iconType:Y.IconType.MoreHorizontal,onClick:()=>_(!c),size:eu.rm.small,type:es.xZ.secondary,accessibilityLabel:""})})]})},eC=n(281001),eg=n(632212),eT=n(868686),ef=n(892692);let eI=e=>{var t,n,r,i,o,l,a,d;return{lat:(null===(r=e.restaurant)||void 0===r?void 0:null===(n=r.address)||void 0===n?void 0:null===(t=n.lat)||void 0===t?void 0:t.toString())||"",lng:(null===(l=e.restaurant)||void 0===l?void 0:null===(o=l.address)||void 0===o?void 0:null===(i=o.lng)||void 0===i?void 0:i.toString())||"",displayAddress:(null===(d=e.restaurant)||void 0===d?void 0:null===(a=d.address)||void 0===a?void 0:a.printableAddress)||""}},eS=e=>{var t,n,r,i,o,l,a,d,u,s,c;return{id:e.id,isPickup:e.fulfillmentType===eg.LK.Pickup,storeAddress:eI(e),maxIndividualCost:e.maxIndividualCost?Number(e.maxIndividualCost):null,menuId:(null===(t=e.menu)||void 0===t?void 0:t.id)||"",storeId:(null===(n=e.restaurant)||void 0===n?void 0:n.id)||"",storeName:(null===(i=e.restaurant)||void 0===i?void 0:null===(r=i.business)||void 0===r?void 0:r.name)||"",storeOffersScheduling:!0,groupCartType:e.groupCartType,storeOrderQualityMetadata:{idealGroupSize:(null===(o=e.restaurant)||void 0===o?void 0:o.idealGroupSize)||null,highQualitySubtotalThreshold:(null===(l=e.restaurant)||void 0===l?void 0:l.highQualitySubtotalThreshold)||null},minEta:null===(a=e.asapMinutesRange)||void 0===a?void 0:a[0],maxEta:null===(d=e.asapMinutesRange)||void 0===d?void 0:d[1],midEta:Math.ceil((((null===(u=e.asapMinutesRange)||void 0===u?void 0:u[0])||0)+((null===(s=e.asapMinutesRange)||void 0===s?void 0:s[1])||0))/2),storeTimezone:(null==e?void 0:null===(c=e.orderTimeAvailability)||void 0===c?void 0:c.timezone)||(0,ef.EP)()||"US/Pacific",currency:e.currencyCode||eT.N.USD,...ey(e)}},ey=e=>{var t,n,r,i;let o=e.groupCartPreCheckoutDetails||null,l=null==o?void 0:null===(t=o.autoCheckoutConfig)||void 0===t?void 0:t.eventTask,a=null==o?void 0:null===(n=o.autoCheckoutConfig)||void 0===n?void 0:n.eventTime,d=(0,ee.Vo)(e);return{checkoutMode:l?eh(l):void 0,orderDeadlineTimestamp:a?1e3*Number(a):void 0,scheduledWindowStart:(null==o?void 0:o.scheduledWindowStart)?new Date(o.scheduledWindowStart).toISOString():void 0,scheduledWindowEnd:(null==o?void 0:o.scheduledWindowEnd)?new Date(o.scheduledWindowEnd).toISOString():void 0,deliveryAddressId:null==o?void 0:null===(r=o.deliveryAddress)||void 0===r?void 0:r.id,paymentMethodId:(null==o?void 0:o.paymentMethodId)||"",budgetId:(null==o?void 0:o.budgetId)||"",expenseCode:(null==o?void 0:o.expenseCode)||"",expenseNotes:(null==o?void 0:o.expenseNotes)||"",dasherTipPercentage:null!==(i=null==o?void 0:o.dasherTipPercentage)&&void 0!==i?i:d?0:void 0}},eh=e=>{switch(e){case b.Fi4.CHECKOUT:return en.ON.AUTOMATIC;case b.Fi4.REMINDER:return en.ON.MANUAL;default:return}};var eO=n(756477),eD=n(74152),eR=n(979994),eA=n(734834),ex=n(860413);function eP(){let e=(0,eR._)(["\n  mutation cancelGroupCart($id: String!) {\n    cancelGroupCart(id: $id)\n  }\n"]);return eP=function(){return e},e}let eb=(0,ex.gql)(eP());var eN=e=>{let{children:t}=e;return(0,u.jsx)(eA.m,{mutation:eb,children:(e,n)=>t(t=>e({variables:{id:t}}),n)})},eL=n(190510);(0,M.default)(eL.Z).attrs(()=>({padding:es.aV.wide,isInline:!0})).withConfig({componentId:"sc-67a65735-0"})([""]);var eM=n(818617),eU=n(810146);let ek=(e,t)=>{var n;let r=null==e?void 0:e.maxIndividualCost;(0,v.X0)({cartId:t||"",perPersonLimit:r,groupCartType:(null==e?void 0:null===(n=e.groupCartType)||void 0===n?void 0:n.toString())||""})};var ej=n(693925),eG=e=>{let{isOpen:t,orderCart:n,onClose:r}=e,i=(null==n?void 0:n.urlCode)||(null==n?void 0:n.id),o=(e,t)=>{let i=(0,ee.$t)(n);ek(n,t),r&&r(),e(t).then(()=>{window.location.href=i})};return E.useEffect(()=>{t&&(0,v.mT)({cartId:(null==n?void 0:n.id)||""})},[t]),(0,u.jsx)(eN,{children:e=>(0,u.jsx)(eD.Z,{onClose:r,isOpen:t,hasCloseButton:!0,title:N.ZP.t("menu_groupCarts_deleteGroupOrder_question"),primaryAction:{text:N.ZP.t("menu_groupCarts_deleteGroupOrder"),buttonProps:{type:es.L$.primary},onClick:()=>o(e,i)},secondaryAction:{text:N.ZP.t("announcement_cancel"),buttonProps:{type:es.L$.secondary},onClick:()=>{try{r&&r()}catch(e){console.log("no onClose function")}}},"data-testid":ej.D.DeleteGroupCartModal,children:(0,u.jsx)(T.x,{color:f.d9.text.subdued.default,children:N.ZP.t("menu_groupCarts_all_items_will_be_removed")})})})},ew=n(574108),eZ=n(708194),eB=n(159967),eW=n(544543);(i=a||(a={})).SavedGroupSection="SavedGroupSections",i.SavedGroupSectionGroupListCell="SavedGroupSectionGroupListCell",i.MembersFromRecentOrders="MembersFromRecentOrders",i.MembersFromRecentOrdersListCell="MembersFromRecentOrdersListCell",i.ShareLinkInstructions="ShareLinkInstructions",i.NotifyEncounteredError="NotifyEncounteredError",i.InviteExceptionInstructions="InviteExceptionInstructions",i.InviteExceptionMemberList="InviteExceptionMemberList";let eF=M.default.ul.withConfig({componentId:"sc-bf90ab99-0"})(["margin:"," auto "," auto;padding-inline-start:",";"],eB.Q2.usage.space.xSmall,eB.Q2.usage.space.medium,eB.Q2.usage.space.large);var eY=e=>{let{isCreator:t,isAutocheckout:n,eligibleToInvite:r,shareLink:i,exceptionMemberNames:o,notifyConsumerGroupsAndMembersError:l,copyLinkBtnType:d=es.L$.tertiary}=e;return(0,u.jsxs)(_.Z,{children:[!!l&&r&&(0,u.jsx)(g.Z,{size:c.$f.medium,"data-testid":a.NotifyEncounteredError,children:(0,u.jsx)(h.Z,{label:N.ZP.t("menu_groupCarts_encounteredErrorNotifying"),body:N.ZP.t("menu_groupCarts_fallbackWhenUnableToInvite"),bannerType:O.$.warning,bannerStyle:O.v4.subdued})}),!l&&o&&r&&(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(g.Z,{size:c.$f.medium,"data-testid":a.InviteExceptionInstructions,children:[(0,u.jsxs)(T.x,{textStyle:f.TextStyle.body.small.default,children:[N.ZP.t("menu_groupCarts_unableToInvite")," "]}),(0,u.jsx)(eF,{"data-testid":a.InviteExceptionMemberList,children:o.map(e=>(0,u.jsx)("li",{children:(0,u.jsx)(T.x,{textStyle:f.TextStyle.body.small.default,children:e})},e))}),(0,u.jsx)(T.x,{textStyle:f.TextStyle.body.small.default,children:N.ZP.t("menu_groupCarts_fallbackWhenUnableToInvite")})]})}),!l&&!o&&r&&(0,u.jsxs)(g.Z,{size:c.$f.xLarge,"data-testid":a.ShareLinkInstructions,children:[(0,u.jsxs)(T.x,{textStyle:f.TextStyle.body.small.default,children:[N.ZP.t("menu_groupCarts_shareLinkInstructions")," "]}),t&&(0,u.jsx)(T.x,{textStyle:f.TextStyle.body.small.default,children:n?N.ZP.t("menu_groupCarts_checkoutInstructionsForAutocheckout"):N.ZP.t("menu_groupCarts_checkoutInstructions_html")})]}),(0,u.jsxs)(T.x,{textStyle:f.TextStyle.title.large,children:[N.ZP.t("menu_groupCarts_shareLinkTitle")," "]}),(0,u.jsx)(eW.Z,{buttonType:d,label:N.ZP.t("menu_groupCarts_shareLink"),value:i||"","data-anchor-id":eM.PJ.groupCartLinkTextField,"data-testid":eU.i.groupCartLinkTextField})]})},eH=n(877182);function eV(){let e=(0,eR._)(["\n  query consumerGroupsAndMembers {\n    consumerGroupsAndMembers {\n      consumerMembersSummaries {\n        consumerId\n        userId\n        isGuest\n        consumerLocalizedNames {\n          fullPrivatizedName\n        }\n      }\n      consumerGroupSummaries {\n        id\n        name\n        numberOfMembers\n        creatorConsumerId\n        memberDetails\n        memberNames\n      }\n    }\n  }\n"]);return eV=function(){return e},e}let ez=(0,ex.gql)(eV());var eK=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,eH.a)(ez,e)};function eQ(e,t,n){var r;return(null==t?void 0:null===(r=t[e])||void 0===r?void 0:r[n])||!1}function eq(e,t,n,r){r(function(e,t,n){let r=eQ(e,n,t);return{...n,[e]:{...n[e],[t]:!r}}}(e,t,n))}let e$=(0,M.default)(_.Z).withConfig({componentId:"sc-ae630993-0"})(["margin-top:",";button[role='checkbox']{margin-top:"," !important;}"],c.Uo.medium,c.Uo.none);var eJ=e=>{var t,n,r,i;let{selectedEntitiesForNotification:o,setSelectedEntitiesForNotification:l,groupsToShowAllMembers:d,setGroupsToShowAllMembers:s,setShouldShowActionBtns:m,setSelectedMemberCount:p,trackingMetadata:C}=e,{data:I,loading:S,error:y}=eK(),[h,O]=E.useState(!1);E.useEffect(()=>{var e,t,n,r;!S&&((null!==(n=null==I?void 0:null===(e=I.consumerGroupsAndMembers)||void 0===e?void 0:e.consumerGroupSummaries)&&void 0!==n?n:[]).length>0||(null!==(r=null==I?void 0:null===(t=I.consumerGroupsAndMembers)||void 0===t?void 0:t.consumerMembersSummaries)&&void 0!==r?r:[]).length>0)&&m(!0)},[I,S,m]);let D=(null!==(r=null==I?void 0:null===(t=I.consumerGroupsAndMembers)||void 0===t?void 0:t.consumerGroupSummaries)&&void 0!==r?r:[]).map(e=>{var t,n,r,i,o;return{name:null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"",id:null!==(n=null==e?void 0:e.id)&&void 0!==n?n:"",memberDetails:null!==(r=null==e?void 0:e.memberDetails)&&void 0!==r?r:"",numberOfMembers:null!==(i=null==e?void 0:e.numberOfMembers)&&void 0!==i?i:0,memberNames:null!==(o=null==e?void 0:e.memberNames)&&void 0!==o?o:[]}}),R=(null!==(i=null==I?void 0:null===(n=I.consumerGroupsAndMembers)||void 0===n?void 0:n.consumerMembersSummaries)&&void 0!==i?i:[]).map(e=>{var t,n;return{name:null==e?void 0:null===(t=e.consumerLocalizedNames)||void 0===t?void 0:t.fullPrivatizedName,id:null!==(n=null==e?void 0:e.consumerId)&&void 0!==n?n:""}});return(E.useEffect(()=>{!h&&(D.length>0||R.length>0)&&((0,v.bN)({...C,groupCartType:C.groupCartType||b.k3x.GROUP_CART_TYPE_UNSPECIFIED}),O(!0))},[D,R,C,h]),S||y||0===D.length&&0===R.length)?null:(0,u.jsxs)(g.Z,{children:[(0,u.jsxs)(_.Z,{size:c.Uo.xSmall,children:[(0,u.jsx)(T.x,{textStyle:f.TextStyle.title.medium,children:N.ZP.t("menu_groupCarts_inviteTitle")}),(0,u.jsx)(T.x,{textStyle:f.TextStyle.body.medium.default,children:N.ZP.t("menu_groupCarts_inviteSubtitle")})]}),D.length>0&&(0,u.jsxs)(e$,{"data-testid":a.SavedGroupSection,children:[(0,u.jsx)(T.x,{textStyle:f.TextStyle.label.medium.strong,children:N.ZP.t("menu_groupCarts_savedGroupSectionTitle")}),D.map(e=>{var t;let n=eQ("group",o,e.id),r=t=>{eq("group",e.id,o,l),p(n=>t?n-e.numberOfMembers:n+e.numberOfMembers)},i=/\+\d$/.test(null!==(t=e.memberDetails)&&void 0!==t?t:""),c=i&&eQ("group",d,e.id),_={description:e.memberDetails,trailingMetadata:void 0,descriptionMaxLines:void 0};if(i){_.description=c?e.memberNames.filter(Boolean).join(", "):e.memberDetails,_.descriptionMaxLines=c?10:void 0;let t=c?N.ZP.t("menu_groupCarts_savedGroupHideAllMemberNames"):N.ZP.t("menu_groupCarts_savedGroupShowAllMemberNames"),n=()=>{eq("group",e.id,d,s)};_.trailingMetadata=(0,u.jsx)(ed.Z,{accessibilityLabel:t,iconType:c?eu.L.ChevronUp:eu.L.ChevronDown,onClick:e=>{e.stopPropagation(),n()}})}return(0,u.jsx)(W.Z,{"data-testid":a.SavedGroupSectionGroupListCell,accessibilityRole:"checkbox",accessibilityLabel:e.name,isSeparatorVisible:!0,isToggleable:!0,isToggled:n,toggledColor:eB.Q2.usage.color.text.default,onClick:()=>r(n),leadingIcon:n?{accessibilityLabel:"Checked",isInteractive:!1,type:Y.IconType.CheckSquareFill}:{accessibilityLabel:"Unchecked",isInteractive:!1,type:Y.IconType.CheckSquareOffLine},label:e.name,..._},e.id)})]}),R.length>0&&(0,u.jsxs)(e$,{"data-testid":a.MembersFromRecentOrders,children:[(0,u.jsx)(T.x,{textStyle:f.TextStyle.label.medium.strong,children:N.ZP.t("menu_groupCarts_recentMemberSectionTitle")}),R.map(e=>{let t=eQ("member",o,e.id),n=t=>{eq("member",e.id,o,l),p(e=>t?e-1:e+1)};return(0,u.jsx)(W.Z,{"data-testid":a.MembersFromRecentOrdersListCell,accessibilityRole:"checkbox",accessibilityLabel:e.name,isSeparatorVisible:!0,isToggleable:!0,isToggled:t,toggledColor:eB.Q2.usage.color.text.default,onClick:()=>n(t),leadingIcon:t?{accessibilityLabel:"Checked",isInteractive:!1,type:Y.IconType.CheckSquareFill}:{accessibilityLabel:"Unchecked",isInteractive:!1,type:Y.IconType.CheckSquareOffLine},label:e.name},e.id)})]})]})},eX=n(440835),e0=n(222679),e1=n(305017),e9=n(315072);let e3=M.default.div.withConfig({componentId:"sc-358dcdd9-0"})(["display:flex;flex-direction:column;align-items:center;padding:",";background-color:",";border-radius:",";margin:"," 0;"],eB.Q2.usage.space.medium,eB.Q2.usage.color.background.subdued,eB.Q2.usage.borderRadius.medium,eB.Q2.usage.space.medium),e5=M.default.div.withConfig({componentId:"sc-358dcdd9-1"})(["padding:",";background-color:white;border-radius:",";margin-bottom:",";"],eB.Q2.usage.space.small,eB.Q2.usage.borderRadius.small,eB.Q2.usage.space.small);var e7=e=>{let{shareLink:t}=e;return(0,e0.y)(e1.pc.enableGroupCartQRCode,!1)?(0,u.jsxs)(g.Z,{size:c.$f.small,children:[(0,u.jsx)(T.x,{textStyle:f.TextStyle.label.medium.strong,children:e9.Z.t("menu_groupCarts_scanQRCode")}),(0,u.jsxs)(e3,{children:[(0,u.jsx)(e5,{children:(0,u.jsx)(eX.tv,{value:t,size:200,level:"H",includeMargin:!1,"aria-label":e9.Z.t("menu_groupCarts_scanQRCode")})}),(0,u.jsx)(T.x,{textStyle:f.TextStyle.body.small.default,color:f.d9.text.subdued.default,children:e9.Z.t("menu_groupCarts_scanQRCodeInstructions")})]})]}):null},e2=n(366033);function e6(){let e=(0,eR._)(["\n  mutation notifyConsumerGroupsAndMembers(\n    $groupIds: [String]\n    $memberConsumerIds: [String]\n    $cartInvitationBody: CartInvitationBody\n  ) {\n    notifyConsumerGroupsAndMembers(\n      groupIds: $groupIds\n      memberConsumerIds: $memberConsumerIds\n      cartInvitationBody: $cartInvitationBody\n    ) {\n      consumerIds\n      groupIds\n      exceptionMembers {\n        consumerLocalizedNames {\n          fullPrivatizedName\n        }\n      }\n    }\n  }\n"]);return e6=function(){return e},e}let e4=(0,ex.gql)(e6());var e8=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,{data:n,loading:r,error:i}]=(0,e2.D)(e4,e),[o,l]=E.useState(null);return E.useEffect(()=>{var e,t,r,i,o,a;if(!n)return;let d=(null!==(i=null==n?void 0:null===(e=n.notifyConsumerGroupsAndMembers)||void 0===e?void 0:e.exceptionMembers)&&void 0!==i?i:[]).filter(e=>{var t;return!!(null==e?void 0:null===(t=e.consumerLocalizedNames)||void 0===t?void 0:t.fullPrivatizedName)}).map(e=>{var t;return{consumerLocalizedNames:{fullPrivatizedName:(null==e?void 0:null===(t=e.consumerLocalizedNames)||void 0===t?void 0:t.fullPrivatizedName)||""}}}),u=(null!==(o=null==n?void 0:null===(t=n.notifyConsumerGroupsAndMembers)||void 0===t?void 0:t.groupIds)&&void 0!==o?o:[]).filter(Boolean),s=(null!==(a=null==n?void 0:null===(r=n.notifyConsumerGroupsAndMembers)||void 0===r?void 0:r.consumerIds)&&void 0!==a?a:[]).filter(Boolean);l({notifiedEntities:{consumers:s.length>0?s:null,groups:u.length>0?u:null},exceptionMembers:d.length>0?d:null})},[n]),{mutation:t,loading:r,error:i,result:o}},te=n(751313);let tt=e=>({group:Object.keys(e.group).filter(t=>e.group[t]),member:Object.keys(e.member).filter(t=>e.member[t])});var tn=e=>{var t,n,r,i;let{closeModal:o,shareLink:l,isCreator:a,orderCart:d,consumerId:s,isGuest:c}=e,_=d.id,m=(0,ee.Vo)(d),p=E.useRef("true"===(0,te.vQ)("dd_skip_announcement")),{addToast:C}=(0,eZ.RG)(),[g,T]=E.useState(!1),[f,I]=E.useState(0),[S,y]=E.useState(es.L$.tertiary),[h,O]=E.useState(!1),[D,R]=E.useState(null),[A,x]=E.useState({member:{},group:{}}),[P,b]=E.useState({group:{}}),{mutation:L,result:M,loading:U,error:k}=e8();E.useEffect(()=>{if(g)return;let e=null==d?void 0:d.maxIndividualCost;(0,v.YQ)(_,e,a,null==d?void 0:d.groupCartType),T(!0)},[g,a,_,null==d?void 0:d.maxIndividualCost,T,null==d?void 0:d.groupCartType]),E.useEffect(()=>{if(!U&&M){var e,t,n;if(null==M?void 0:M.exceptionMembers)R((null!==(n=null==M?void 0:M.exceptionMembers)&&void 0!==n?n:[]).map(e=>{var t;return(null==e?void 0:null===(t=e.consumerLocalizedNames)||void 0===t?void 0:t.fullPrivatizedName)||""}).filter(Boolean));else{let n=null!==(t=null===(e=M.notifiedEntities.consumers)||void 0===e?void 0:e.length)&&void 0!==t?t:0,r=N.ZP.t("menu_groupCarts_invitesSent",{stringifiedNumberOfInvites:""});r=1===n?N.ZP.t("menu_groupCarts_singleInviteSent"):0===n?N.ZP.t("menu_groupCarts_invitesSent",{stringifiedNumberOfInvites:""}):N.ZP.t("menu_groupCarts_invitesSent",{stringifiedNumberOfInvites:n.toString()}),o(),C({isError:!1,duration:2e3,text:r})}}},[M,U,o,C]),E.useEffect(()=>{(D||k)&&(y(es.L$.primary),O(!1))},[D,y,O,k]);let j={cartId:_,isCreator:a,groupCartType:d.groupCartType},G=!c&&!p.current,w={cartId:_,storeId:(null===(t=d.restaurant)||void 0===t?void 0:t.id)||"",storeName:(null===(n=d.restaurant)||void 0===n?void 0:n.name)||"",shortUrl:d.shortenedUrl||"",menuId:(null===(r=d.menu)||void 0===r?void 0:r.id)||"",cartCreatorConsumerId:(null==d?void 0:null===(i=d.creator)||void 0===i?void 0:i.id)||""},Z=h?{text:N.ZP.t("menu_groupCarts_sendInvite"),onClick:()=>{let{member:e,group:t}=tt(A);(0,v.CO)(s,_,t,f),L({variables:{groupIds:t,memberConsumerIds:e,cartInvitationBody:w}})},buttonProps:{state:U?es.BN.loading:es.BN.default,isDisabled:!Object.keys(A).some(e=>{let t=A[e];return Object.keys(t).some(e=>t[e])})}}:void 0;return(0,u.jsxs)(eD.Z,{isOpen:!0,shouldAnimate:!0,shouldEnableLegacyConditionalRendering:!0,onClose:o,title:N.ZP.t("menu_groupCarts_shareGroupOrder"),primaryAction:Z,children:[(0,u.jsx)(eY,{eligibleToInvite:G,notifyConsumerGroupsAndMembersError:k,exceptionMemberNames:D,isCreator:a,isAutocheckout:m,shareLink:l,copyLinkBtnType:S}),l&&(0,u.jsx)(e7,{shareLink:l}),!D&&!k&&G&&(0,u.jsx)(eJ,{selectedEntitiesForNotification:A,setSelectedEntitiesForNotification:x,groupsToShowAllMembers:P,setGroupsToShowAllMembers:b,setShouldShowActionBtns:O,setSelectedMemberCount:I,trackingMetadata:j})]})},tr=e=>{let{closeModal:t,shareLink:n,isCreator:r,orderCart:i}=e,{consumer:o,loading:l}=(0,ew.T)({fetchPolicy:"cache-only"}),a=!l&&!(null==o?void 0:o.isGuest)&&(null==o?void 0:o.id)||"",d=!1!==o.isGuest;return(0,u.jsx)(tn,{consumerId:a,isGuest:d,orderCart:i,isCreator:r,shareLink:n,closeModal:()=>t()})},ti=e=>{let{action:t,closeModal:n,isGroupCartOwner:r,orderCart:i}=e;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(eG,{isOpen:t===d.DELETE_GROUP_ORDER,onClose:n,orderCart:i}),t===d.INVITE_PEOPLE&&(0,u.jsx)(tr,{orderCart:i,isCreator:r,shareLink:i.shortenedUrl,closeModal:n})]})},to=n(315178),tl=n(5100),ta=n(21929),td=n(57684);let tu=e=>({checkoutMode:e.checkoutMode,orderDeadlineTimestamp:e.orderDeadlineTimestamp,scheduledWindowStart:e.scheduledWindowStart,scheduledWindowEnd:e.scheduledWindowEnd,deliveryAddressId:e.deliveryAddressId,paymentMethodId:e.paymentMethodId,budgetId:e.budgetId,expenseCode:e.expenseCode,expenseNotes:e.expenseNotes,dasherTipPercentage:e.dasherTipPercentage});var ts=n(784386),tc=n(525285),t_=e=>{var t;let{action:n,setNextAction:r,closeModal:i,groupCartDataDraft:o,isLoading:l,isSchedulingViewEnabled:a,updateDraft:s}=e,c=(null==o?void 0:o.isPickup)||!1,_=e=>{if(!o)return;let t=tu(e);s({...o,...t})};return(0,u.jsxs)(u.Fragment,{children:[n===d.VIEW_ORDER_DETAILS&&o&&(0,u.jsx)(to.E,{title:N.ZP.t("menu_groupOrderDetailsModal"),primaryCtaText:N.ZP.t("commonStrings_wizard_done"),showCtaLoading:l,groupCartData:o,initialFormData:o,canEditAddress:!1,isSchedulingViewEnabled:a,onSave:e=>_(e),onClose:i}),n===d.VIEW_ORDER_DEADLINE&&o&&(0,u.jsx)(tl.Z,{showLoading:l,groupCartModalData:o,primaryCta:{automatic:N.ZP.t("menu_groupOrderModal_confirmGroupOrderDetailsCtaLabel")},onSave:e=>{s({...o,...e})},onClose:i}),(n===d.VIEW_SCHEDULING||n===d.FETCH_UPDATED_ORDER_DEADLINE)&&o&&(0,u.jsx)(ta.ZP,{cartData:o,isMenuSticky:!0,showCtaLoading:l,onSave:e=>{s({...o,...e})},onClose:i}),n===d.WARN_CHANGE_SCHEDULE&&(0,u.jsx)(td.Z,{isPickup:c,onClose:i,onChange:()=>r(d.VIEW_SCHEDULING)}),n===d.WARN_WILL_UNLOCK_CART&&o&&(0,u.jsx)(ts.Z,{isOpen:!0,title:N.ZP.t("menu_groupCarts_changingOrderDeadlineWillUnlockCart"),orderCartId:(null==o?void 0:o.id)||"",trackingContext:{orderDeadlineTimestamp:null!==(t=o.orderDeadlineTimestamp)&&void 0!==t?t:0},onUnlockCartSuccess:()=>r(d.VIEW_ORDER_DEADLINE),onClose:i}),n===d.STORE_SCHEDULING_UNAVAILABLE_INFO&&(0,u.jsx)(tc.Z,{isPickup:c,onClose:i})]})},tm=n(183332),tp=n(191835);(o=d||(d={})).NONE="NONE",o.DELETE_GROUP_ORDER="DELETE_GROUP_ORDER",o.INVITE_PEOPLE="INVITE_PEOPLE",o.VIEW_ORDER_DETAILS="VIEW_ORDER_DETAILS",o.VIEW_ORDER_DEADLINE="VIEW_ORDER_DEADLINE",o.WARN_CHANGE_SCHEDULE="WARN_CHANGE_SCHEDULE",o.VIEW_SCHEDULING="VIEW_SCHEDULING",o.FETCH_UPDATED_ORDER_DEADLINE="FETCH_UPDATED_ORDER_DEADLINE",o.WARN_WILL_UNLOCK_CART="WARN_WILL_UNLOCK_CART",o.STORE_SCHEDULING_UNAVAILABLE_INFO="STORE_SCHEDULING_UNAVAILABLE_INFO";var tE=e=>{var t,n,r,i,o,l,a;let{isGroupCartOwner:d,orderCart:m,consumer:g}=e,{isCreatorKillSwitchEnabled:T,newGroupCartExpForCreatorOnly:f}=(0,eC.G)({overrideOptions:{isCartOwner:d,isGroupCart:!0}}),{canCreatorCreateScheduledCarts:I,canCreatorEditScheduledCarts:S}=(0,eO.Z)(),y=(0,tp.Z)(!1),h=(0,ee.Yo)(m),O=h&&S||!h&&I,D=!!(0,ee.yj)(m),R=f&&(!T||D),[A,x]=E.useState("NONE"),[P,b]=E.useState("NONE"),[L,M]=E.useState(null),U=(0,er.E_)(e=>e.setFloatingCheckoutVisible),k=(0,ee.zN)(null!==(l=g.id)&&void 0!==l?l:"",m),j=(0,ee.Vo)(m),w=!!m.scheduledDeliveryAvailable,{updateGroupCart:Z,loading:B}=(0,C.Z)(),{isLoading:W,refetch:F}=(0,K.w)({storeId:(null==L?void 0:L.storeId)||"",isPickup:!!(null==L?void 0:L.isPickup),scheduledWindowStart:(null==L?void 0:L.scheduledWindowStart)||void 0,scheduledWindowEnd:(null==L?void 0:L.scheduledWindowEnd)||void 0,skip:!0}),{showTooltip:Y,setShowTooltip:H,fireEventTracking:V}=(0,tm.Z)();E.useEffect(()=>{(null==L?void 0:L.storeAddress.lat)===""&&(null==L?void 0:L.storeAddress.lng)===""&&M({...L,storeAddress:eI(m)})},[null===(n=m.restaurant)||void 0===n?void 0:null===(t=n.address)||void 0===t?void 0:t.lat,null==m?void 0:null===(i=m.restaurant)||void 0===i?void 0:null===(r=i.address)||void 0===r?void 0:r.lng]),E.useEffect(()=>{if(L){let e=ey(m);M({...L,...e})}},[m.groupCartPreCheckoutDetails]);let z=E.useCallback((e,t)=>{let n=tu(eS(m)),r=tu(e);p()(n,r)?Q():Z({...r,cartId:m.id},{onCompleted:()=>{Q(),null==t||t()}})},[m,Z]);E.useEffect(()=>{let e=async()=>{var e,t;let n=await F(),r=null==n?void 0:null===(t=n.data)||void 0===t?void 0:null===(e=t.recommended_order_deadline)||void 0===e?void 0:e.timestamp,i=r?(null==L?void 0:L.checkoutMode)||y:void 0,o=r?new Date(r).getTime():void 0,l={...L,checkoutMode:i,orderDeadlineTimestamp:o};z(l,()=>{H(!!r),r&&V({scheduledWindowStart:l.scheduledWindowStart,scheduledWindowEnd:l.scheduledWindowEnd,recommendedOrderDeadline:o?new Date(o).toISOString():void 0,checkoutMode:i})})};"FETCH_UPDATED_ORDER_DEADLINE"===A&&e()},[A]);let Q=()=>{x("NONE"),b("NONE"),M(null)},q=()=>{L||M(eS(m))},$=e=>{if("VIEW_ORDER_DEADLINE"===e){O&&(0,ee.Yo)(m)&&(0,ee.Tf)(m)&&"WARN_WILL_UNLOCK_CART"!==A?(q(),x("WARN_WILL_UNLOCK_CART")):"WARN_WILL_UNLOCK_CART"===A?(q(),x(e)):R&&(q(),(0,v.Av)({orderCartId:m.id,action:"viewOrderDeadline",audienceType:d?v.ki.creator:v.ki.participant}),x(e));return}if("VIEW_SCHEDULING"===e){var t,n;w?"WARN_CHANGE_SCHEDULE"!==A&&(null==m?void 0:null===(n=m.groupCartPreCheckoutDetails)||void 0===n?void 0:null===(t=n.autoCheckoutConfig)||void 0===t?void 0:t.eventTime)?x("WARN_CHANGE_SCHEDULE"):(q(),x(e)):(q(),x("STORE_SCHEDULING_UNAVAILABLE_INFO"));return}if("VIEW_ORDER_DETAILS"===e){q(),x(e);return}x(e)},J=()=>{"NONE"===P&&M(null),x(P),b("NONE")};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(eo,{isGroupCartOwner:d,orderCart:m}),(0,u.jsx)(ti,{action:A,closeModal:J,isGroupCartOwner:d,orderCart:m}),(0,u.jsx)(t_,{action:A,setNextAction:$,closeModal:J,groupCartDataDraft:L,isLoading:B||W,isSchedulingViewEnabled:O,updateDraft:e=>{if("VIEW_SCHEDULING"===A){M(e),$("FETCH_UPDATED_ORDER_DEADLINE");return}if("VIEW_ORDER_DEADLINE"===A){e.checkoutMode===en.ON.AUTOMATIC?(M(e),b(A),$("VIEW_ORDER_DETAILS")):z(e);return}if("VIEW_ORDER_DETAILS"===A){z(e);return}}}),(0,u.jsx)(s.Z,{size:c.wM.small,verticalSize:c.wM.none,children:(0,u.jsxs)(_.Z,{size:c.Uo.xxSmall,children:[(0,u.jsx)(G,{children:N.ZP.t("menu_groupCarts_ownersGroupOrder",{ownerName:null!==(a=null==m?void 0:null===(o=m.creator)||void 0===o?void 0:o.firstName)&&void 0!==a?a:""})}),(0,u.jsx)(ev,{isGroupCartOwner:d,orderCart:m,onAddItems:k?void 0:()=>U(!1),onViewOrderDetails:j?()=>$("VIEW_ORDER_DETAILS"):void 0,setInviteModalOpen:()=>x("INVITE_PEOPLE"),setDeleteCartModalOpen:()=>x("DELETE_GROUP_ORDER")}),(0,u.jsx)(et,{isGroupCartOwner:d,isSchedulingViewEnabled:O,showRecommendedTooltip:Y,orderCart:m,consumer:g,setNextAction:e=>$(e)})]})})]})}},876478:function(e,t,n){n.d(t,{f:function(){return o}});var r=n(305017),i=n(222679);let o=()=>{let e=(0,i.y)(r.pc.ddfbLoqAutocheckoutCreatorV2,!1),t=(0,i.y)(r.pc.enableScheduleAheadGroupCart,!1);return e&&t}},753245:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(979994),i=n(860413),o=n(499939),l=n(366033);function a(){let e=(0,r._)(["\n  mutation updateGroupCart(\n    $cartId: ID!\n    $fulfillmentType: FulfillmentType\n    $preCheckoutDetails: GroupCartPreCheckoutDetailsInput\n  ) {\n    updateGroupCart(\n      cartId: $cartId\n      fulfillmentType: $fulfillmentType\n      preCheckoutDetails: $preCheckoutDetails\n    ) {\n      id\n      fulfillmentType\n      ...GroupCartPreCheckoutDetailsFragment\n    }\n  }\n  ","\n"]);return a=function(){return e},e}let d=(0,i.gql)(a(),o.jK),u=()=>(0,l.D)(d);var s=n(277595),c=n(142916),_=n(828743),m=n(292418),p=n(876478),E=n(970501),v=()=>{let[e,{loading:t}]=u(),n=(0,p.f)(),{updateCartSelectedDeliveryOption:r}=(0,_.Z)({}),i=(t,i)=>{let{cartId:o,scheduledWindowStart:l,scheduledWindowEnd:a}=t,d={cartId:o,preCheckoutDetails:(0,c.Z)(t)},u=e=>{var t;(0,s.XA)({version:"v2",...d}),null==i||null===(t=i.onCompleted)||void 0===t||t.call(i,e)};e({variables:d}).then(e=>{n?r({variables:{cartId:o,selectedDeliveryOption:(0,m.$8)(l,a)||{deliveryOptionType:E.n57.STANDARD}}}).then(()=>{u(e)}):u(e)})};return{updateGroupCart:i,unlockGroupCart:(e,t)=>{i({cartId:e},t)},loading:t}}},543028:function(e,t,n){n.d(t,{Q_:function(){return a},cd:function(){return l},mU:function(){return i}});var r,i,o=n(970501);function l(e,t){let n=null==t?void 0:t.addCartItemV2,r=!!(n&&!n.groupCart);return!!n&&!e&&r}function a(e){switch(e){case"substitute":return o.mUZ.substitute;case"refund":return o.mUZ.refund;case"contact":return o.mUZ.contact;case"cancel":return o.mUZ.cancel;default:return}}(r=i||(i={})).Substitute="substitute",r.Refund="refund",r.Contact="contact",r.Cancel="cancel"},292418:function(e,t,n){n.d(t,{$8:function(){return m},EU:function(){return p},G_:function(){return d},Xb:function(){return _}});var r=n(543028),i=n(970501),o=n(725004),l=n(706248);let a=e=>s(e).filter(e=>{var t;return null===(t=e.parent)||void 0===t?void 0:t.isStandaloneItem}).map(e=>{var t,n;return{name:e.name,id:e.id,currency:e.currency,quantity:null!==(n=e.quantity)&&void 0!==n?n:1,unitAmount:e.unitAmount+e.getNestedPrice(),itemStoreId:null===(t=e.parent)||void 0===t?void 0:t.storeId,isBundle:(0,o.p4)(e),nestedOptions:JSON.stringify(s(e).map(e=>c(e,{id:e.id,quantity:e.quantity?e.quantity:1,options:[],itemExtraOption:{id:e.id,name:e.name,chargeAbove:e.chargeAbove,defaultQuantity:e.defaultQuantity}})))}}),d=e=>JSON.stringify(u(e)),u=e=>s(e).filter(e=>{var t;return!(null===(t=e.parent)||void 0===t?void 0:t.isStandaloneItem)}).map(e=>c(e,{id:e.id,quantity:e.quantity?e.quantity:1,options:[],itemExtraOption:{id:e.id,name:e.name,description:e.name,price:e.unitAmount,chargeAbove:e.chargeAbove,defaultQuantity:e.defaultQuantity}})),s=e=>e.children.reduce((e,t)=>e.concat(t.getSelectedOptions()),[]),c=(e,t)=>e.children.length?(e.children.forEach(n=>{n.getSelectedOptions().forEach(n=>{let r=c(n,{id:n.id,quantity:n.quantity?n.quantity:1,options:[],itemExtraOption:{id:n.id,name:n.name,chargeAbove:e.chargeAbove,defaultQuantity:e.defaultQuantity}});t.options.push(r)})}),t):{id:e.id,quantity:e.quantity?e.quantity:1,options:[],itemExtraOption:{id:e.id,name:e.name,description:e.name,price:e.unitAmount,chargeAbove:e.chargeAbove,defaultQuantity:e.defaultQuantity}},_=(e,t,n,r)=>{let i=(null==e?void 0:e.menu)&&e.menu.id!==r||!1,o=((null==e?void 0:e.isConsumerPickup)||!1)!==t,l=(null==e?void 0:e.groupCart)||!1,a=(null==e?void 0:e.offersDelivery)||!1,d=(null==e?void 0:e.offersPickup)||!1;return l?n&&o:t&&i||o||d&&!a&&i},m=(e,t)=>{if(e&&t)return{deliveryOptionType:i.n57.SCHEDULE,scheduledWindow:{rangeMinUtc:e,rangeMaxUtc:t}}};function p(e){var t,n,i,o;let{itemNode:u}=e,s=function(e){let{itemNode:t,menuId:n,orderCart:r,orderCartId:i,isCartOwner:o,isPickupSelected:l}=e,u=(o?i:(null==r?void 0:r.urlCode)||i)||"",s=d(t),c=a(t);return{cartId:u,nestedOptions:s,shouldSetPickup:_(r,l,o,n),lowPriorityItems:c}}(e),c=!!e.returnCartFromOrderService||!!(null===(t=e.orderCart)||void 0===t?void 0:t.groupCart),p=s.cartId===(null===(n=e.orderCart)||void 0===n?void 0:n.id),E=!!(null===(i=e.orderCart)||void 0===i?void 0:i.isBundle)&&p,v=m(e.scheduledMinTimeUtc,e.scheduledMaxTimeUtc);return{addCartItemInput:{storeId:e.storeId,menuId:e.isBundle?"":e.menuId,itemId:u.id,itemName:u.name,itemDescription:u.description,currency:u.currency,quantity:u.quantity,nestedOptions:s.nestedOptions,specialInstructions:u.instructions.specialInstructions,substitutionPreference:(0,r.Q_)(u.instructions.substitution),unitPrice:u.calculateItemTotal(!0),cartId:s.cartId,isBundle:e.isBundle,bundleType:e.bundleType||(0,l.i)({isBundle:e.isBundle})},lowPriorityBatchAddCartItemInput:s.lowPriorityItems.map(t=>{var n;return{cartId:s.cartId,storeId:null!==(n=t.itemStoreId)&&void 0!==n?n:e.storeId,menuId:t.isBundle?"":e.menuId,itemId:t.id,itemName:t.name,currency:t.currency,quantity:t.quantity,unitPrice:t.unitAmount,isBundle:t.isBundle,bundleType:(0,l.i)({isBundle:t.isBundle}),nestedOptions:t.nestedOptions}}),fulfillmentContext:e.fulfillmentContextInput,monitoringContext:{isGroup:(null===(o=e.orderCart)||void 0===o?void 0:o.groupCart)||!1},cartContext:{isBundle:E},returnCartFromOrderService:c,shouldKeepOnlyOneActiveCart:e.shouldKeepOnlyOneActiveCart,selectedDeliveryOption:v}}},597968:function(e,t,n){n.d(t,{L:function(){return u}});var r=n(979994),i=n(366033),o=n(860413),l=n(970501);function a(){let e=(0,r._)(["\n  mutation checkoutSetCartFulfillmentType(\n    $cartId: ID!\n    $fulfillmentType: FulfillmentType\n    $cartContext: CartContextInput\n  ) {\n    setCartFulfillmentTypeV2(cartId: $cartId, fulfillmentType: $fulfillmentType, cartContext: $cartContext) {\n      id\n      # In the cart service migation implementation we do not need the full\n      # cart response because instead of relying on the response to update\n      # the cart data cache, we refetch the checkout query to get updated\n      # cart data via order service (not cart service)\n\n      # Please do NOT add any cart fields here.  Wait for the checkout\n      # query response instead.\n    }\n  }\n"]);return a=function(){return e},e}let d=(0,o.gql)(a());function u(e,t,n){let r={corporateIndividualOrdersEnabled:n,isBundle:e.isBundle};return{...r,cartContext:r,cartId:e.id,fulfillmentType:t?l.LK5.Pickup:l.LK5.Delivery}}t.Z=function(){return(0,i.D)(d,{fetchPolicy:"no-cache",refetchQueries:["checkout"],awaitRefetchQueries:!0})}},828743:function(e,t,n){var r=n(979994),i=n(860413),o=n(366033),l=n(575551);function a(){let e=(0,r._)(["\n  mutation updateCartSelectedDeliveryOption(\n    $cartId: ID!\n    $selectedDeliveryOption: SelectedDeliveryOptionInput\n  ) {\n    updateCartSelectedDeliveryOption(cartId: $cartId, selectedDeliveryOption: $selectedDeliveryOption) {\n      ...ConsumerOrderCartFragment\n    }\n  }\n  ","\n"]);return a=function(){return e},e}let d=(0,i.gql)(a(),l.h6);t.Z=e=>{let{refetchQueries:t}=e,[n,{data:r,loading:i,error:l,called:a}]=(0,o.D)(d,{refetchQueries:t,awaitRefetchQueries:!0});return{data:null==r?void 0:r.updateCartSelectedDeliveryOption,updateCartSelectedDeliveryOption:n,loading:i,error:l,called:a}}},906257:function(e,t,n){n.d(t,{AE:function(){return g},Ee:function(){return v},GJ:function(){return _},JA:function(){return d},SH:function(){return C},co:function(){return a},eh:function(){return c},fG:function(){return f},fN:function(){return m},r1:function(){return T},tb:function(){return p}});var r=n(455639),i=n(970501),o=n(859587),l=n(191146);let a=e=>{let{isMerchantShipping:t}=e;return(0,r.j)("checkout_action_tap_address",{is_merchant_shipping:t})},d=()=>(0,r.j)("name_checkout_tap"),u="shipping_scheduled",s="shipping_asap",c=e=>{let t;switch(e){case i.n57.SCHEDULE:t=u;break;case i.n57.STANDARD:default:t=s}return t},_=e=>{let{isMerchantShipping:t}=e;(0,r.j)("checkout_schedule_for_later_popup_load",{is_merchant_shipping:t})},m=e=>{let{isMerchantShipping:t}=e;(0,r.j)("checkout_schedule_for_later_popup_exit_click",{is_merchant_shipping:t})},p=e=>{let{itemId:t,photoPosition:n,photoId:i}=e;(0,r.j)("item_page_picture_scroll",{item_id:t,photo_position:n,photo_id:i,isMerchantShipping:!0})},E=e=>{var t;return(0,l.bl)(null!==(t=e.asapDeliveryOverrideTitle)&&void 0!==t?t:"")},v=e=>{let{storeId:t}=e;return(0,r.j)("store_shipping_info_tap",{store_id:t})},C=e=>{let{storeId:t}=e;return(0,r.j)("store_shipping_info_confirm_tap",{store_id:t})},g=e=>({is_merchant_shipping:o.getIsStoreShipping(e),asap_shipping_eta:(0,l.bl)(o.getDeliveryTimeLayoutTitle(e))}),T=e=>({is_merchant_shipping:(0,l.sn)(e),asap_shipping_eta:E(e)}),f=(e,t)=>({is_merchant_shipping:(0,l.sn)(e),option_name:t?s:u})},810146:function(e,t,n){n.d(t,{i:function(){return r}});let r={menuNavCategories:"MenuNavCategories",menuDropdownButton:"MenuDropdownButton",menuDropdownMenuItem:"MenuDropdownMenuItem",menuOrderMethodToggleDelivery:"MenuOrderMethodToggleDelivery",menuOrderMethodTogglePickup:"MenuOrderMethodTogglePickup",moreInfoButton:"MoreInfoButton",itemModal:"ItemModal",itemModalBody:"MenuItemModalBody",addToCartButton:"AddToCartButton",addToCartButtonSeoOptimization:"AddToCartButtonSeoOptimization",decrementItemQuantity:"DecrementQuantity",incrementItemQuantity:"IncrementQuantity",menuItem:"MenuItem",pickupBanner:"MenuPickupBanner",deliveryBanner:"MenuDeliveryBanner",deliveryBannerSubtext:"MenuDeliveryBannerSubtext",caloricInfoDisplayString:"caloricInfoDisplayString",abbreviatedTagDisplayString:"abbreviatedTagDisplayString",fullTagDisplayString:"fullTagDisplayString",storeMenuItemPrice:"StoreMenuItemPrice",menuHeaderDeliveryFee:"MenuHeaderDeliveryFee",menuHeaderPickupETA:"MenuHeaderPickupETA",createGroupCartButton:"CreateGroupCartButton",cancelGroupCartButton:"CancelGroupCartButton",createGroupCartModalButton:"CreateGroupCartModalButton",groupCartBanner:"GroupCartBanner",inviteGroupCartModalButton:"InviteGroupCartModalButton",groupCartLinkTextField:"GroupCartLinkTextField",groupCartLimitOption:"GroupCartLimitOption",groupCartBannerHeading:"GroupCartBannerHeading",groupCartBannerSubheading:"GroupCartBannerSubheading",itemAgeDisclaimer:"ItemAgeDisclaimer",bundleMenuItem:"BundleMenuItem",addFoodModal:"AddFoodModal"}},92437:function(e,t,n){n.d(t,{u:function(){return r}});let r=e=>{if(!e)return"";let t=e.split(",");return t.slice(0,t.length-1).join()}},768338:function(e,t,n){var r=n(699251),i=n(455639);let o=(e,t)=>"".concat("__tOnce__").concat(e).concat(t?"__".concat(t,"__"):""),l=e=>null!==e&&"object"==typeof e&&e.hasOwnProperty("hasTracked");t.Z=(e,t,n,a)=>{let d=o(e,a),u=r.simpleStoreSession.get(d);if(!(u&&l(u))||!u.hasTracked)return r.simpleStoreSession.set(d,{hasTracked:!0}),(0,i.j)(e,t,n)}},725004:function(e,t,n){n.d(t,{FN:function(){return a},LD:function(){return l},SZ:function(){return o},XT:function(){return d},p4:function(){return i}});let r="drinks_by_doubledash",i=e=>{var t;return null===(t=e.parent)||void 0===t?void 0:t.id.startsWith(r)},o=e=>e.id.startsWith(r),l=e=>e.find(e=>e.id.startsWith(r)),a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;return t?e.filter(e=>null==e.storeId||e.storeId===n):e},d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter(e=>"item"!==e.type)}},784386:function(e,t,n){var r=n(361967),i=n(74152),o=n(549736),l=n(560930),a=n(655914);n(313773);var d=n(693925),u=n(731690),s=n(753245),c=n(277595);t.Z=e=>{let{isOpen:t,title:n,orderCartId:_,trackingContext:m,onUnlockCartSuccess:p,onClose:E}=e,{unlockGroupCart:v,loading:C}=(0,s.Z)();return(0,r.jsx)(i.Z,{onClose:E,isOpen:t,hasCloseButton:!0,title:n||u.ZP.t("menu_groupCarts_unlockingACartWillRemoveDeadline"),primaryAction:{text:u.ZP.t("menu_budgets_ok"),buttonProps:{type:o.L$.primary,state:C?o.BN.loading:o.BN.default},onClick:()=>{(0,c.EE)(_,m.orderDeadlineTimestamp),v(_,{onCompleted:()=>{null==p||p()}})}},"data-testid":d.D.UnlockCartModal,children:(0,r.jsx)(l.x,{color:a.d9.text.subdued.default,children:u.ZP.t("menu_groupCarts_participantsWillBeAbleToMakeChanges")})})}},755492:function(e,t,n){var r=n(361967);n(313773);var i=n(918564),o=n(918821),l=n(509300),a=n(560930),d=n(655914),u=n(613531),s=n(190510),c=n(117874),_=n(549736),m=n(712936),p=n(731690),E=n(905954),v=n(277595);let C=i.default.div.withConfig({componentId:"sc-2d6bc6ad-0"})(["display:flex;justify-content:center;align-items:center;flex-direction:column;"]);t.Z=e=>{var t;let{consumer:n,cartId:i,isGroupCartOwner:g,isExpandedSize:T}=e,f=(0,E.E_)(e=>e.setFloatingCheckoutVisible);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Z,{order:{consumer:{localizedNames:{formalNameAbbreviated:(null===(t=n.localizedNames)||void 0===t?void 0:t.formalNameAbbreviated)||""}}},isOwnOrder:!0}),(0,r.jsx)(o.Z,{verticalSize:T?l.wM.xxxLarge:l.wM.medium,horizontalSize:l.wM.medium,children:(0,r.jsxs)(C,{children:[(0,r.jsx)(a.x,{textStyle:d.TextStyle.body.medium.strong,children:p.ZP.t("layoutStrings_orderCart_groupCart_haveNotAddedItems")}),(0,r.jsx)(u.Z,{size:l.$f.small}),(0,r.jsx)(s.Z,{leadingIcon:c.c.Add,type:_.L$.tertiary,size:c.qE.small,isInline:!0,onClick:()=>{(0,v.EV)(i,g,!0),f(!1)},children:p.ZP.t("checkoutStrings_editOrderStrings_addItems")})]})})]})}},345002:function(e,t,n){var r=n(361967);n(313773);var i=n(731690),o=n(918821),l=n(509300),a=n(177560),d=n(117874),u=n(549736),s=n(560930),c=n(655914);t.Z=e=>{let{title:t,iconType:n,accessibilityLabel:_,onClose:m,children:p}=e;return(0,r.jsxs)(o.Z,{size:l.wM.small,children:[(0,r.jsx)(a.Z,{onClick:m,size:d.rm.medium,accessibilityLabel:_||i.ZP.t("commonStrings_wizard_back"),type:u.xZ.flatSecondary,iconType:n||d.L.Close}),(0,r.jsx)(s.x,{textStyle:c.TextStyle.display.large,children:t}),p]})}},21929:function(e,t,n){n.d(t,{lF:function(){return R},lJ:function(){return A}});var r=n(361967),i=n(313773),o=n(159967),l=n(74152),a=n(117874),d=n(613531),u=n(509300),s=n(232755),c=n(560930),_=n(655914),m=n(549736),p=n(34928),E=n(222679),v=n(305017),C=n(918564),g=n(345002),T=n(731690),f=n(232077),I=n(660732),S=n(538763),y=n(193169),h=n(580920),O=n(249478),D=n(258814);let R=C.default.div.withConfig({componentId:"sc-4bae06a8-0"})(["overflow:hidden;height:",";max-height:",";"],e=>{let{isMobile:t}=e;return t?"calc(100vh - ".concat(130,"px - ").concat(125,"px)"):"calc(100vh - calc(".concat(o.Q2.usage.space.medium," * 2) - ").concat(130,"px - ").concat(73,"px)")},e=>{let{isMobile:t}=e;return t?"auto":"".concat(540,"px")}),A=e=>{let{isMobile:t,timePickerData:n,selectedDateOption:i,selectedTimeOption:o,onChangeDate:l,onChangeTime:a,styleOverride:d}=e;return n?(0,r.jsx)(R,{isMobile:t,children:(0,r.jsx)(h.Z,{timePickerData:n,selectedDate:i,selectedTime:o,onChangeDate:l,onChangeTime:a,styleOverride:d})}):null};t.ZP=e=>{let{cartData:t,isMenuSticky:n,showBackButton:o,showCtaLoading:C,onSave:h,onClose:R}=e,{isMobile:x}=(0,O.ac)(),P=(0,S.bU)(),b=(0,E.Cp)(v.pc.ddfbLoqAutocheckoutAsapMinutesEstimate,I.R),{storeId:N,storeTimezone:L,isPickup:M,menuId:U,scheduledWindowStart:k,scheduledWindowEnd:j}=t,[G,w]=i.useState(!1),[Z,B]=i.useState(""),[W,F]=i.useState(""),{data:Y,isLoading:H}=(0,f.d)({storeId:N,menuId:n?U:void 0,asapMinutesEstimate:b,isPickup:M}),V=i.useMemo(()=>H?null:(0,y.Z)(P,L,M,(null==Y?void 0:Y.availableDays)||[]),[H,P,L,M,null==Y?void 0:Y.availableDays]);return i.useEffect(()=>{if(!G&&V){w(!0);let{selectedDate:e,selectedTime:t}=(0,D.D)(V,k,j),n=e&&t?{selectedDate:e,selectedTime:t}:(0,D.e5)(V);B(n.selectedDate),F(n.selectedTime)}},[G,j,k,V]),(0,r.jsx)(l.Z,{isOpen:!0,hasHeaderPadding:!0,hasContentPadding:!1,hasCloseButton:!1,title:M?T.ZP.t("menu_groupOrderSchedulingModal_pickup_title"):T.ZP.t("menu_groupOrderSchedulingModal_delivery_title"),onClose:R,renderContentHeader:e=>{let{title:t,onClose:n}=e;return(0,r.jsxs)(g.Z,{title:t,onClose:n,iconType:o?a.L.ArrowLeft:void 0,children:[(0,r.jsx)(d.Z,{size:u.$f.xxSmall}),(0,r.jsx)(s.Z,{size:u.Uo.none,children:(0,r.jsx)(c.x,{textStyle:_.TextStyle.label.medium.default,color:_.d9.text.subdued.default,children:M?T.ZP.t("menu_groupOrderSchedulingModal_pickup_subtitle"):T.ZP.t("menu_groupOrderSchedulingModal_delivery_subtitle")})})]})},primaryAction:{text:T.ZP.t("commonStrings_wizard_save"),buttonProps:{isDisabled:!Z||!W,state:C?m.BN.loading:m.BN.default},onClick:()=>{var e,t,n,r;let i=null==V?void 0:null===(r=V.dateTimeOptions)||void 0===r?void 0:null===(n=r.find(e=>e.dateKey===Z))||void 0===n?void 0:null===(t=n.times)||void 0===t?void 0:null===(e=t.find(e=>e.timeKey===W))||void 0===e?void 0:e.value;h(i?{scheduledWindowStart:i.rangeMin?new Date(i.rangeMin).toISOString():"",scheduledWindowEnd:i.rangeMax?new Date(i.rangeMax).toISOString():""}:{})}},secondaryAction:{text:T.ZP.t("commonStrings_wizard_cancel"),onClick:R},children:H?(0,r.jsx)(p.a,{}):(0,r.jsx)(A,{isMobile:x,timePickerData:V,selectedDateOption:Z,selectedTimeOption:W,onChangeDate:e=>{if(e!==Z){var t,n,r,i;B(e),F((null==V?void 0:null===(i=V.dateTimeOptions)||void 0===i?void 0:null===(r=i.find(t=>t.dateKey===e))||void 0===r?void 0:null===(n=r.times)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.timeKey)||"")}},onChangeTime:e=>{F(e)}})})}},258814:function(e,t,n){n.d(t,{D:function(){return l},e5:function(){return i},jn:function(){return o}});var r=n(531933);let i=e=>{var t,n,r,i,o,l,a,d,u;let s=null===(t=e.dateTimeOptions)||void 0===t?void 0:t[0];return{selectedDate:(null==s?void 0:s.dateKey)||"",selectedTime:(null==s?void 0:null===(r=s.times)||void 0===r?void 0:null===(n=r[0])||void 0===n?void 0:n.timeKey)||"",selectedScheduledMinUtc:(null==s?void 0:null===(l=s.times)||void 0===l?void 0:null===(o=l[0])||void 0===o?void 0:null===(i=o.value.rangeMin)||void 0===i?void 0:i.toISOString())||"",selectedScheduledMaxUtc:(null==s?void 0:null===(u=s.times)||void 0===u?void 0:null===(d=u[0])||void 0===d?void 0:null===(a=d.value.rangeMax)||void 0===a?void 0:a.toISOString())||""}},o=(e,t)=>{if(t){var n,r,i,o;let l=null===(n=e.dateTimeOptions)||void 0===n?void 0:n.find(e=>e.dateKey===t);if(l){let e=null===(r=l.times)||void 0===r?void 0:r.find(e=>e.value.rangeMax&&e.value.rangeMin);if(e)return{selectedDate:l.dateKey,selectedTime:e.timeKey,selectedScheduledMinUtc:(null===(i=e.value.rangeMin)||void 0===i?void 0:i.toISOString())||"",selectedScheduledMaxUtc:(null===(o=e.value.rangeMax)||void 0===o?void 0:o.toISOString())||""}}}return{selectedDate:"",selectedTime:"",selectedScheduledMinUtc:"",selectedScheduledMaxUtc:""}},l=(e,t,n)=>{let i="",o="",l="",a="";if(t&&n){var d;null===(d=e.dateTimeOptions)||void 0===d||d.find(e=>{var t;null===(t=e.times)||void 0===t||t.find(t=>{var d,u,s,c;return!!(0,r.Y)(n,(null===(d=t.value.rangeMin)||void 0===d?void 0:d.toISOString())||"",(null===(u=t.value.rangeMax)||void 0===u?void 0:u.toISOString())||"")&&(i=e.dateKey,o=t.timeKey,l=(null===(s=t.value.rangeMin)||void 0===s?void 0:s.toISOString())||"",a=(null===(c=t.value.rangeMax)||void 0===c?void 0:c.toISOString())||"",!0)})})}return{selectedDate:i,selectedTime:o,selectedScheduledMinUtc:l,selectedScheduledMaxUtc:a}}},660732:function(e,t,n){n.d(t,{R:function(){return r},v:function(){return i}});let r=90,i=3e3},232077:function(e,t,n){n.d(t,{d:function(){return d}});var r=n(794304),i=n(970644),o=n.n(i),l=n(13794);let a=e=>["getStandardAndScheduleAvailabilityForStore",e.storeId,e.menuId||"",e.asapMinutesEstimate.toString(),e.isPickup?"true":"false"],d=e=>{let[t]=(0,r.useUGClient)(o()),{data:n,isLoading:d,error:u,refetch:s}=(0,l.useQuery)({queryFn:()=>t.getCxScheduleV1ScheduleAvailability({storeId:e.storeId,menuId:e.menuId,asapMinutesEstimate:e.asapMinutesEstimate,fulfillmentType:e.isPickup?i.CommonFulfillmentType.Pickup:i.CommonFulfillmentType.Delivery}),queryKey:a(e),refetchOnWindowFocus:!1,retry:!1,refetchOnMount:!0,enabled:!!e.storeId});return{data:n,isLoading:d,error:u,refetch:s}}},193169:function(e,t,n){var r=n(892692),i=n(731690),o=n(698491),l=n(673727);let a=(e,t,n,r)=>{let o=!r.rangeMax||!r.rangeMin,l="",a="";return o?(l=n?i.ZP.t("menu_groupCarts_standardPickup"):i.ZP.t("menu_groupCarts_standardDelivery"),a=i.ZP.t("checkoutStrings_asap")):r.rangeMax&&r.rangeMin&&(l="".concat(d(e,t,r.rangeMin)," - ").concat(d(e,t,r.rangeMax))),{label:l,description:a,timeKey:l,value:r}},d=(e,t,n)=>(0,r.o0)({date:n,locale:e,dateOptions:{dateStyle:void 0,timeStyle:"short"},timeZone:t});t.Z=(e,t,n,r)=>{let i=r.map(r=>{var i,d;let u=null===(i=r.timeWindows)||void 0===i?void 0:i[0],s=r.dayTimestamp||null,c=new Date((null==s?void 0:s.year)||0,((null==s?void 0:s.month)||0)-1,(null==s?void 0:s.day)||0);if(!u)return{dateKey:"",times:[]};let _=(null==u?void 0:u.midpointTimestamp)?new Date(u.midpointTimestamp):new Date;return{dateKey:(0,o.gw)(_,t),label:(0,l.C8)(new Date(_),e,new Date,t,{toUpperCase:!1,useLongWeekdayDisplay:!0})||"",description:(0,l.hk)(c,e)||"",times:(null===(d=r.timeWindows)||void 0===d?void 0:d.map(r=>a(e,t,n,r)))||[]}});return{timezone:t,dateTimeOptions:i}}}}]);
//# sourceMappingURL=18666-cc76a576662c21b8.js.map
//# debugId=9812dc3b-5dda-5cb8-b84c-acc9c28aceb4
